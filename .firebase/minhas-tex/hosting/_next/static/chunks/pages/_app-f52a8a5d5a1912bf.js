(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3454:function(t,e,n){"use strict";var r,i;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},6840:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(1484)}])},1484:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});var r=n(5893),i=n(8526),o=n(3831);function s(t){let{Component:e,pageProps:n}=t;return(0,r.jsx)(o.H,{children:(0,r.jsx)(i.w,{children:(0,r.jsx)(e,{...n})})})}n(9166),n(7294)},8526:function(t,e,n){"use strict";n.d(e,{w:function(){return s}});var r=n(5893),i=n(7294);let o=(0,i.createContext)({theme:null,changeTheme:null});function s(t){let[e,n]=(0,i.useState)("dark");return(0,i.useEffect)(()=>{n(localStorage.getItem("theme"))},[]),(0,r.jsx)(o.Provider,{value:{theme:e,changeTheme:function(){let t=""===e?"dark":"";n(t),localStorage.setItem("theme",t)}},children:t.children})}e.Z=o},3831:function(t,e,n){"use strict";n.d(e,{H:function(){return p},Z:function(){return d}});var r=n(5893),i=n(1163),o=n.n(i);/*! js-cookie v3.0.5 | MIT */function s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var a=function t(e,n){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=s({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=e.read(s,a),t===a)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",s({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,s({},this.attributes,e))},withConverter:function(e){return t(s({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),u=n(7294),c=n(3453);let h=(0,u.createContext)({});async function l(t){let e=await t.getIdToken();return{uid:t.uid,name:t.displayName,email:t.email,token:e,provider:t.providerData[0].providerId,imageUrl:t.photoURL}}function f(t){t?a.set("myTexAuth",t,{expires:7}):a.remove("myTexAuth")}function p(t){let[e,n]=(0,u.useState)(!0),[i,s]=(0,u.useState)(null);async function p(t){if(null==t||!t.email)return s(null),f(!1),n(!1),!1;{let e=await l(t);return s(e),f(!0),n(!1),e.email}}async function d(t,e){try{n(!0);let r=await c.Z.auth().signInWithEmailAndPassword(t,e);await p(r.user),o().push("/")}finally{n(!1)}}async function v(t,e){try{n(!0);let r=await c.Z.auth().createUserWithEmailAndPassword(t,e);await p(r.user),o().push("/")}finally{n(!1)}}async function g(){try{n(!0);let t=await c.Z.auth().signInWithPopup(new c.Z.auth.GoogleAuthProvider);await p(t.user),o().push("/")}finally{n(!1)}}async function m(){try{n(!0),await c.Z.auth().signOut(),await p(null)}finally{n(!1)}}return(0,u.useEffect)(()=>{if(a.get("myTexAuth")){let t=c.Z.auth().onIdTokenChanged(p);return()=>t()}n(!1)},[]),(0,r.jsx)(h.Provider,{value:{user:i,loading:e,register:v,login:d,loginGoogle:g,logout:m},children:t.children})}var d=h},3453:function(t,e,n){"use strict";n.d(e,{Z:function(){return fT},t:function(){return fI}});var r,i,o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function f(t,e,n){if(n||2==arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:((64512&i)==55296&&r+1<t.length&&(64512&t.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},d=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=t[n++],s=t[n++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{var o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")},v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(p(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function g(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=g(t[n],e[n]));return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var w=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,_.prototype.create),o}return s(e,t),e}(Error),_=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?o.replace(I,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}):"Error",a=this.serviceName+": "+s+" ("+i+").";return new w(i,a,r)},t}(),I=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new S(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n,r,i=this.W_;if("string"==typeof t)for(var o=0;o<16;o++)i[o]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(var o=0;o<16;o++)i[o]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(var o=16;o<80;o++){var s=i[o-3]^i[o-8]^i[o-14]^i[o-16];i[o]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],o=0;o<80;o++){o<40?o<20?(n=h^u&(c^h),r=1518500249):(n=u^c^h,r=1859775393):o<60?(n=u&c|h&(u|c),r=2400959708):(n=u^c^h,r=3395469782);var s=(a<<5|a>>>27)+n+l+r+i[o]&4294967295;l=h,h=c,c=(u<<30|u>>>2)&4294967295,u=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0;n<e.length;n++){var r=e[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t,["next","error","complete"])?{next:t,error:e,complete:n}:t).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function A(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t){return t&&t._delegate?t._delegate:t}var N=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),C="[DEFAULT]",R=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new m;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}else{if(r)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:C})}catch(t){}try{for(var r=h(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=l(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=C),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,Promise.all(f(f([],l((t=Array.from(this.instances.values())).filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),l(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=C),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e,n,r=t.options,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:void 0===r?{}:r});try{for(var s=h(this.instancesDeferred.entries()),a=s.next();!a.done;a=s.next()){var u=l(a.value,2),c=u[0],f=u[1],p=this.normalizeInstanceIdentifier(c);i===p&&f.resolve(o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=h(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e===C?void 0:e,options:void 0===n?{}:n}),this.instances.set(e,r),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(t){}return r||null},t.prototype.normalizeInstanceIdentifier=function(t){return(void 0===t&&(t=C),this.component)?this.component.multipleInstances?t:C:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),D=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new R(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function O(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var x=[];(Z=te||(te={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT";var P={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},L=te.INFO,M=((tt={})[te.DEBUG]="log",tt[te.VERBOSE]="log",tt[te.INFO]="info",tt[te.WARN]="warn",tt[te.ERROR]="error",tt),U=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=M[e];if(o)console[o].apply(console,O(["["+i+"]  "+t.name+":"],n));else throw Error("Attempted to log a message with an invalid logType (value: "+e+")")}},F=function(){function t(t){this.name=t,this._logLevel=L,this._logHandler=U,this._userLogHandler=null,x.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in te))throw TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?P[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,te.DEBUG],t)),this._logHandler.apply(this,O([this,te.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,te.VERBOSE],t)),this._logHandler.apply(this,O([this,te.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,te.INFO],t)),this._logHandler.apply(this,O([this,te.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,te.WARN],t)),this._logHandler.apply(this,O([this,te.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,O([this,te.ERROR],t)),this._logHandler.apply(this,O([this,te.ERROR],t))},t}();function V(t){x.forEach(function(e){e.setLogLevel(t)})}var j=new _("app","Firebase",((tn={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",tn["bad-app-name"]="Illegal App name: '{$appName}",tn["duplicate-app"]="Firebase App named '{$appName}' already exists",tn["app-deleted"]="Firebase App named '{$appName}' already deleted",tn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",tn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",tn)),q="@firebase/app",B="[DEFAULT]",K=((tr={})[q]="fire-core",tr["@firebase/analytics"]="fire-analytics",tr["@firebase/app-check"]="fire-app-check",tr["@firebase/auth"]="fire-auth",tr["@firebase/database"]="fire-rtdb",tr["@firebase/functions"]="fire-fn",tr["@firebase/installations"]="fire-iid",tr["@firebase/messaging"]="fire-fcm",tr["@firebase/performance"]="fire-perf",tr["@firebase/remote-config"]="fire-rc",tr["@firebase/storage"]="fire-gcs",tr["@firebase/firestore"]="fire-fst",tr["fire-js"]="fire-js",tr["firebase-wrapper"]="fire-js-all",tr),G=new F("@firebase/app"),H=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=g(void 0,t),this.container=new D(e.name),this._addComponent(new N("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){void 0===e&&(e=B),this.checkDestroyed_();var n,r=this.container.getProvider(t);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=B),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){G.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw j.create("app-deleted",{appName:this.name_})},t}();H.prototype.name&&H.prototype.options||H.prototype.delete||console.log("dc");var z=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t(){var e=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),("object"!=typeof i||null===i)&&(i={name:i});var o=i;void 0===o.name&&(o.name=B);var s=o.name;if("string"!=typeof s||!s)throw j.create("bad-app-name",{appName:String(s)});if(T(e,s))throw j.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=K[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),G.warn(u.join(" "));return}o(new N(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:V,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw j.create("invalid-log-argument");!function(t,e){for(var n=0;n<x.length;n++)!function(n){var r=null;e&&e.level&&(r=P[e.level]),null===t?n.userLogHandler=null:n.userLogHandler=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:te[n].toLowerCase(),message:s,args:i,type:e.name})}}(x[n])}(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!T(e,t=t||B))throw j.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return G.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw j.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&g(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++)e[c[u]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(H);return e.INTERNAL=a(a({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){g(e,t)},createSubscribe:E,ErrorFactory:_,deepExtend:g}),e}(),W=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if((null==(e=t.getComponent())?void 0:e.type)!=="VERSION")return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if("object"==typeof self&&self.self===self&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Q=self.firebase.SDK_VERSION;Q&&Q.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var X=z.initializeApp;z.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return b()&&G.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),X.apply(void 0,t)},z.INTERNAL.registerComponent(new N("platform-logger",function(t){return new W(t)},"PRIVATE")),z.registerVersion(q,"0.6.28",void 0),z.registerVersion("fire-js","");var Y="8.8.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */z.registerVersion("firebase",Y,"app"),z.SDK_VERSION=Y,(function(){var t,e,r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function s(t){var e,n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:(e=0,function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}}!function(t,e){if(e){var n=o;t=t.split(".");for(var r=0;r<t.length-1;r++){var s=t[r];s in n||(n[s]={}),n=n[s]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&i(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{switch(typeof t){case"object":var n=null!=t;break;case"function":n=!0;break;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){this.g(t);return}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)})},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e(function(t,e){var o=[],s=0;do o.push(void 0),s++,r(i.value).Ra(function(e){return function(n){o[e]=n,0==--s&&t(o)}}(o.length-1),e),i=n.next();while(!i.done)})},e});var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function k(t,e,n){this.code=C+t,this.message=e||R[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new k(e.substring(C.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var C="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(t){for(var e in D)if(D[e].id===t)return{firebaseEndpoint:(t=D[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}oH=O("__EID__")?"__EID__":void 0,S(P,Error),P.prototype.name="CustomError",S(L,P),L.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new U(function(){return new q},function(t){t.reset()});function q(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return -1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=B(t,e)}function X(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){var n=0;!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(r,i){e.call(void 0,r,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&n++})}function J(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,te=/</g,tn=/>/g,tr=/"/g,ti=/'/g,to=/\x00/g,ts=/[\x00&<>"']/;function ta(t,e){return -1!=t.indexOf(e)}function tu(t,e){return t<e?-1:t>e?1:0}t:{var tc=u.navigator;if(tc){var th=tc.userAgent;if(th){oz=th;break t}}oz=""}function tl(t){return ta(oz,t)}function tf(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function tp(t){for(var e in t)return!1;return!0}function td(t){var e,n={};for(e in t)n[e]=t[e];return n}var tv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tg(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<tv.length;o++)n=tv[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function tm(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function ty(t,e){this.a=t===t_&&e||"",this.b=tw}function tb(t){return t instanceof ty&&t.constructor===ty&&t.b===tw?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}ty.prototype.ta=!0,ty.prototype.sa=function(){return this.a},ty.prototype.toString=function(){return"Const{"+this.a+"}"};var tw={},t_={};function tI(){if(void 0===oW){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(t){u.console&&u.console.error(t.message)}oW=t}else oW=t}return oW}function tT(t,e){this.a=e===tN?t:""}function tE(t){return t instanceof tT&&t.constructor===tT?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function tS(t,e){var n,r,i=tb(t);if(!tk.test(i))throw Error("Invalid TrustedResourceUrl format: "+i);return n=t=i.replace(tA,function(t,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[n])instanceof ty?tb(t):encodeURIComponent(String(t))}),new tT(n=(r=tI())?r.createScriptURL(n):n,tN)}tT.prototype.ta=!0,tT.prototype.sa=function(){return this.a.toString()},tT.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var tA=/%{(\w+)}/g,tk=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,tN={};function tC(t,e){this.a=e===tM?t:""}function tR(t){return t instanceof tC&&t.constructor===tC?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}tC.prototype.ta=!0,tC.prototype.sa=function(){return this.a.toString()},tC.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var tD=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,tO=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,tx=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function tP(t){if(t instanceof tC)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),tx.test(t))t=new tC(t,tM);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(tO);t=e&&tD.test(e[1])?new tC(t,tM):null}return t}function tL(t){return t instanceof tC?t:(t="object"==typeof t&&t.ta?t.sa():String(t),tx.test(t)||(t="about:invalid#zClosurez"),new tC(t,tM))}var tM={},tU=new tC("about:invalid#zClosurez",tM);function tF(t,e,n){this.a=n===tV?t:""}tF.prototype.ta=!0,tF.prototype.sa=function(){return this.a.toString()},tF.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var tV={};function tj(t,e,n,r){return t=t instanceof tC?t:tL(t),e=e||u,n=n instanceof ty?tb(n):n||"",e.open(tR(t),n,r,void 0)}function tq(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function tB(t){return ts.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(te,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tn,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tr,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ti,"&#39;")),-1!=t.indexOf("\x00")&&(t=t.replace(to,"&#0;"))),t}function tK(t){return tK[" "](t),t}tK[" "]=f;var tG=tl("Opera"),tH=tl("Trident")||tl("MSIE"),tz=tl("Edge"),tW=tz||tH,tQ=tl("Gecko")&&!(ta(oz.toLowerCase(),"webkit")&&!tl("Edge"))&&!(tl("Trident")||tl("MSIE"))&&!tl("Edge"),tX=ta(oz.toLowerCase(),"webkit")&&!tl("Edge");function tY(){var t=u.document;return t?t.documentMode:void 0}t:{var tJ,t$="",tZ=(tJ=oz,tQ?/rv:([^\);]+)(\)|;)/.exec(tJ):tz?/Edge\/([\d\.]+)/.exec(tJ):tH?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(tJ):tX?/WebKit\/(\S+)/.exec(tJ):tG?/(?:Version)[ \/]?(\S+)/.exec(tJ):void 0);if(tZ&&(t$=tZ?tZ[1]:""),tH){var t0=tY();if(null!=t0&&t0>parseFloat(t$)){oQ=String(t0);break t}}oQ=t$}var t1={};function t2(t){return Object.prototype.hasOwnProperty.call(t1,t)?t1[t]:t1[t]=function(){for(var e=0,n=Z(String(oQ)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=tu(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||tu(0==s[2].length,0==a[2].length)||tu(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}(t)}var t3=u.document&&tH&&(tY()||parseInt(oQ,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var t4=!tH||9<=Number(t3);function t6(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function t5(t,e){tf(e,function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:t8.hasOwnProperty(n)?t.setAttribute(t8[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var t8={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function t9(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function t7(t){u.setTimeout(function(){throw t},0)}function et(t,e){oJ||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);oJ=function(){t.then(er)}}else oJ=function(){!v(u.setImmediate)||u.Window&&u.Window.prototype&&!tl("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(oY||(oY=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!tl("Presto")&&(t=function(){var t=t9(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I(function(t){("*"==r||t.origin==r)&&t.data==n&&this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!tl("Trident")&&!tl("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),oY(er)):u.setImmediate(er)}}(),ee||(oJ(),ee=!0),en.add(t,e)}var ee=!1,en=new V;function er(){for(var t,e;t=null,en.a&&(t=en.a,en.a=en.a.next,en.a||(en.b=null),t.next=null),e=t;){try{e.a.call(e.b)}catch(t){t7(t)}F(j,e)}ee=!1}function ei(t,e){if(this.a=eo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,function(t){em(n,es,t)},function(t){if(!(t instanceof eE))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}em(n,ea,t)})}catch(t){em(this,ea,t)}}var eo=0,es=2,ea=3;function eu(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}eu.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ec=new U(function(){return new eu},function(t){t.reset()});function eh(t,e,n){var r=ec.get();return r.g=t,r.b=e,r.f=n,r}function el(t){if(t instanceof ei)return t;var e=new ei(f);return em(e,es,t),e}function ef(t){return new ei(function(e,n){n(t)})}function ep(t,e,n){ey(t,e,n,null)||et(T(e,t))}function ed(t){return new ei(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ep(t[o],T(i,o,!0),T(i,o,!1));else e(r)})}function ev(t,e){t.b||t.a!=es&&t.a!=ea||eb(t),t.f?t.f.next=e:t.b=e,t.f=e}function eg(t,e,n,r){var i=eh(null,null,null);return i.a=new ei(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof eE?o(e):t(i)}catch(t){o(t)}}:o}),i.a.c=t,ev(t,i),i.a}function em(t,e,n){var r;t.a==eo&&(t===n&&(e=ea,n=TypeError("Promise cannot resolve to itself")),t.a=1,ey(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,eb(t),e!=ea||n instanceof eE||(r=n,t.g=!0,et(function(){t.g&&eT.call(null,r)}))))}function ey(t,e,n,r){if(t instanceof ei)return ev(t,eh(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function eb(t){t.h||(t.h=!0,et(t.gc,t))}function ew(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function e_(t,e,n,r){if(n==ea&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,eI(e,n,r);else try{e.c?e.g.call(e.f):eI(e,n,r)}catch(t){eT.call(null,t)}F(ec,e)}function eI(t,e,n){e==es?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ei.prototype.then=function(t,e,n){return eg(this,v(t)?t:null,v(e)?e:null,n)},ei.prototype.$goog_Thenable=!0,(r=ei.prototype).oa=function(t,e){return(t=eh(t,t,e)).c=!0,ev(this,t),this},r.o=function(t,e){return eg(this,null,t,e)},r.cancel=function(t){if(this.a==eo){var e=new eE(t);et(function(){(function t(e,n){if(e.a==eo){if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==eo&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ew(r),e_(r,o,ea,n)))}e.c=null}else em(e,ea,n)}})(this,e)},this)}},r.$c=function(t){this.a=eo,em(this,es,t)},r.ad=function(t){this.a=eo,em(this,ea,t)},r.gc=function(){for(var t;t=ew(this);)e_(this,t,this.a,this.i);this.h=!1};var eT=t7;function eE(t){P.call(this,t)}function eS(){0!=eA&&(ek[m(this)]=this),this.ya=this.ya,this.pa=this.pa}S(eE,P),eE.prototype.name="cancel";var eA=0,ek={};function eN(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=eA)){var e=m(t);if(0!=eA&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ek[e]}}eS.prototype.ya=!1,eS.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var eC=Object.freeze||function(t){return t},eR=!tH||9<=Number(t3),eD=tH&&!t2("9"),eO=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(t){}return t}();function ex(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function eP(t,e){if(ex.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(tQ){t:{try{tK(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:eL[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ex.prototype.preventDefault=function(){this.defaultPrevented=!0},S(eP,ex);var eL=eC({2:"touch",3:"pen",4:"mouse"});eP.prototype.preventDefault=function(){eP.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,eD)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},eP.prototype.g=function(){return this.a};var eM="closure_listenable_"+(1e6*Math.random()|0),eU=0;function eF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++eU,this.wa=this.Qa=!1}function eV(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function ej(t){this.src=t,this.a={},this.b=0}function eq(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(eV(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function eB(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&!!n==o.capture&&o.Wa==r)return i}return -1}ej.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=eB(t,e,r,i);return -1<s?(e=t[s],n||(e.Qa=!1)):((e=new eF(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var eK="closure_lm_"+(1e6*Math.random()|0),eG={},eH=0;function ez(t,e,n,r,i){if(r&&r.once)eQ(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ez(t,e[o],n,r,i);else n=e3(n),t&&t[eM]?e6(t,e,n,g(r)?!!r.capture:!!r,i):eW(t,e,n,!1,r,i)}function eW(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a=g(i)?!!i.capture:!!i,u=e1(t);if(u||(t[eK]=u=new ej(t)),!(n=u.add(e,n,r,a,o)).proxy){if(r=s=eR?function(t){return e0.call(s.src,s.listener,t)}:function(t){if(!(t=e0.call(s.src,s.listener,t)))return t},n.proxy=r,r.src=t,r.listener=n,t.addEventListener)eO||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(eJ(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");eH++}}function eQ(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)eQ(t,e[o],n,r,i);else n=e3(n),t&&t[eM]?e5(t,e,n,g(r)?!!r.capture:!!r,i):eW(t,e,n,!0,r,i)}function eX(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)eX(t,e[o],n,r,i);else(r=g(r)?!!r.capture:!!r,n=e3(n),t&&t[eM])?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=eB(o=t.a[e],n,r,i))&&(eV(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=e1(t))&&(e=t.a[e.toString()],t=-1,e&&(t=eB(e,n,r,i)),(n=-1<t?e[t]:null)&&eY(n))}function eY(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[eM])eq(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(eJ(n),r):e.addListener&&e.removeListener&&e.removeListener(r),eH--,(n=e1(e))?(eq(n,t),0==n.b&&(n.src=null,e[eK]=null)):eV(t)}}}function eJ(t){return t in eG?eG[t]:eG[t]="on"+t}function e$(t,e,n,r){var i=!0;if((t=e1(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=eZ(o,r),i=i&&!1!==o)}return i}function eZ(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&eY(t),n.call(r,e)}function e0(t,e){if(t.wa)return!0;if(!eR){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new eP(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=e$(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=e$(r[i],t,!1,e),n=n&&o}return n}return eZ(t,new eP(e,this))}function e1(t){return(t=t[eK])instanceof ej?t:null}var e2="__closure_events_fn_"+(1e9*Math.random()>>>0);function e3(t){return v(t)?t:(t[e2]||(t[e2]=function(e){return t.handleEvent(e)}),t[e2])}function e4(){eS.call(this),this.v=new ej(this),this.bc=this,this.hb=null}function e6(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function e5(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function e8(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&eq(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function e9(t,e,n){if(v(t))n&&(t=I(t,n));else if(t&&"function"==typeof t.handleEvent)t=I(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function e7(t){var e=null;return new ei(function(n,r){-1==(e=e9(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw u.clearTimeout(e),t})}function nt(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function ne(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){if(t instanceof nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}}function nr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ni(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ni(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ni(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(e4,eS),e4.prototype[eM]=!0,e4.prototype.addEventListener=function(t,e,n,r){ez(this,t,e,n,r)},e4.prototype.removeEventListener=function(t,e,n,r){eX(this,t,e,n,r)},e4.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new ex(t,n);else if(t instanceof ex)t.target=t.target||n;else{var i=t;tg(t=new ex(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=e8(s,r,!0,t)&&i}if(i=e8(s=t.b=n,r,!0,t)&&i,i=e8(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=e8(s=t.b=e[o],r,!1,t)&&i;return i},e4.prototype.Da=function(){if(e4.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)eV(n[r]);delete e.a[t],e.b--}}this.hb=null},(r=nn.prototype).X=function(){nr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.Y=function(){return nr(this),this.a.concat()},r.clear=function(){this.b={},this.c=this.a.length=0},r.get=function(t,e){return ni(this.b,t)?this.b[t]:e},r.set=function(t,e){ni(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var no=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ns(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof ns?(this.i=void 0!==e?e:t.i,na(this,t.c),this.l=t.l,this.a=t.a,nu(this,t.g),this.f=t.f,nc(this,nN(t.b)),this.h=t.h):t&&(n=String(t).match(no))?(this.i=!!e,na(this,n[1]||"",!0),this.l=nd(n[2]||""),this.a=nd(n[3]||"",!0),nu(this,n[4]),this.f=nd(n[5]||"",!0),nc(this,n[6]||"",!0),this.h=nd(n[7]||"")):(this.i=!!e,this.b=new nI(null,this.i))}function na(t,e,n){t.c=n?nd(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function nu(t,e){if(e){if(isNaN(e=Number(e))||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function nc(t,e,n){var r,i;e instanceof nI?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(nT(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(nS(this,e),nk(this,n,t))},r)),r.f=i):(n||(e=nv(e,nw)),t.b=new nI(e,t.i))}function nh(t,e,n){t.b.set(e,n)}function nl(t,e){return t.b.get(e)}function nf(t){return t instanceof ns?new ns(t):new ns(t,void 0)}function np(t,e,n,r){var i=new ns(null,void 0);return t&&na(i,t),e&&(i.a=e),n&&nu(i,n),r&&(i.f=r),i}function nd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ng),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ng(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ns.prototype.toString=function(){var t=[],e=this.c;e&&t.push(nv(e,nm,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(nv(e,nm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(nv(n,"/"==n.charAt(0)?nb:ny,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",nv(n,n_)),t.join("")},ns.prototype.resolve=function(t){var e=new ns(this),n=!!t.c;n?na(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)nu(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0)){if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}}if(".."==(i=r)||"."==i)r="";else if(ta(i,"./")||ta(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?nc(e,nN(t.b)):n=!!t.h,n&&(e.h=t.h),e};var nm=/[#\/\?@]/g,ny=/[#\?:]/g,nb=/[#\?]/g,nw=/[#\?@]/g,n_=/#/g;function nI(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function nT(t){t.a||(t.a=new nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function nE(t){var e=ne(t);if(void 0===e)throw Error("Keys are undefined");var n=new nI(null,void 0);t=nt(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nk(n,i,o):n.add(i,o)}return n}function nS(t,e){nT(t),e=nC(t,e),ni(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ni((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&nr(t)))}function nA(t,e){return nT(t),e=nC(t,e),ni(t.a.b,e)}function nk(t,e,n){nS(t,e),0<n.length&&(t.c=null,t.a.set(nC(t,e),$(n)),t.b+=n.length)}function nN(t){var e=new nI;return e.c=t.c,t.a&&(e.a=new nn(t.a),e.b=t.b),e}function nC(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nR(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";r.push("]");return}if(n instanceof String||n instanceof Number||n instanceof Boolean)n=n.valueOf();else{for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),nP(i,r),r.push(":"),t(e,s,r),o=",");r.push("}");return}}switch(typeof n){case"string":nP(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new nD,t,e),e.join("")}function nD(){}(r=nI.prototype).add=function(t,e){nT(this),this.c=null,t=nC(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.clear=function(){this.a=this.c=null,this.b=0},r.forEach=function(t,e){nT(this),this.a.forEach(function(n,r){K(n,function(n){t.call(e,n,r,this)},this)},this)},r.Y=function(){nT(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.X=function(t){nT(this);var e=[];if("string"==typeof t)nA(this,t)&&(e=J(e,this.a.get(nC(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},r.set=function(t,e){return nT(this),this.c=null,nA(this,t=nC(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var nO={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},nx=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function nP(t,e){e.push('"',t.replace(nx,function(t){var e=nO[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),nO[t]=e),e}),'"')}function nL(){var t=n0();return tH&&!!t3&&11==t3||/Edge\/\d+/.test(t)}function nM(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function nU(t,e){e=e||u.window;var n="about:blank";t&&(n=tR(tP(t)||tU)),e.location.href=n}function nF(t){return!!((t=(t||n0()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nV(t){t=t||u.window;try{t.close()}catch(t){}}function nj(t,e,n){var r,i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var o=(window.screen.availHeight-n)/2,s=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<o?o:0,left:0<s?s:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=n0().toLowerCase(),i&&(e.target=i,ta(n,"crios/")&&(e.target="_blank")),nJ(n0())==nX&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),i=window,e=n instanceof tC?n:tP(void 0!==n.href?n.href:String(n))||tU,n=t.target||n.target,o=[],t)switch(a){case"width":case"height":case"top":case"left":o.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:o.push(a+"="+(t[a]?1:0))}var a=o.join(",");if((tl("iPhone")&&!tl("iPod")&&!tl("iPad")||tl("iPad")||tl("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(tm(a=t9(document,"A"),"HTMLAnchorElement"),e=e instanceof tC?e:tL(e),a.href=tR(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=tj("",i,n,a),t=tR(e),a&&(tW&&ta(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+tB(t)+'">',t=new tF(t=(i=tI())?i.createHTML(t):t,null,tV),i=a.document)&&(i.write((r=t)instanceof tF&&r.constructor===tF?r.a:(M("expected object of type SafeHtml, got '"+r+"' of type "+p(r)),"type_error:SafeHtml")),i.close())):(a=tj(e,i,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var nq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nB=/^[^@]+@[^@]+$/;function nK(){var t=null;return new ei(function(e){"complete"==u.document.readyState?e():(t=function(){e()},eQ(window,"load",t))}).o(function(e){throw eX(window,"load",t),e})}function nG(t){return t=t||n0(),!("file:"!==n6()&&"ionic:"!==n6()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function nH(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function nz(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function nW(){return z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":z.INTERNAL.hasOwnProperty("node")?"Node":nz()?"Worker":"Browser"}function nQ(){var t=nW();return"ReactNative"===t||"Node"===t}var nX="Firefox",nY="Chrome";function nJ(t){var e=t.toLowerCase();return ta(e,"opera/")||ta(e,"opr/")||ta(e,"opios/")?"Opera":ta(e,"iemobile")?"IEMobile":ta(e,"msie")||ta(e,"trident/")?"IE":ta(e,"edge/")?"Edge":ta(e,"firefox/")?nX:ta(e,"silk/")?"Silk":ta(e,"blackberry")?"Blackberry":ta(e,"webos")?"Webos":!ta(e,"safari/")||ta(e,"chrome/")||ta(e,"crios/")||ta(e,"android")?!ta(e,"chrome/")&&!ta(e,"crios/")||ta(e,"edge/")?ta(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":nY:"Safari"}var n$={md:"FirebaseCore-web",od:"FirebaseUI-web"};function nZ(t,e){e=e||[];var n,r=[],i={};for(n in n$)i[n$[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=nW())?r=nJ(i=n0()):"Worker"===r&&(r=nJ(i=n0())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function n0(){return u.navigator&&u.navigator.userAgent||""}function n1(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function n2(){try{var t=u.localStorage,e=rt();if(t)return t.setItem(e,"1"),t.removeItem(e),!nL()||!!u.indexedDB}catch(t){return nz()&&!!u.indexedDB}return!1}function n3(){return(n4()||"chrome-extension:"===n6()||nG())&&!nQ()&&n2()&&!nz()}function n4(){return"http:"===n6()||"https:"===n6()}function n6(){return u.location&&u.location.protocol||null}function n5(t){return!nF(t=t||n0())&&nJ(t)!=nX}function n8(t){return void 0===t?null:nR(t)}function n9(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function n7(t){if(null!==t)return JSON.parse(t)}function rt(t){return t||Math.floor(1e9*Math.random()).toString()}function re(t){return!("Safari"==nJ(t=t||n0())||t.toLowerCase().match(/iphone|ipad|ipod/))}function rn(){var t=u.___jsl;if(t&&t.H){for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}}function rr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=n0(),e=nW(),this.b=nF(t)||"ReactNative"===e}function ri(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function ro(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function rs(){return!(!n1("fireauth.oauthhelper",u)&&!n1("fireauth.iframe",u))}rr.prototype.get=function(){var t=u.navigator;return(t&&"boolean"==typeof t.onLine&&(n4()||"chrome-extension:"===n6()||void 0!==t.connection)?t.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var ra={};function ru(t){ra[t]||(ra[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var rc={};Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(rc,"abcd",{configurable:!0,enumerable:!0,value:2}),o$=2==rc.abcd}catch(t){o$=!1}function rh(t,e,n){o$?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function rl(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&rh(t,n,e[n])}function rf(t){var e={};return rl(e,t),e}function rp(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)rh(e,n,rp(t[n]));return e}function rd(t){var e=t&&(t[rb]?"phone":null);if(e&&t&&t[ry]){rh(this,"uid",t[ry]),rh(this,"displayName",t[rg]||null);var n=null;t[rm]&&(n=new Date(t[rm]).toUTCString()),rh(this,"enrollmentTime",n),rh(this,"factorId",e)}else throw new k("internal-error","Internal assert: invalid MultiFactorInfo object")}function rv(t){try{var e=new rw(t)}catch(t){e=null}return e}rd.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var rg="displayName",rm="enrolledAt",ry="mfaEnrollmentId",rb="phoneInfo";function rw(t){rd.call(this,t),rh(this,"phoneNumber",t[rb])}function r_(t){var e={},n=t[rS],r=t[rk],i=t[rN];if(t=rv(t[rA]),!i||i!=rT&&i!=rE&&!n||i==rE&&!r||i==rI&&!t)throw Error("Invalid checkActionCode response!");i==rE?(e[rR]=n||null,e[rO]=n||null,e[rC]=r):(e[rR]=r||null,e[rO]=r||null,e[rC]=n||null),e[rD]=t||null,rh(this,rP,i),rh(this,rx,rp(e))}S(rw,rd),rw.prototype.w=function(){var t=rw.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var rI="REVERT_SECOND_FACTOR_ADDITION",rT="EMAIL_SIGNIN",rE="VERIFY_AND_CHANGE_EMAIL",rS="email",rA="mfaInfo",rk="newEmail",rN="requestType",rC="email",rR="fromEmail",rD="multiFactorInfo",rO="previousEmail",rx="data",rP="operation";function rL(t){var e=nl(t=nf(t),rM)||null,n=nl(t,rU)||null,r=nl(t,rj)||null;if(r=r&&rB[r]||null,!e||!n||!r)throw new k("argument-error",rM+", "+rU+"and "+rj+" are required in a valid action code URL.");rl(this,{apiKey:e,operation:r,code:n,continueUrl:nl(t,rF)||null,languageCode:nl(t,rV)||null,tenantId:nl(t,rq)||null})}var rM="apiKey",rU="oobCode",rF="continueUrl",rV="languageCode",rj="mode",rq="tenantId",rB={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:rI,signIn:rT,verifyAndChangeEmail:rE,verifyEmail:"VERIFY_EMAIL"};function rK(t){try{return new rL(t)}catch(t){return null}}function rG(t){var e=t[rX];if(void 0===e)throw new k("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[rH];if(n&&"object"==typeof n){e=n[r$];var r=n[rY];if(n=n[rJ],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",rY+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",rJ+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new k("argument-error",r$+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",rH+" property must be a non null object when specified.");if(this.f=null,(e=t[rQ])&&"object"==typeof e){if("string"==typeof(e=e[rZ])&&e.length)this.f=e;else if(void 0!==e)throw new k("argument-error",rZ+" property must be a non empty string when specified.")}else if(void 0!==e)throw new k("argument-error",rQ+" property must be a non null object when specified.");if(void 0!==(e=t[rW])&&"boolean"!=typeof e)throw new k("argument-error",rW+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[rz])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new k("argument-error",rz+" property must be a non empty string when specified.");this.i=t||null}var rH="android",rz="dynamicLinkDomain",rW="handleCodeInApp",rQ="iOS",rX="url",rY="installApp",rJ="minimumVersion",r$="packageName",rZ="bundleId";function r0(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var r1=null;function r2(t){var e=r4(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function r3(t){try{return new r2(t)}catch(t){return null}}function r4(t){if(!t||3!=(t=t.split(".")).length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r,i,o=(r=t,i=[],function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=r1[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}(function(){if(!r1){r1={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===r1[o]&&(r1[o]=i)}}})();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(r,function(t){i.push(t)}),i);for(t=[],n=e=0;e<o.length;){var s=o[e++];if(128>s)t[n++]=String.fromCharCode(s);else if(191<s&&224>s){var a=o[e++];t[n++]=String.fromCharCode((31&s)<<6|63&a)}else if(239<s&&365>s){a=o[e++];var u=o[e++],c=o[e++],h=((7&s)<<18|(63&a)<<12|(63&u)<<6|63&c)-65536;t[n++]=String.fromCharCode(55296+(h>>10)),t[n++]=String.fromCharCode(56320+(1023&h))}else a=o[e++],u=o[e++],t[n++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&u)}return JSON.parse(t.join(""))}catch(t){}return null}r2.prototype.T=function(){return this.f},r2.prototype.l=function(){return this.c},r2.prototype.toString=function(){return this.h};var r6="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),r5=["client_id","response_type","scope","redirect_uri","state"],r8={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:r5},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:r5},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:r5},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:r6},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function r9(t){for(var e in r8)if(r8[e].fa==t)return r8[e];return null}function r7(t){var e={};e["facebook.com"]=io,e["google.com"]=ia,e["github.com"]=is,e["twitter.com"]=iu;var n=t&&t[ie];try{if(n)return e[n]?new e[n](t):new ii(t);if(void 0!==t[it])return new ir(t)}catch(t){}return null}var it="idToken",ie="providerId";function ir(t){var e=t[ie];if(!e&&t[it]){var n=r3(t[it]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");("anonymous"==e||"custom"==e)&&(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),rh(this,"providerId",e),rh(this,"isNewUser",n)}function ii(t){ir.call(this,t),rh(this,"profile",rp((t=n7(t.rawUserInfo||"{}"))||{}))}function io(t){if(ii.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function is(t){if(ii.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");rh(this,"username",this.profile&&this.profile.login||null)}function ia(t){if(ii.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function iu(t){if(ii.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");rh(this,"username",t.screenName||null)}function ic(t){var e=nf(t),n=nl(e,"link"),r=nl(nf(n),"link");return e=nl(e,"deep_link_id"),nl(nf(e),"link")||e||r||n||t}function ih(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?il:ip}S(ii,ir),S(io,ii),S(is,ii),S(ia,ii),S(iu,ii);var il="enroll",ip="signin";function id(){}function iv(t,e){return t.then(function(t){if(t[o1]){var n=r3(t[o1]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new k("user-mismatch"):t})}function ig(t,e){if(e)this.a=e;else throw new k("internal-error","failed to construct a credential");rh(this,"providerId",t),rh(this,"signInMethod",t)}function im(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function iy(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ig(t.providerId,t.pendingToken)}catch(t){}return null}function ib(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&rh(this,"idToken",e.idToken),e.accessToken&&rh(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&rh(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else if(e.oauthToken&&e.oauthTokenSecret)rh(this,"accessToken",e.oauthToken),rh(this,"secret",e.oauthTokenSecret);else throw new k("internal-error","failed to construct a credential");rh(this,"providerId",t),rh(this,"signInMethod",n)}function iw(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:nE(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function i_(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ib(t.providerId,e,t.signInMethod)}catch(t){}}return null}function iI(t,e){this.Qc=e||[],rl(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(r9(t)||{}).Ja||null,this.pb=null}function iT(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');iI.call(this,t,[])}function iE(t){iI.call(this,t,r5),this.a=[]}function iS(){iE.call(this,"facebook.com")}function iA(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new iS).credential({accessToken:e})}function ik(){iE.call(this,"github.com")}function iN(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new ik).credential({accessToken:e})}function iC(){iE.call(this,"google.com"),this.Ca("profile")}function iR(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new iC).credential({idToken:n,accessToken:e})}function iD(){iI.call(this,"twitter.com",r6)}function iO(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ib("twitter.com",n,"twitter.com")}function ix(t,e,n){this.a=t,this.f=e,rh(this,"providerId","password"),rh(this,"signInMethod",n===iL.EMAIL_LINK_SIGN_IN_METHOD?iL.EMAIL_LINK_SIGN_IN_METHOD:iL.EMAIL_PASSWORD_SIGN_IN_METHOD)}function iP(t){return t&&t.email&&t.password?new ix(t.email,t.password,t.signInMethod):null}function iL(){rl(this,{providerId:"password",isOAuthProvider:!1})}function iM(t,e){if(!(e=iU(e)))throw new k("argument-error","Invalid email link!");return new ix(t,e.code,iL.EMAIL_LINK_SIGN_IN_METHOD)}function iU(t){return(t=rK(t=ic(t)))&&t.operation===rT?t:null}function iF(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new k("internal-error");this.a=t,rh(this,"providerId","phone"),this.fa="phone",rh(this,"signInMethod","phone")}function iV(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new iF(e)}return null}function ij(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function iq(t){try{this.a=t||z.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}rl(this,{providerId:"phone",isOAuthProvider:!1})}function iB(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new iF({fb:t,eb:e})}function iK(t){if(t.temporaryProof&&t.phoneNumber)return new iF({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return iR(o,n);case"facebook.com":return iA(n);case"github.com":return iN(n);case"twitter.com":return iO(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ig(e,s):new ib(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new iE(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function iG(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function iH(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,this.g||this.a){if(this.g&&this.a||this.g&&!this.f)throw new k("invalid-auth-event")}else throw new k("invalid-auth-event")}function iz(t){return(t=t||{}).type?new iH(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function iW(){this.b=null,this.a=[]}ih.prototype.Ha=function(){return this.a?el(this.a):el(this.b)},ih.prototype.w=function(){return this.type==il?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},id.prototype.ka=function(){},id.prototype.b=function(){},id.prototype.c=function(){},id.prototype.w=function(){},ig.prototype.ka=function(t){return sp(t,im(this))},ig.prototype.b=function(t,e){var n=im(this);return n.idToken=e,sd(t,n)},ig.prototype.c=function(t,e){return iv(sv(t,im(this)),e)},ig.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ib.prototype.ka=function(t){return sp(t,iw(this))},ib.prototype.b=function(t,e){var n=iw(this);return n.idToken=e,sd(t,n)},ib.prototype.c=function(t,e){return iv(sv(t,iw(this)),e)},ib.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},iI.prototype.Ka=function(t){return this.Jb=td(t),this},S(iT,iI),S(iE,iI),iE.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},iE.prototype.Rb=function(){return $(this.a)},iE.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new ib(this.providerId,n,this.providerId)},S(iS,iE),rh(iS,"PROVIDER_ID","facebook.com"),rh(iS,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(ik,iE),rh(ik,"PROVIDER_ID","github.com"),rh(ik,"GITHUB_SIGN_IN_METHOD","github.com"),S(iC,iE),rh(iC,"PROVIDER_ID","google.com"),rh(iC,"GOOGLE_SIGN_IN_METHOD","google.com"),S(iD,iI),rh(iD,"PROVIDER_ID","twitter.com"),rh(iD,"TWITTER_SIGN_IN_METHOD","twitter.com"),ix.prototype.ka=function(t){return this.signInMethod==iL.EMAIL_LINK_SIGN_IN_METHOD?sY(t,sT,{email:this.a,oobCode:this.f}):sY(t,sH,{email:this.a,password:this.f})},ix.prototype.b=function(t,e){return this.signInMethod==iL.EMAIL_LINK_SIGN_IN_METHOD?sY(t,sE,{idToken:e,email:this.a,oobCode:this.f}):sY(t,sU,{idToken:e,email:this.a,password:this.f})},ix.prototype.c=function(t,e){return iv(this.ka(t),e)},ix.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},rl(iL,{PROVIDER_ID:"password"}),rl(iL,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),rl(iL,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),iF.prototype.ka=function(t){return t.gb(ij(this))},iF.prototype.b=function(t,e){var n=ij(this);return n.idToken=e,sY(t,sW,n)},iF.prototype.c=function(t,e){var n=ij(this);return n.operation="REAUTH",iv(t=sY(t,sQ,n),e)},iF.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},iq.prototype.gb=function(t,e){var n=this.a.a;return el(e.verify()).then(function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==il?i.Ha().then(function(t){return sY(n,sV,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):i&&i.type==ip?i.Ha().then(function(e){return sY(n,sj,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}}).then(function(t){return t.phoneResponseInfo.sessionInfo})}):sY(n,sL,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t})}throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},rl(iq,{PROVIDER_ID:"phone"}),rl(iq,{PHONE_SIGN_IN_METHOD:"phone"}),iH.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},iH.prototype.T=function(){return this.h},iH.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var iQ=null;function iX(t){var e="unauthorized-domain",n=void 0,r=nf(t);t=r.a,"chrome-extension"==(r=r.c)?n=tq("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=tq("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function iY(t,e,n){k.call(this,t,n),(t=e||{}).Kb&&rh(this,"email",t.Kb),t.ea&&rh(this,"phoneNumber",t.ea),t.credential&&rh(this,"credential",t.credential),t.$b&&rh(this,"tenantId",t.$b)}function iJ(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:iK(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new iY(e,n,t.message)}return null}function i$(){}function iZ(t){return t.c||(t.c=t.b())}function i0(){}function i1(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function i2(){}function i3(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function i4(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function i6(t,e,n){this.reset(t,e,n,void 0,void 0)}S(iX,k),S(iY,k),iY.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&tg(t,e),t},iY.prototype.toJSON=function(){return this.w()},i$.prototype.c=null,S(i0,i$),i0.prototype.a=function(){var t=i1(this);return t?new ActiveXObject(t):new XMLHttpRequest},i0.prototype.b=function(){var t={};return i1(this)&&(t[0]=!0,t[1]=!0),t},oZ=new i0,S(i2,i$),i2.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new i3;throw Error("Unsupported browser")},i2.prototype.b=function(){return{}},(r=i3.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},r.send=function(t){if(t){if("string"==typeof t)this.a.send(t);else throw Error("Only string data is supported")}else this.a.send()},r.abort=function(){this.a.abort()},r.setRequestHeader=function(){},r.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},r.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,i4(this,4)},r.Tb=function(){this.status=500,this.response=this.responseText="",i4(this,4)},r.vc=function(){this.Tb()},r.rc=function(){this.status=200,i4(this,1)},r.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},i6.prototype.a=null;var i5=0;function i8(t){this.f=t,this.b=this.c=this.a=null}function i9(t,e){this.name=t,this.value=e}i6.prototype.reset=function(t,e,n,r,i){"number"==typeof i||i5++,r||E(),delete this.a},i9.prototype.toString=function(){return this.name};var i7=new i9("SEVERE",1e3),ot=new i9("WARNING",900),oe=new i9("CONFIG",700),on=new i9("FINE",500);i8.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new i6(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var or={},oi=null;function oo(t){if(oi||(oi=new i8(""),or[""]=oi,oi.c=oe),!(e=or[t])){e=new i8(t);var e,n=t.lastIndexOf("."),r=t.substr(n+1);(n=oo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,or[t]=e}return e}function os(t,e){t&&t.log(on,e,void 0)}function oa(t){this.f=t}function ou(t){e4.call(this),this.u=t,this.h=void 0,this.readyState=oc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=oo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(oa,i$),oa.prototype.a=function(){return new ou(this.f)},oa.prototype.b=(oG={},function(){return oG}),S(ou,e4);var oc=0;function oh(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ol(t){t.readyState=4,t.g=null,t.c=null,t.m=null,of(t)}function of(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function op(t){e4.call(this),this.headers=new nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=od,this.u=this.S=!1}(r=ou.prototype).open=function(t,e){if(this.readyState!=oc)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,of(this)},r.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},r.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ol(this)),this.readyState=oc},r.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,of(this)),this.a&&(this.readyState=3,of(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,oh(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},r.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ol(this):of(this),3==this.readyState&&oh(this)}},r.tc=function(t){this.a&&(this.response=this.responseText=t,ol(this))},r.sc=function(t){this.a&&(this.response=t,ol(this))},r.Va=function(t){var e=this.i;e&&e.log(ot,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ol(this)},r.setRequestHeader=function(t,e){this.l.append(t,e)},r.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ot,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},r.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ot,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(op,e4);var od="";op.prototype.b=oo("goog.net.XhrIo");var ov=/^https?$/i,og=["POST","PUT"];function om(t){return"content-type"==t.toLowerCase()}function oy(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ob(t),o_(t)}function ob(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ow(t){if(t.c&&void 0!==a){if(t.C[1]&&4==oT(t)&&2==oE(t))os(t.b,oS(t,"Local request error detected and ignored"));else if(t.i&&4==oT(t))e9(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==oT(t)){os(t.b,oS(t,"Request complete")),t.c=!1;try{var e,n,r=oE(t);switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(e=i)){if(n=0===r){var o=String(t.l).match(no)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}n=!ov.test(o?o.toLowerCase():"")}e=n}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<oT(t)?t.a.statusText:""}catch(e){os(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+oE(t)+"]",ob(t)}}finally{o_(t)}}}}function o_(t,e){if(t.a){oI(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(i7,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function oI(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function oT(t){return t.a?t.a.readyState:0}function oE(t){try{return 2<oT(t)?t.a.status:-1}catch(t){return -1}}function oS(t,e){return e+" ["+t.P+" "+t.l+" "+oE(t)+"]"}function oA(t){this.g=[],this.u=oU,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ok(t,e,n){t.a=!0,t.c=n,t.f=!e,oD(t)}function oN(t){if(t.a){if(!t.v)throw new oO(t);t.v=!1}}function oC(t,e,n,r){t.g.push([e,n,r]),t.a&&oD(t)}function oR(t){return W(t.g,function(t){return v(t[1])})}function oD(t){if(t.h&&t.a&&oR(t)){var e=t.h,n=oL[e];n&&(u.clearTimeout(n.a),delete oL[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(x(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,oR(t)||(n=!0)}}t.c=e,r&&(a=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof oA?(oC(e,a,r),e.C=!0):e.then(a,r)),n&&(oL[(e=new oP(e)).a]=e,t.h=e.a)}function oO(){P.call(this)}function ox(){P.call(this)}function oP(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(r=op.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",os(this.b,oS(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(){this.a&&this.c&&(os(this.b,oS(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),o_(this))},r.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),o_(this,!0)),op.bb.Da.call(this)},r.Wb=function(){this.ya||(this.N||this.i||this.f?ow(this):this.Jc())},r.Jc=function(){ow(this)},r.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case od:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(i7,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return os(this.b,"Can not get response: "+t.message),null}},oA.prototype.cancel=function(t){if(this.a)this.c instanceof oA&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ox(this),oN(this),ok(this,!1,t))}},oA.prototype.m=function(t,e){this.i=!1,ok(this,t,e)},oA.prototype.then=function(t,e,n){var r,i,o=new ei(function(t,e){r=t,i=e});return oC(this,r,function(t){t instanceof ox?o.cancel():i(t)}),o.then(t,e,n)},oA.prototype.$goog_Thenable=!0,S(oO,P),oO.prototype.message="Deferred has already fired",oO.prototype.name="AlreadyCalledError",S(ox,P),ox.prototype.message="Deferred was canceled",ox.prototype.name="CanceledError",oP.prototype.c=function(){throw delete oL[this.a],this.b};var oL={};function oM(t){var e,n,r={},i=r.document||document,o=tE(t).toString(),s=t9(document,"SCRIPT"),a={Xb:s,Ma:void 0},c=new oA(a),f=null,p=null!=r.timeout?r.timeout:5e3;return 0<p&&(f=window.setTimeout(function(){oF(s,!0);var t=new oq(oj,"Timeout reached for loading script "+o);oN(c),ok(c,!1,t)},p),a.Ma=f),s.onload=s.onreadystatechange=function(){s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(oF(s,r.xd||!1,f),oN(c),ok(c,!0,null))},s.onerror=function(){oF(s,!0,f);var t=new oq(oV,"Error while loading script "+o);oN(c),ok(c,!1,t)},tg(a=r.attributes||{},{type:"text/javascript",charset:"UTF-8"}),t5(s,a),n=t,tm(s,"HTMLScriptElement"),s.src=tE(n),(n=s.ownerDocument&&s.ownerDocument.defaultView)&&n!=u?n=l(n.document):(null===h&&(h=l(u.document)),n=h),n&&s.setAttribute("nonce",n),((e=(i||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(s),c}function oU(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&oF(t,!0,this.Ma)}}function oF(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var oV=0,oj=1;function oq(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function oB(t){this.f=t}function oK(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||o2,this.g=td(t.secureTokenHeaders||o3),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||o4,this.a=td(t.firebaseHeaders||o6),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==nW(),!(n=u.XMLHttpRequest||n&&z.INTERNAL.node&&z.INTERNAL.node.XMLHttpRequest)&&!nz())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,nz()?this.f=new oa(self):nQ()?this.f=new oB(n):this.f=new i2,this.b=null}S(oq,P),S(oB,i$),oB.prototype.a=function(){return new this.f},oB.prototype.b=function(){return{}};var oG,oH,oz,oW,oQ,oX,oY,oJ,o$,oZ,o0,o1="idToken",o2=new rr(3e4,6e4),o3={"Content-Type":"application/x-www-form-urlencoded"},o4=new rr(3e4,6e4),o6={"Content-Type":"application/json"};function o5(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function o8(t,e){e&&(t.l=o9("https://securetoken.googleapis.com/v1/token",e),t.h=o9("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=o9("https://identitytoolkit.googleapis.com/v2/",e))}function o9(t,e){return t=nf(t),e=nf(e.url),t.f=t.a+t.f,na(t,e.c),t.a=e.a,nu(t,e.g),t.toString()}function o7(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function st(t,e,n,r,i,o,s){var a;(!(a=nJ(a=n0())!=nY?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)||!(30>a))&&(!tH||!t3||9<t3)||nz()?t=I(t.u,t):(o0||(o0=new ei(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(u[sn]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},oC(oM(tS(se,{onload:sn})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))})),t=I(t.s,t)),t(e,n,r,i,o,s)}oK.prototype.T=function(){return this.b},oK.prototype.u=function(t,e,n,r,i,o){if(nz()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new op(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}e6(s,"complete",function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return os(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),e5(s,"ready",function(){a&&clearTimeout(a),eN(this)}),e5(s,"timeout",function(){a&&clearTimeout(a),eN(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():oZ.a(),t.C=t.D?iZ(t.D):iZ(oZ),t.a.onreadystatechange=I(t.Wb,t);try{os(t.b,oS(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){os(t.b,oS(t,"Error opening Xhr: "+e.message)),oy(t,e);return}e=r||"";var o,s=new nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)K(t,e,void 0);else for(var n=ne(t),r=nt(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=om,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=u.FormData&&e instanceof u.FormData,!Q(og,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{oI(t),0<t.g&&(t.u=(o=t.a,tH&&t2(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),os(t.b,oS(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=e9(t.Ma,t.g,t)),os(t.b,oS(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){os(t.b,oS(t,"Send error: "+e.message)),oy(t,e)}}(s,t,n,r,i)};var se=new ty(t_,"https://apis.google.com/js/client.js?onload=%{onload}"),sn="__fcb"+Math.floor(1e6*Math.random()).toString();function sr(t,e,n,r,i,o,s){var a=nf(e+n);nh(a,"key",t.c),s&&nh(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nh(a,c,i[c]);return new ei(function(e,n){st(t,a.toString(),function(t){t?t.error?n(s$(t,o||{})):e(t):n(new k("network-request-failed"))},r,u?void 0:nR(n9(i)),t.a,t.v.get())})}function si(t){if("string"!=typeof(t=t.email)||!nB.test(t))throw new k("invalid-email")}function so(t){"email"in t&&si(t)}function ss(t){if(!t[o1]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,td(t));throw new k("internal-error")}}function sa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}oK.prototype.s=function(t,e,n,r,i){var o=this;o0.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},oK.prototype.Ab=function(){return sY(this,sF,{})},oK.prototype.Cb=function(t,e){return sY(this,sM,{idToken:t,email:e})},oK.prototype.Db=function(t,e){return sY(this,sU,{idToken:t,password:e})};var su={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sc(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function sh(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function sl(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&nA(t=new nI(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function sf(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=iJ(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=iJ(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=iJ(t)):t.errorMessage&&(e=sJ(t.errorMessage)),e)throw e;ss(t)}function sp(t,e){return e.returnIdpCredential=!0,sY(t,sq,e)}function sd(t,e){return e.returnIdpCredential=!0,sY(t,sK,e)}function sv(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,sY(t,sB,e)}function sg(t){if(!t.oobCode)throw new k("invalid-action-code")}(r=oK.prototype).Eb=function(t,e){var n={idToken:t},r=[];return tf(su,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),sY(this,sM,n)},r.wb=function(t,e){return tg(t={requestType:"PASSWORD_RESET",email:t},e),sY(this,sD,t)},r.xb=function(t,e){return tg(t={requestType:"EMAIL_SIGNIN",email:t},e),sY(this,sN,t)},r.vb=function(t,e){return tg(t={requestType:"VERIFY_EMAIL",idToken:t},e),sY(this,sC,t)},r.Fb=function(t,e,n){return tg(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),sY(this,sR,t)},r.gb=function(t){return sY(this,sz,t)},r.ob=function(t,e){return sY(this,sP,{oobCode:t,newPassword:e})},r.Sa=function(t){return sY(this,sy,{oobCode:t})},r.kb=function(t){return sY(this,sm,{oobCode:t})};var sm={endpoint:"setAccountInfo",A:sg,Z:"email",B:!0},sy={endpoint:"resetPassword",A:sg,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},sb={endpoint:"signupNewUser",A:function(t){if(si(t),!t.password)throw new k("weak-password")},G:ss,V:!0,B:!0},sw={endpoint:"createAuthUri",B:!0},s_={endpoint:"deleteAccount",O:["idToken"]},sI={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},sT={endpoint:"emailLinkSignin",O:["email","oobCode"],A:si,G:ss,V:!0,B:!0},sE={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:si,G:ss,V:!0},sS={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:sc,G:ss,B:!0,Na:!0},sA={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:sc,G:ss,B:!0,Na:!0},sk={endpoint:"getAccountInfo"},sN={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");si(t)},Z:"email",B:!0},sC={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},sR={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},sD={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");si(t)},Z:"email",B:!0},sO={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},sx={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},sP={endpoint:"resetPassword",A:sg,Z:"email",B:!0},sL={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},sM={endpoint:"setAccountInfo",O:["idToken"],A:so,V:!0},sU={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(so(t),!t.password)throw new k("weak-password")},G:ss,V:!0},sF={endpoint:"signupNewUser",G:ss,V:!0,B:!0},sV={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},sj={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},sq={endpoint:"verifyAssertion",A:sh,Za:sl,G:sf,V:!0,B:!0},sB={endpoint:"verifyAssertion",A:sh,Za:sl,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw sJ(t.errorMessage);ss(t)},V:!0,B:!0},sK={endpoint:"verifyAssertion",A:function(t){if(sh(t),!t.idToken)throw new k("internal-error")},Za:sl,G:sf,V:!0},sG={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ss,V:!0,B:!0},sH={endpoint:"verifyPassword",A:function(t){if(si(t),!t.password)throw new k("wrong-password")},G:ss,V:!0,B:!0},sz={endpoint:"verifyPhoneNumber",A:sa,G:ss,B:!0},sW={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");sa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",iJ(t);ss(t)}},sQ={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:sa,G:ss,B:!0},sX={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[o1]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function sY(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ef(new k("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return el(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),i?sr(t,t.i,e.endpoint,o,n,e.Ib,e.mb||!1):sr(t,t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]})}function sJ(t){return s$({error:{errors:[{message:t}],code:400,message:t}})}function s$(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",tg(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=n8(t)),new k("internal-error",e)}function sZ(t){var e;this.b=t,this.a=null,this.sb=(e=this,(s3||(s3=new ei(function(t,e){function n(){rn(),n1("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){rn(),e(Error("Network Error"))},timeout:s1.get()})}if(n1("gapi.iframes.Iframe"))t();else if(n1("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){n1("gapi.load")?n():e(Error("Network Error"))},el(oM(r=tS(s0,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw s3=null,t}))).then(function(){return new ei(function(t,n){n1("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},s2.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})}))}var s0=new ty(t_,"https://apis.google.com/js/api.js?onload=%{onload}"),s1=new rr(3e4,6e4),s2=new rr(5e3,15e3),s3=null;function s4(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?np((t=nf(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):np("https",this.l,null,"/__/auth/iframe"),this.a=t,nh(this.a,"apiKey",this.h),nh(this.a,"appName",this.i),this.b=null,this.c=[]}function s6(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function s5(t){try{return z.app(t).auth().Ga()}catch(t){return[]}}function s8(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function s9(t){var e=nM();return sY(t,sO,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var n=nf(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n;if(s=0==o.indexOf("chrome-extension://")?nf(o).a==s&&"chrome-extension"==r:("http"==r||"https"==r)&&(nq.test(o)?s==o:RegExp("^(.+\\."+(o=o.split(".").join("\\."))+"|"+o+")$","i").test(s))){t=!0;break t}}t=!1}if(!t)throw new iX(nM())})}function s7(t){return t.m||(t.m=nK().then(function(){if(!t.u){var e=t.c,n=t.i,r=s5(t.b),i=new s4(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new sZ(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(n=0,e=iz(e.authEvent);n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",el(n)}return n.status="ERROR",el(n)})}(t)})),t.m}function at(t){return t.l||(t.C=t.c?nZ(t.c,s5(t.b)):null,t.l=new oK(t.g,O(t.i),t.C),t.f&&o8(t.l,t.f)),t.l}function ae(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new s6(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=td(u||null),t.f=c,t.zb(h).toString()}function an(t){if(this.a=t||z.INTERNAL.reactNative&&z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ar(t){this.b=t,this.a={},this.f=I(this.c,this)}s4.prototype.toString=function(){return this.f?nh(this.a,"v",this.f):nS(this.a.b,"v"),this.b?nh(this.a,"eid",this.b):nS(this.a.b,"eid"),this.c.length?nh(this.a,"fw",this.c.join(",")):nS(this.a.b,"fw"),this.a.toString()},s6.prototype.zb=function(t){return this.h=t,this},s6.prototype.toString=function(){if(this.v){var t=nf(this.v.url);t=np(t.c,t.a,t.g,"/emulator/auth/handler")}else t=np("https",this.u,null,"/__/auth/handler");if(nh(t,"apiKey",this.s),nh(t,"appName",this.c),nh(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=z.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,nh(t,"providerId",this.a.providerId),e=n9((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=td(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),tp(e)||nh(t,"customParameters",n8(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&nh(t,"scopes",n.join(",")),this.l?nh(t,"redirectUrl",this.l):nS(t.b,"redirectUrl"),this.g?nh(t,"eventId",this.g):nS(t.b,"eventId"),this.i?nh(t,"v",this.i):nS(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!nl(t,s)&&nh(t,s,this.b[s]);return this.h?nh(t,"tid",this.h):nS(t.b,"tid"),this.f?nh(t,"eid",this.f):nS(t.b,"eid"),(s=s5(this.c)).length&&nh(t,"fw",s.join(",")),t.toString()},(r=s8.prototype).Pb=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var n;(n={type:"webStorageSupport"},s7(o).then(function(){var t;return(t=o.v).sb.then(function(){return new ei(function(e){t.a.send(n.type,n,e,n1("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then(function(n){n||(t&&nV(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return new ei(function(e){return function n(){e7(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}).then(function(){if(!s)return e7(n).then(function(){e(r)})})},r.Yb=function(){var t=n0();return!n5(t)&&!re(t)},r.Ub=function(){return!1},r.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ef(new k("popup-blocked"));if(s&&!n5())return this.ma().o(function(e){nV(t),i(e)}),r(),el();this.a||(this.a=s9(at(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw nV(t),i(e),e});return r(),e}).then(function(){iG(n),s||nU(ae(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},r.Ob=function(t,e,n,r){this.a||(this.a=s9(at(this)));var i=this;return this.a.then(function(){iG(e),nU(ae(i.s,i.g,i.b,t,e,nM(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},r.ma=function(){var t=this;return s7(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new k("network-request-failed")})},r.ac=function(){return!0},r.Ea=function(t){this.h.push(t)},r.Ta=function(t){Y(this.h,function(e){return e==t})},(r=an.prototype).get=function(t){return el(this.a.getItem(t)).then(function(t){return t&&n7(t)})},r.set=function(t,e){return el(this.a.setItem(t,n8(e)))},r.U=function(t){return el(this.a.removeItem(t))},r.ca=function(){},r.ia=function(){};var ai=[];function ao(t,e,n){tp(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function as(t){this.a=t}function aa(t){this.c=t,this.b=!1,this.a=[]}function au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ef(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ei(function(n,r){l?(i=Math.floor(1e20*Math.random()).toString(),l.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))}).then(function(e){return ac(t,c),e}).o(function(e){throw ac(t,c),e})}function ac(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,function(t){return t==e})}}function ah(){if(!ap())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e=this;nz()&&self?(this.v=function(){var t=nz()?self:null;if(K(ai,function(n){n.b==t&&(e=n)}),!e){var e=new ar(t);ai.push(e)}return e}(),ao(this.v,"keyChanged",function(t,n){return ay(e).then(function(t){return 0<t.length&&K(e.a,function(e){e(t)}),{keyProcessed:Q(t,n.key)}})}),ao(this.v,"ping",function(){return el(["keyChanged"])})):((t=u.navigator)&&t.serviceWorker?el().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):el(null)).then(function(t){(e.h=t)&&(e.g=new aa(new as(t)),au(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&Q(t[0].value,"keyChanged")&&(e.s=!0)}).o(function(){}))})}function al(t){return t.i||(t.i=function t(e){return new ei(function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):new ei(function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(t){n(Error(t.target.error))}}).then(function(){return t(e)}).then(function(t){n(t)}).o(function(t){r(t)})}})}(t)),t.i}function af(t,e){var n=0;return new ei(function r(i,o){al(t).then(e).then(i).o(function(e){if(!(3<++n))return al(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function ap(){try{return!!u.indexedDB}catch(t){return!1}}function ad(t){return t.objectStore("firebaseLocalStorage")}function av(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ag(t){return new ei(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function am(t,e){var n;return t.g&&t.h&&((n=u.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?au(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):el()}function ay(t){return al(t).then(function(t){var e=ad(av(t,!1));return e.getAll?ag(e.getAll()):new ei(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r})}function ab(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function aw(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=el().then(function(){if(ap()){var t=rt(),r="__sak"+t;return aN||(aN=new ah),(n=aN).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){K(e.a,function(e){e(t)})}),t})}function a_(){this.a={},this.type="inMemory"}function aI(){if(!function(){var t="Node"==nW();if(!(t=aT()||t&&z.INTERNAL.node&&z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==nW())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=aT()||z.INTERNAL.node.localStorage,this.type="localStorage"}function aT(){try{var t=u.localStorage,e=rt();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function aE(){this.type="nullStorage"}function aS(){if(!function(){var t="Node"==nW();if(!(t=aA()||t&&z.INTERNAL.node&&z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==nW())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=aA()||z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function aA(){try{var t=u.sessionStorage,e=rt();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ak(){var t={};t.Browser=aR,t.Node=aD,t.ReactNative=aO,t.Worker=ax,this.a=t[nW()]}ar.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,function(e){i.push(el().then(function(){return e(t.origin,t.data.data)}))}),ed(i).then(function(r){var i=[];K(r,function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),K(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},as.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},aa.prototype.close=function(){for(;0<this.a.length;)ac(this,this.a[0]);this.b=!0},(r=ah.prototype).set=function(t,e){var n=this,r=!1;return af(this,function(e){return ag((e=ad(av(e,!0))).get(t))}).then(function(i){return af(n,function(o){if(o=ad(av(o,!0)),i)return i.value=e,ag(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,ag(o.add(s))})}).then(function(){return n.c[t]=e,am(n,t)}).oa(function(){r&&n.b--})},r.get=function(t){return af(this,function(e){return ag(ad(av(e,!1)).get(t))}).then(function(t){return t&&t.value})},r.U=function(t){var e=this,n=!1;return af(this,function(r){return n=!0,e.b++,ag(ad(av(r,!0)).delete(t))}).then(function(){return delete e.c[t],am(e,t)}).oa(function(){n&&e.b--})},r.ca=function(t){var e;0==this.a.length&&(e=this,ab(e),function t(){e.f=setTimeout(function(){e.l=ay(e).then(function(t){0<t.length&&K(e.a,function(e){e(t)})}).then(function(){t()}).o(function(e){"STOP_EVENT"!=e.message&&t()})},800)}()),this.a.push(t)},r.ia=function(t){Y(this.a,function(e){return e==t}),0==this.a.length&&ab(this)},(r=aw.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},r.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},r.U=function(t){return this.b.then(function(e){return e.U(t)})},r.ca=function(t){this.a.push(t)},r.ia=function(t){Y(this.a,function(e){return e==t})},(r=a_.prototype).get=function(t){return el(this.a[t])},r.set=function(t,e){return this.a[t]=e,el()},r.U=function(t){return delete this.a[t],el()},r.ca=function(){},r.ia=function(){},(r=aI.prototype).get=function(t){var e=this;return el().then(function(){return n7(e.a.getItem(t))})},r.set=function(t,e){var n=this;return el().then(function(){var r=n8(e);null===r?n.U(t):n.a.setItem(t,r)})},r.U=function(t){var e=this;return el().then(function(){e.a.removeItem(t)})},r.ca=function(t){u.window&&ez(u.window,"storage",t)},r.ia=function(t){u.window&&eX(u.window,"storage",t)},(r=aE.prototype).get=function(){return el(null)},r.set=function(){return el()},r.U=function(){return el()},r.ca=function(){},r.ia=function(){},(r=aS.prototype).get=function(t){var e=this;return el().then(function(){return n7(e.a.getItem(t))})},r.set=function(t,e){var n=this;return el().then(function(){var r=n8(e);null===r?n.U(t):n.a.setItem(t,r)})},r.U=function(t){var e=this;return el().then(function(){e.a.removeItem(t)})},r.ca=function(){},r.ia=function(){};var aN,aC,aR={F:aI,cb:aS},aD={F:aI,cb:aS},aO={F:an,cb:aE},ax={F:aI,cb:aE},aP={rd:"local",NONE:"none",td:"session"};function aL(){var t=!!(!re(n0())&&nH()),e=n5(),n=n2();this.m=t,this.h=e,this.l=n,this.a={},aC||(aC=new ak),t=aC;try{this.g=!nL()&&rs()||!u.indexedDB?new t.a.F:new aw(nz()?new a_:new t.a.F)}catch(t){this.g=new a_,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new a_}this.v=new a_,this.f=I(this.Zb,this),this.b={}}function aM(){return t||(t=new aL),t}function aU(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function aF(t,e){return"firebase:"+t.name+(e?":"+e:"")}function aV(t,e,n){return n=aF(e,n),"local"==e.F&&(t.b[n]=null),aU(t,e.F).U(n)}function aj(t){t.c&&(clearInterval(t.c),t.c=null)}function aq(t){this.a=t,this.b=aM()}(r=aL.prototype).get=function(t,e){return aU(this,t.F).get(aF(t,e))},r.set=function(t,e,n){var r=aF(t,n),i=this,o=aU(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},r.addListener=function(t,e,n){var r;t=aF(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),tp(this.a)&&(aU(this,"local").ca(this.f),this.h||(nL()||!rs())&&u.indexedDB||!this.l||(r=this,aj(r),r.c=setInterval(function(){for(var t in r.a){var e=u.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new eP({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Zb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},r.removeListener=function(t,e,n){t=aF(t,e),this.a[t]&&(Y(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),tp(this.a)&&(aU(this,"local").ia(this.f),aj(this))},r.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?aU(this,"local").ia(this.f):aj(this),this.m){if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return}var o=this;n=function(){(void 0!==t.a.a||o.b[e]!==u.localStorage.getItem(e))&&(o.b[e]=u.localStorage.getItem(e),o.nb(e))},tH&&t3&&10==t3&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,I(this.nb,this))},r.nb=function(t){this.a[t]&&K(this.a[t],function(t){t()})};var aB={name:"authEvent",F:"local"};function aK(){this.a=aM()}function aG(t,n){this.b=aH,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=n,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===e&&(e=u.Int32Array?new Int32Array(a$):a$),this.reset()}S(aG,function(){this.b=-1});for(var aH=64,az=aH-1,aW=[],aQ=0;aQ<az;aQ++)aW[aQ]=0;var aX=J(128,aW);function aY(t){for(var n=t.f,r=t.l,i=0,o=0;o<n.length;)r[i++]=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3],o=4*i;for(n=16;64>n;n++){o=0|r[n-15],i=0|r[n-2];var s=(0|r[n-16])+((o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3)|0,a=(0|r[n-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;r[n]=s+a|0}i=0|t.a[0],o=0|t.a[1];var u=0|t.a[2],c=0|t.a[3],h=0|t.a[4],l=0|t.a[5],f=0|t.a[6];for(n=0,s=0|t.a[7];64>n;n++){var p=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&u^o&u)|0;a=h&l^~h&f,a=(s=s+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))|0)+((a=a+(0|e[n])|0)+(0|r[n])|0)|0,s=f,f=l,l=h,h=c+a|0,c=u,u=o,o=i,i=a+p|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+o|0,t.a[2]=t.a[2]+u|0,t.a[3]=t.a[3]+c|0,t.a[4]=t.a[4]+h|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+s|0}function aJ(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(aY(t),i=0);else if(d(e))for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(aY(t),i=0)}else throw Error("message must be string or array");t.c=i,t.g+=n}aG.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):$(this.h)};var a$=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function aZ(){aG.call(this,8,a0)}S(aZ,aG);var a0=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function a1(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new aK,this.g=new aq(this.h),this.f=null,this.b=[],this.a=this.c=null}function a2(t){return new k("invalid-cordova-configuration",t)}function a3(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function a4(t){return t.f||(t.f=t.ma().then(function(){return new ei(function(e){t.Ea(function n(r){return e(r),t.Ta(n),!1}),function(t){function e(e){o=!0,s&&s.cancel(),a6(t).then(function(n){var r=i;if(n&&e&&e.url){var o=null;-1!=(r=ic(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=n7(nl(o=nf(r),"firebaseError")||null))?N(o):null)?new iH(n.c,n.b,null,null,o,null,n.T()):new iH(n.c,n.b,r,n.f,null,null,n.T())),r=o||i}a3(t,r)})}var n,r,i=new iH("unknown",null,null,null,new k("no-auth-event")),o=!1,s=e7(500).then(function(){return a6(t).then(function(){o||a3(t,i)})}),a=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(n1("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}},iQ||(iQ=new iW),n=e,(r=iQ).a.push(n),r.b||(r.b=function(t){for(var e=0;e<r.a.length;e++)r.a[e](t)},"function"==typeof(n=n1("universalLinks.subscribe",u))&&n(null,r.b))}(t)})})),t.f}function a6(t){var e,n=null;return(e=t.g).b.get(aB,e.a).then(function(t){return iz(t)}).then(function(e){return n=e,aV((e=t.g).b,aB,e.a)}).then(function(){return n})}function a5(t){this.a=t,this.b=aM()}(r=a1.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(nG(void 0)?nK().then(function(){return new ei(function(t,e){var n=u.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):ef(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof n1("universalLinks.subscribe",u))throw a2("cordova-universal-links-plugin-fix is not installed");if(void 0===n1("BuildInfo.packageName",u))throw a2("cordova-plugin-buildinfo is not installed");if("function"!=typeof n1("cordova.plugins.browsertab.openUrl",u))throw a2("cordova-plugin-browsertab is not installed");if("function"!=typeof n1("cordova.InAppBrowser.open",u))throw a2("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})},r.Pb=function(t,e){return e(new k("operation-not-supported-in-this-environment")),el()},r.Nb=function(){return ef(new k("operation-not-supported-in-this-environment"))},r.ac=function(){return!1},r.Yb=function(){return!0},r.Ub=function(){return!0},r.Ob=function(t,e,n,r){if(this.c)return ef(new k("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=el().then(function(){return iG(e),a4(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new iH(e,r,null,o,new k("no-auth-event"),null,i),a=n1("BuildInfo.packageName",u);if("string"!=typeof a)throw new k("invalid-cordova-configuration");var c=n1("BuildInfo.displayName",u),h={};if(n0().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!n0().toLowerCase().match(/android/))return ef(new k("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=function(t){var e=new aZ;aJ(e,t),t=[];var n=8*e.g;56>e.c?aJ(e,aX,56-e.c):aJ(e,aX,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(aY(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return H(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),h.sessionId=o;var l=ae(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(aB,s.w(),e)}).then(function(){var e=n1("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new k("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=n1("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=n1("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=n0(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ei(function(t,e){a=function(){var e=n1("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=e7(2e3).then(function(){e(new k("redirect-cancelled-by-user"))}))},h=function(){ri()&&c()},o.addEventListener("resume",c,!1),n0().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)}).o(function(t){return a6(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null})},r.Ea=function(t){this.b.push(t),a4(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&t(e=new iH("unknown",null,null,null,new k("no-auth-event")))})},r.Ta=function(t){Y(this.b,function(e){return e==t})};var a8={name:"pendingRedirect",F:"session"};function a9(t){return aV(t.b,a8,t.a)}function a7(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new ud,this.C=new ub,this.g=new a5(uf(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=ut(this.D,this.v,this.m,oH,this.J)}function ut(t,e,n,r,i){var o=z.SDK_VERSION||null;return nG()?new a1(t,e,n,o,r,i):new s8(t,e,n,o,r,i)}function ue(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function un(t){t.a.Yb()&&ue(t).o(function(e){var n=new iH("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));uu(e)&&t.s(n)}),t.a.Ub()||uv(t.b)}function ur(t,e){var n;Q(t.h,e)||t.h.push(e),t.f||(n=t.g).b.get(a8,n.a).then(function(t){return"pending"==t}).then(function(e){e?a9(t.g).then(function(){ue(t).o(function(e){var n=new iH("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));uu(e)&&t.s(n)})}):un(t)}).o(function(){un(t)})}function ui(t,e){Y(t.h,function(t){return t==e})}a7.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=ut(this.D,this.v,this.m,null,this.J),this.i={}},a7.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return uv(this.b),e};var uo=new rr(2e3,1e4),us=new rr(3e4,6e4);function ua(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function uu(t){return!!t&&"auth/cordova-not-ready"==t.code}function uc(t,e,n,r,i){var o,s;return(s=t.g).b.set(a8,"pending",s.a).then(function(){return t.a.Ob(e,n,r,i).o(function(e){if(uu(e))throw new k("operation-not-supported-in-this-environment");return o=e,a9(t.g).then(function(){throw o})}).then(function(){return t.a.ac()?new ei(function(){}):a9(t.g).then(function(){return t.ra()}).then(function(){}).o(function(){})})})}function uh(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},uo.get())}a7.prototype.ra=function(){return this.b.ra()};var ul={};function uf(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function up(t,e,n,r){var i=uf(e,n,r);return ul[i]||(ul[i]=new a7(t,e,n,r)),ul[i]}function ud(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function uv(t){t.g||(t.g=!0,uy(t,!1,null,null))}function ug(t){t.g&&!t.i&&uy(t,!1,null,null)}function um(t,e){if(t.b=function(){return el(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function uy(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ef(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):um(t,n):um(t,{user:null}),t.f=[],t.c=[]}function ub(){}function uw(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function u_(t,e){this.a=e,rh(this,"verificationId",t)}function uI(t,e,n,r){return new iq(t).gb(e,n).then(function(t){return new u_(t,r)})}function uT(t){var e=r4(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");rl(this,{token:t,expirationTime:ro(1e3*e.exp),authTime:ro(1e3*e.auth_time),issuedAtTime:ro(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function uE(t,e,n){var r=e&&e[uA];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=td(e),this.g=n,this.c=new ih(null,r),this.b=[];var i=this;K(e[uS]||[],function(t){(t=rv(t))&&i.b.push(t)}),rh(this,"auth",this.a),rh(this,"session",this.c),rh(this,"hints",this.b)}ud.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ud.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(uy(this,!0,null,t.a),el()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){uy(t,a,e,null)}).o(function(e){uy(t,a,null,e)})}(this,t,e):ef(new k("invalid-auth-event")):(uy(this,!1,null,null),el())}else ef(new k("invalid-auth-event"))},ud.prototype.ra=function(){var t=this;return new ei(function(e,n){var r;t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),r=new k("timeout"),t.a&&t.a.cancel(),t.a=e7(us.get()).then(function(){t.b||(t.g=!0,uy(t,!0,null,r))}))})},ub.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),el()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):ef(new k("invalid-auth-event"))}else ef(new k("invalid-auth-event"))},u_.prototype.confirm=function(t){return t=iB(this.verificationId,t),this.a(t)};var uS="mfaInfo",uA="mfaPendingCredential";function uk(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new uE(t,e,n),rh(this,"resolver",this.b)}function uN(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new uk(e,t.serverResponse,n,t.message)}catch(t){}return null}function uC(){}function uR(t){rh(this,"factorId",t.fa),this.a=t}function uD(t){if(uR.call(this,t),this.a.fa!=iq.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uO(t,e){for(var n in ex.call(this,t),e)this[n]=e[n]}function ux(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ez(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ry]=t.uid),t.displayName&&(r[rg]=t.displayName),t.enrollmentTime&&(r[rm]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[rb]=t.phoneNumber);try{e=new rw(r)}catch(t){}t=e}else t=null;t&&n.push(t)}),uP(this,n)}function uP(t,e){t.b=e,rh(t,"enrolledFactors",e)}function uL(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function uM(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function uU(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function uF(t,e){t.b=r3(e[o1]||""),t.a=e.refreshToken,uU(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function uV(t,e){this.a=t||null,this.b=e||null,rl(this,{lastSignInTime:ro(e||null),creationTime:ro(t||null)})}function uj(t,e,n,r,i,o){rl(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uq(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=z.SDK_VERSION?nZ(z.SDK_VERSION):null;this.a=new oK(this.l,O(oH),i),(this.u=t.emulatorConfig||null)&&o8(this.a,this.u),this.h=new uM(this.a),uY(this,e[o1]),uF(this.h,e),rh(this,"refreshToken",this.h.a),uZ(this,n||{}),e4.call(this),this.P=!1,this.s&&n3()&&(this.b=up(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=(r=this,new uL(function(){return r.I(!0)},function(t){return!!t&&"auth/network-request-failed"==t.code},function(){var t=r.h.c-Date.now()-3e5;return 0<t?t:0})),this.ba=I(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){uB(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){uH(o,t.f)},this.ja=null,this.S=new ux(this,n),rh(this,"multiFactor",this.S)}function uB(t,e){t.u=e,o8(t.a,e),t.b&&(e=t.b,t.b=up(t.s,t.l,t.m,t.u),t.P&&(ui(e,t),ur(t.b,t)))}function uK(t,e){t.qa&&eX(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&ez(e,"languageCodeChanged",t.Pa)}function uG(t,e){t.$&&eX(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&ez(e,"emulatorConfigChanged",t.Ba)}function uH(t,e){t.aa=e,o7(t.a,z.SDK_VERSION?nZ(z.SDK_VERSION,t.aa):null)}function uz(t,e){t.ja&&eX(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&ez(e,"frameworkChanged",t.Oa)}function uW(t){try{return z.app(t.m).auth()}catch(e){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function uQ(t){t.J||t.D.b||(t.D.start(),eX(t,"tokenChanged",t.ba),ez(t,"tokenChanged",t.ba))}function uX(t){eX(t,"tokenChanged",t.ba),t.D.stop()}function uY(t,e){t.Aa=e,rh(t,"_lat",e)}function uJ(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return ed(e).then(function(){return t})}function u$(t){t.b&&!t.P&&(t.P=!0,ur(t.b,t))}function uZ(t,e){rl(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uV(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function u0(){}function u1(t){return el().then(function(){if(t.J)throw new k("app-deleted")})}function u2(t){return H(t.providerData,function(t){return t.providerId})}function u3(t,e){e&&(u4(t,e.providerId),t.providerData.push(e))}function u4(t,e){Y(t.providerData,function(t){return t.providerId==e})}function u6(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&rh(t,e,n)}function u5(t,e){var n,r,i;t!=e&&(rl(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?rh(t,"metadata",new uV((n=e.metadata).a,n.b)):rh(t,"metadata",new uV),K(e.providerData,function(e){u3(t,e)}),r=t.h,i=e.h,r.b=i.b,r.a=i.a,r.c=i.c,rh(t,"refreshToken",t.h.a),uP(t.S,e.S.b))}function u8(t){return t.I().then(function(e){var n=t.isAnonymous;return sY(t.a,sk,{idToken:e}).then(I(t.Kc,t)).then(function(){return n||u6(t,"isAnonymous",!1),e})})}function u9(t,e){e[o1]&&t.Aa!=e[o1]&&(uF(t.h,e),t.dispatchEvent(new uO("tokenChanged")),uY(t,e[o1]),u6(t,"refreshToken",t.h.a))}function u7(t,e){return u8(t).then(function(){if(Q(u2(t),e))return uJ(t).then(function(){throw new k("provider-already-linked")})})}function ct(t,e,n){return rf({user:t,credential:iK(e),additionalUserInfo:e=r7(e),operationType:n})}function ce(t,e){return u9(t,e),t.reload().then(function(){return t})}function cn(t,e,n,r,i){if(!n3())return ef(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return ef(t.i);var o=r9(n.providerId),s=rt(t.uid+":::"),a=null;(!n5()||nH())&&t.s&&n.isOAuthProvider&&(a=ae(t.s,t.l,t.m,e,n,null,s,z.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=nj(a,o&&o.va,o&&o.ua);return r=r().then(function(){if(ci(t),!i)return t.I().then(function(){})}).then(function(){return ua(t.b,u,e,n,s,!!a,t.tenantId)}).then(function(){return new ei(function(n,r){t.na(e,null,new k("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=uh(t.b,t,e,u,s)})}).then(function(t){return u&&nV(u),t?rf(t):null}).o(function(t){throw u&&nV(u),t}),co(t,r,i)}function cr(t,e,n,r,i){if(!n3())return ef(new k("operation-not-supported-in-this-environment"));if(t.i&&!i)return ef(t.i);var o=null,s=rt(t.uid+":::");return r=r().then(function(){if(ci(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,uJ(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(cu,t.w(),e.a)),e}).then(function(){return uc(t.b,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return cc(t.ha);throw o}).then(function(){if(o)throw o}),co(t,r,i)}function ci(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function co(t,e,n){var r=t.i&&!n?(e.cancel(),ef(t.i)):e.o(function(e){throw e&&("auth/user-disabled"==e.code||"auth/user-token-expired"==e.code)&&(t.i||t.dispatchEvent(new uO("userInvalidated")),t.i=e),e});return t.N.push(r),r.oa(function(){X(t.N,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=uN(e.w(),uW(t),I(t.jc,t))),n||e})}function cs(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[o1]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new uq(e,n,t);return t.providerData&&K(t.providerData,function(t){t&&u3(i,rf(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function ca(t){this.a=t,this.b=aM()}uE.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then(function(t){var n=td(e.f);return delete n[uS],delete n[uA],tg(n,t),e.g(n)})},S(uk,k),uC.prototype.tb=function(t,e,n){var r,i;return e.type==il?(r=this,e.Ha().then(function(e){return e={idToken:e},void 0!==n&&(e.displayName=n),tg(e,{phoneVerificationInfo:ij(r.a)}),sY(t,sS,e)})):(i=this,e.Ha().then(function(e){return tg(e={mfaPendingCredential:e},{phoneVerificationInfo:ij(i.a)}),sY(t,sA,e)}))},S(uR,uC),S(uD,uR),S(uO,ex),(r=ux.prototype).yc=function(t){var e,n;uP(this,(e=t.hd,n=[],K(e.mfaInfo||[],function(t){(t=rv(t))&&n.push(t)}),n))},r.Sb=function(){return this.a.I().then(function(t){return new ih(t,null)})},r.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then(function(n){return t.tb(r,n,e)}).then(function(t){return u9(n.a,t),n.a.reload()})},r.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return sY(r,sX,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=G(e.b,function(t){return t.uid!=n});return uP(e,r),u9(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},r.w=function(){return{multiFactor:{enrolledFactors:H(this.b,function(t){return t.w()})}}},uL.prototype.start=function(){this.a=this.c,function t(e,n){var r;e.stop(),e.b=e7((r=n)?(e.a=e.c,e.g()):(r=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),r)).then(function(){var t,e;return t=u.document,e=null,ri()||!t?el():new ei(function(n){e=function(){ri()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}).then(function(){return e.h()}).then(function(){t(e,!0)}).o(function(n){e.i(n)&&t(e,!1)})}(this,!0)},uL.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},uM.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},uM.prototype.getToken=function(t){var e,n,r;return t=!!t,this.b&&!this.a?ef(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?(e=this,n={grant_type:"refresh_token",refresh_token:this.a},(r=e.f,new ei(function(t,e){"refresh_token"==n.grant_type&&n.refresh_token||"authorization_code"==n.grant_type&&n.code?st(r,r.l+"?key="+encodeURIComponent(r.c),function(n){n?n.error?e(s$(n)):n.access_token&&n.refresh_token?t(n):e(new k("internal-error")):e(new k("network-request-failed"))},"POST",nE(n).toString(),r.g,r.m.get()):e(new k("internal-error"))})).then(function(t){return e.b=r3(t.access_token),e.a=t.refresh_token,uU(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):el(null):el({accessToken:this.b.toString(),refreshToken:this.a})},uV.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(uq,e4),uq.prototype.xa=function(t){this.za=t,o5(this.a,t)},uq.prototype.la=function(){return this.za},uq.prototype.Ga=function(){return $(this.aa)},uq.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},rh(uq.prototype,"providerId","firebase"),(r=uq.prototype).reload=function(){var t=this;return co(this,u1(this).then(function(){return u8(t).then(function(){return uJ(t)}).then(u0)}))},r.oc=function(t){return this.I(t).then(function(t){return new uT(t)})},r.I=function(t){var e=this;return co(this,u1(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.Aa&&(uY(e,t.accessToken),e.dispatchEvent(new uO("tokenChanged"))),u6(e,"refreshToken",t.refreshToken),t.accessToken}))},r.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");uZ(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?H(e,function(t){return new uj(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)u3(this,n[r]);u6(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new uO("userReloaded",{hd:t}))},r.Lc=function(t){return ru("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},r.ub=function(t){var e=this,n=null;return co(this,t.c(this.a,this.uid).then(function(t){return u9(e,t),n=ct(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},r.Cc=function(t){return ru("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},r.rb=function(t){var e=this,n=null;return co(this,u7(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=ct(e,t,"link"),ce(e,t)}).then(function(){return n}))},r.Dc=function(t,e){var n=this;return co(this,u7(this,"phone").then(function(){return uI(uW(n),t,e,I(n.rb,n))}))},r.Mc=function(t,e){var n=this;return co(this,el().then(function(){return uI(uW(n),t,e,I(n.ub,n))}),!0)},r.Cb=function(t){var e=this;return co(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return u9(e,t),e.reload()}))},r.ed=function(t){var e=this;return co(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return u9(e,t),e.reload()}))},r.Db=function(t){var e=this;return co(this,this.I().then(function(n){return e.a.Db(n,t)}).then(function(t){return u9(e,t),e.reload()}))},r.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return u1(this);var e=this;return co(this,this.I().then(function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return u9(e,t),u6(e,"displayName",t.displayName||null),u6(e,"photoURL",t.photoUrl||null),K(e.providerData,function(t){"password"===t.providerId&&(rh(t,"displayName",e.displayName),rh(t,"photoURL",e.photoURL))}),uJ(e)}).then(u0))},r.cd=function(t){var e=this;return co(this,u8(this).then(function(n){return Q(u2(e),t)?sY(e.a,sI,{idToken:n,deleteProvider:[t]}).then(function(t){var n={};return K(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),K(u2(e),function(t){n[t]||u4(e,t)}),n[iq.PROVIDER_ID]||rh(e,"phoneNumber",null),uJ(e)}):uJ(e).then(function(){throw new k("no-such-provider")})}))},r.delete=function(){var t=this;return co(this,this.I().then(function(e){return sY(t.a,s_,{idToken:e})}).then(function(){t.dispatchEvent(new uO("userDeleted"))})).then(function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");uK(t,null),uG(t,null),uz(t,null),t.N=[],t.J=!0,uX(t),rh(t,"refreshToken",null),t.b&&ui(t.b,t)})},r.Gb=function(t,e){return"linkViaPopup"==t&&(this.g||null)==e&&!!this.f||"reauthViaPopup"==t&&(this.g||null)==e&&!!this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e},r.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},r.Ec=function(t){var e=this;return cn(this,"linkViaPopup",t,function(){return u7(e,t.providerId).then(function(){return uJ(e)})},!1)},r.Nc=function(t){return cn(this,"reauthViaPopup",t,function(){return el()},!0)},r.Fc=function(t){var e=this;return cr(this,"linkViaRedirect",t,function(){return u7(e,t.providerId)},!1)},r.Oc=function(t){return cr(this,"reauthViaRedirect",t,function(){return el()},!0)},r.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return co(this,this.I().then(function(n){return sd(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=ct(i,t,"link"),ce(i,t)}).then(function(){return o}))},r.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return co(this,el().then(function(){return iv(sv(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=ct(i,t,"reauthenticate"),u9(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},r.vb=function(t){var e=this,n=null;return co(this,this.I().then(function(e){return n=e,void 0===t||tp(t)?{}:r0(new rG(t))}).then(function(t){return e.a.vb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},r.Fb=function(t,e){var n=this,r=null;return co(this,this.I().then(function(t){return r=t,void 0===e||tp(e)?{}:r0(new rG(e))}).then(function(e){return n.a.Fb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},r.jc=function(t){var e=null,n=this;return co(this,t=iv(el(t),n.uid).then(function(t){return e=ct(n,t,"reauthenticate"),u9(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},r.toJSON=function(){return this.w()},r.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&tg(t,this.metadata.w()),K(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),tg(t,this.S.w()),t};var cu={name:"redirectUser",F:"session"};function cc(t){return aV(t.b,cu,t.a)}function ch(t){var e,n,r,i,o,s,a,c;this.a=t,this.b=aM(),this.c=null,this.f=(e=this,s=cp("local"),a=cp("session"),c=cp("none"),(n=e.b,i=aF(s,r=e.a),o=aU(n,s.F),n.get(s,r).then(function(t){var e=null;try{e=n7(u.localStorage.getItem(i))}catch(t){}if(e&&!t)return u.localStorage.removeItem(i),n.set(s,e,r);e&&t&&"localStorage"!=o.type&&u.localStorage.removeItem(i)})).then(function(){return e.b.get(a,e.a)}).then(function(t){return t?a:e.b.get(c,e.a).then(function(t){return t?c:e.b.get(s,e.a).then(function(t){return t?s:e.b.get(cf,e.a).then(function(t){return t?cp(t):s})})})}).then(function(t){return e.c=t,cl(e,t.F)}).o(function(){e.c||(e.c=s)})),this.b.addListener(cp("local"),this.a,I(this.g,this))}function cl(t,e){var n,r=[];for(n in aP)aP[n]!==e&&r.push(aV(t.b,cp(aP[n]),t.a));return r.push(aV(t.b,cf,t.a)),new ei(function(t,e){var n=r.length,i=[];if(n)for(var o=function(e,r){n--,i[e]=r,0==n&&t(i)},s=function(t){e(t)},a=0;a<r.length;a++)ep(r[a],T(o,a),s);else t(i)})}ch.prototype.g=function(){var t=this,e=cp("local");cm(this,function(){return el().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return cl(t,"local").then(function(){t.c=e})})})};var cf={name:"persistence",F:"session"};function cp(t){return{name:"authUser",F:t}}function cd(t,e){return cm(t,function(){return t.b.set(t.c,e.w(),t.a)})}function cv(t){return cm(t,function(){return aV(t.b,t.c,t.a)})}function cg(t,e,n){return cm(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),cs(t||{})})})}function cm(t,e){return t.f=t.f.then(e,e),t.f}function cy(t){var e,n,r,i,o,s,a,u,c,h;if(this.l=!1,rh(this,"settings",new uw),rh(this,"app",t),cA(this).options&&cA(this).options.apiKey)t=z.SDK_VERSION?nZ(z.SDK_VERSION):null,this.a=new oK(cA(this).options&&cA(this).options.apiKey,O(oH),t);else throw new k("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=z.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=z.INTERNAL.createSubscribe(I(this.Ac,this)),cE(this,null),this.i=new ch(cA(this).options.apiKey+":"+cA(this).name),this.D=new ca(cA(this).options.apiKey+":"+cA(this).name),this.$=cR(this,(o=this,c=cA(o).options.authDomain,h=(u=(s=o.D,a=cA(o).options.authDomain,s.b.get(cu,s.a).then(function(t){return t&&a&&(t.authDomain=a),cs(t||{})})).then(function(t){return(o.m=t)&&(t.ha=o.D),cc(o.D)}),cR(o,u)).then(function(){return cg(o.i,c,o.R)}).then(function(t){return t?(t.ha=o.D,o.m&&(o.m.ga||null)==(t.ga||null)?t:t.reload().then(function(){return cd(o.i,t).then(function(){return t})}).o(function(e){return"auth/network-request-failed"==e.code?t:cv(o.i)})):null}).then(function(t){cE(o,t||null)}),cR(o,h))),this.h=cR(this,(e=this,e.$.then(function(){return cT(e)}).o(function(){}).then(function(){if(!e.l)return e.ja()}).o(function(){}).then(function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(cp("local"),t.a,e.ja)}}))),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,n=this,r=cA(n).options.authDomain,i=cA(n).options.apiKey,r&&n3()&&(n.Oa=n.$.then(function(){if(!n.l){if(n.b=up(r,i,cA(n).name,n.R),ur(n.b,n),ck(n)&&u$(ck(n)),n.m){u$(n.m);var t=n.m;t.xa(n.la()),uK(t,n),uH(t=n.m,n.J),uz(t,n),uB(t=n.m,n.R),uG(t,n),n.m=null}return n.b}})),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,e4.call(this),Object.defineProperty(this,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),this.aa=null,Object.defineProperty(this,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),this.S=null,Object.defineProperty(this,"emulatorConfig",{get:function(){if(this.R){var t=nf(this.R.url);t=rf({protocol:t.c,host:t.a,port:t.g,options:rf({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1}),this.J=[],this.R=null}function cb(t){ex.call(this,"languageCodeChanged"),this.h=t}function cw(t){ex.call(this,"emulatorConfigChanged"),this.c=t}function c_(t){ex.call(this,"frameworkChanged"),this.f=t}function cI(t){return t.Oa||ef(new k("auth-domain-config-required"))}function cT(t){if(!n3())return ef(new k("operation-not-supported-in-this-environment"));var e=cI(t).then(function(){return t.b.ra()}).then(function(t){return t?rf(t):null});return cR(t,e)}function cE(t,e){var n,r;ck(t)&&(n=ck(t),r=t.Ba,Y(n.W,function(t){return t==r}),eX(ck(t),"tokenChanged",t.qa),eX(ck(t),"userDeleted",t.za),eX(ck(t),"userInvalidated",t.Aa),uX(ck(t))),e&&(e.W.push(t.Ba),ez(e,"tokenChanged",t.qa),ez(e,"userDeleted",t.za),ez(e,"userInvalidated",t.Aa),0<t.u&&uQ(e)),rh(t,"currentUser",e),e&&(e.xa(t.la()),uK(e,t),uH(e,t.J),uz(e,t),uB(e,t.R),uG(e,t))}function cS(t,e){var n=null,r=null;return cR(t,e.then(function(e){var i;return n=iK(e),r=r7(e),(i={}).apiKey=cA(t).options.apiKey,i.authDomain=cA(t).options.authDomain,i.appName=cA(t).name,t.R&&(i.emulatorConfig=t.R),t.$.then(function(){var n,r,o;return n=t.D,r=t.Ga(),o=new uq(i,e),n&&(o.ha=n),r&&uH(o,r),o.reload().then(function(){return o})}).then(function(e){return ck(t)&&e.uid==ck(t).uid?u5(ck(t),e):(cE(t,e),u$(e)),t.da(e)}).then(function(){cC(t)})},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=uN(e.w(),t,I(t.kc,t))),n||e}).then(function(){return rf({user:ck(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function cA(t){return t.app}function ck(t){return t.currentUser}function cN(t){return ck(t)&&ck(t)._lat||null}function cC(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](cN(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](cN(t))}}function cR(t,e){return t.P.push(e),e.oa(function(){X(t.P,e)}),e}function cD(){}function cO(){this.a={},this.b=1e12}ch.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in aP)if(aP[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(nW()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!ap()&&"none"!==t)throw n;break;default:if(!n2()&&"none"!==t)throw n}}(t),cm(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,cl(n,t)}).then(function(){if(n.c=cp(t),e)return n.b.set(n.c,e,n.a)}):el()})},S(cy,e4),S(cb,ex),S(cw,ex),S(c_,ex),(r=cy.prototype).yb=function(t){return cR(this,t=this.i.yb(t))},r.xa=function(t){this.aa===t||this.l||(this.aa=t,o5(this.a,this.aa),this.dispatchEvent(new cb(this.la())))},r.la=function(){return this.aa},r.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},r.gd=function(t,e){if(!this.R){var n;if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=e=!!e&&!!e.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!n&&nK().then(function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}),this.R={url:t,ec:e},this.settings.jb=!0,o8(this.a,this.R),this.dispatchEvent(new cw(this.R))}},r.Gc=function(t){this.J.push(t),o7(this.a,z.SDK_VERSION?nZ(z.SDK_VERSION,this.J):null),this.dispatchEvent(new c_(this.J))},r.Ga=function(){return $(this.J)},r.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},r.T=function(){return this.S},r.toJSON=function(){return{apiKey:cA(this).options.apiKey,authDomain:cA(this).options.authDomain,appName:cA(this).name,currentUser:ck(this)&&ck(this).w()}},r.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},r.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},r.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return cS(i,sp(i.a,o))})},r.Xc=function(t){if(!n3())return ef(new k("operation-not-supported-in-this-environment"));var e=this,n=r9(t.providerId),r=rt(),i=null;(!n5()||nH())&&cA(this).options.authDomain&&t.isOAuthProvider&&(i=ae(cA(this).options.authDomain,cA(this).options.apiKey,cA(this).name,"signInViaPopup",t,null,r,z.SDK_VERSION||null,null,null,this.T(),this.R));var o=nj(i,n&&n.va,n&&n.ua);return cR(this,n=cI(this).then(function(n){return ua(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new ei(function(t,n){e.na("signInViaPopup",null,new k("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=uh(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&nV(o),t?rf(t):null}).o(function(t){throw o&&nV(o),t}))},r.Yc=function(t){if(!n3())return ef(new k("operation-not-supported-in-this-environment"));var e=this;return cR(this,cI(this).then(function(){var t;return cm(t=e.i,function(){return t.b.set(cf,t.c.F,t.a)})}).then(function(){return uc(e.b,"signInViaRedirect",t,void 0,e.T())}))},r.ra=function(){var t=this;return cT(this).then(function(e){return t.b&&ug(t.b.b),e}).o(function(e){throw t.b&&ug(t.b.b),e})},r.dd=function(t){if(!t)return ef(new k("null-user"));if(this.S!=t.tenantId)return ef(new k("tenant-id-mismatch"));var e,n,r,i,o,s=this,a={};a.apiKey=cA(this).options.apiKey,a.authDomain=cA(this).options.authDomain,a.appName=cA(this).name;var u=(e=a,n=s.D,r=s.Ga(),i=t.h,(o={})[o1]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new uq(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&uH(e,r),u5(e,t),e);return cR(this,this.h.then(function(){if(cA(s).options.apiKey!=t.l)return u.reload()}).then(function(){return ck(s)&&t.uid==ck(s).uid?(u5(ck(s),t),s.da(t)):(cE(s,u),u$(u),s.da(u))}).then(function(){cC(s)}))},r.Bb=function(){var t=this;return cR(this,this.h.then(function(){return(t.b&&ug(t.b.b),ck(t))?(cE(t,null),cv(t.i).then(function(){cC(t)})):el()}))},r.Zc=function(){var t=this;return cg(this.i,cA(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=ck(t)&&e){n=ck(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return u5(ck(t),e),ck(t).I();(ck(t)||e)&&(cE(t,e),e&&(u$(e),e.ha=t.D),t.b&&ur(t.b,t),cC(t))}})},r.da=function(t){return cd(this.i,t)},r.mc=function(){cC(this),this.da(ck(this))},r.wc=function(){this.Bb()},r.xc=function(){this.Bb()},r.kc=function(t){var e=this;return this.h.then(function(){return cS(e,el(t))})},r.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ck(e))})},r.Ac=function(t){var e,n,r=this;e=this,n=function(){t.next(ck(r))},e.N.push(n),cR(e,e.h.then(function(){!e.l&&Q(e.N,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(cN(e)))}))},r.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ck(r)):"function"==typeof t.next&&t.next(ck(r))}),this.Pa(t,e,n)},r.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(ck(r)):"function"==typeof t.next&&t.next(ck(r))}),this.ib(t,e,n)},r.nc=function(t){var e=this;return cR(this,this.h.then(function(){return ck(e)?ck(e).I(t).then(function(t){return{accessToken:t}}):null}))},r.Tc=function(t){var e=this;return this.h.then(function(){return cS(e,sY(e.a,sG,{token:t}))}).then(function(t){var n=t.user;return u6(n,"isAnonymous",!1),e.da(n),t})},r.Uc=function(t,e){var n=this;return this.h.then(function(){return cS(n,sY(n.a,sH,{email:t,password:e}))})},r.dc=function(t,e){var n=this;return this.h.then(function(){return cS(n,sY(n.a,sb,{email:t,password:e}))})},r.ab=function(t){var e=this;return this.h.then(function(){return cS(e,t.ka(e.a))})},r.Sc=function(t){return ru("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},r.Ab=function(){var t=this;return this.h.then(function(){var e=ck(t);if(e&&e.isAnonymous){var n=rf({providerId:null,isNewUser:!1});return rf({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return cS(t,t.a.Ab()).then(function(e){var n=e.user;return u6(n,"isAnonymous",!0),t.da(n),e})})},r.getUid=function(){return ck(this)&&ck(this).uid||null},r.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ck(this)&&uQ(ck(this))},r.Pc=function(t){var e=this;K(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&ck(this)&&uX(ck(this)),this.removeAuthTokenListener(t)},r.addAuthTokenListener=function(t){var e=this;this.s.push(t),cR(this,this.h.then(function(){e.l||Q(e.s,t)&&t(cN(e))}))},r.removeAuthTokenListener=function(t){Y(this.s,function(e){return e==t})},r.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(cp("local"),t.a,this.ja),this.b&&(ui(this.b,this),ug(this.b.b)),Promise.resolve()},r.hc=function(t){return cR(this,sY(this.a,sw,{identifier:t,continueUri:n4()?nM():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},r.Bc=function(t){return!!iU(t)},r.xb=function(t,e){var n=this;return cR(this,el().then(function(){var t=new rG(e);if(!t.c)throw new k("argument-error",rW+" must be true when sending sign in link to email");return r0(t)}).then(function(e){return n.a.xb(t,e)}).then(function(){}))},r.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},r.ob=function(t,e){return cR(this,this.a.ob(t,e).then(function(){}))},r.Sa=function(t){return cR(this,this.a.Sa(t).then(function(t){return new r_(t)}))},r.kb=function(t){return cR(this,this.a.kb(t).then(function(){}))},r.wb=function(t,e){var n=this;return cR(this,el().then(function(){return void 0===e||tp(e)?{}:r0(new rG(e))}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},r.Wc=function(t,e){return cR(this,uI(this,t,e,I(this.ab,this)))},r.Vc=function(t,e){var n=this;return cR(this,el().then(function(){var r=e||nM(),i=iM(t,r);if(!(r=iU(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)}))},cD.prototype.render=function(){},cD.prototype.reset=function(){},cD.prototype.getResponse=function(){},cD.prototype.execute=function(){};var cx=null;function cP(t,e){return(e=cL(e))&&t.a[e]||null}function cL(t){return(t=void 0===t?1e12:t)?t.toString():null}function cM(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=t6(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ez(this.f,"click",this.i)}function cU(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function cF(){}function cV(){}cO.prototype.render=function(t,e){return this.a[this.b.toString()]=new cM(t,e),this.b++},cO.prototype.reset=function(t){var e=cP(this,t);t=cL(t),e&&t&&(e.delete(),delete this.a[t])},cO.prototype.getResponse=function(t){return(t=cP(this,t))?t.getResponse():null},cO.prototype.execute=function(t){(t=cP(this,t))&&t.execute()},cM.prototype.getResponse=function(){return cU(this),this.b},cM.prototype.execute=function(){cU(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()},6e4)},500))},cM.prototype.delete=function(){cU(this),this.g=!0,clearTimeout(this.a),this.a=null,eX(this.f,"click",this.i)},rh(cF,"FACTOR_ID","phone"),cV.prototype.g=function(){return cx||(cx=new cO),el(cx)},cV.prototype.c=function(){};var cj=null;function cq(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var cB=new ty(t_,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),cK=new rr(3e4,6e4);cq.prototype.g=function(t){var e=this;return new ei(function(n,r){var i=setTimeout(function(){r(new k("network-request-failed"))},cK.get());u.grecaptcha&&(t===e.f||e.b)?(clearTimeout(i),n(u.grecaptcha)):(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},el(oM(tS(cB,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))})},cq.prototype.c=function(){this.b--};var cG=null;function cH(t,e,n,r,i,o,s){if(rh(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(cj||(cj=new cV),s=cj):(cG||(cG=new cq),s=cG),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[cQ])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[cX],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!t6(e)||!this.i&&t6(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new oK(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[cz];this.a[cz]=function(t){if(cY(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=n1(c,u);"function"==typeof e&&e(t)}};var h=this.a[cW];this.a[cW]=function(){if(cY(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=n1(h,u);"function"==typeof t&&t()}}}var cz="callback",cW="expired-callback",cQ="sitekey",cX="size";function cY(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function cJ(t,e){return t.h.push(e),e.oa(function(){X(t.h,e)}),e}function c$(t){if(t.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function cZ(t,e,n){var r=!1;try{this.b=n||z.app()}catch(t){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)n=this.b.options.apiKey;else throw new k("invalid-api-key");var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=z.SDK_VERSION?nZ(z.SDK_VERSION,o):null,cH.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,O(oH),r)}function c0(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=c1.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=c1[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(r=cH.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=cJ(this,el().then(function(){if(n4()&&!nz())return nK();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,sY(t.s,sx,{})}).then(function(e){t.a[cQ]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},r.render=function(){c$(this);var t=this;return cJ(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=t6(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!t4&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',tB(s.name),'"'),s.type){o.push(' type="',tB(s.type),'"');var a={};tg(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=t9(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):t5(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}K(s?$(o):o,r)}}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},r.verify=function(){c$(this);var t=this;return cJ(this,this.render().then(function(e){return new ei(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Y(t.l,function(t){return t==i}),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},r.reset=function(){c$(this),null!==this.c&&this.g.reset(this.c)},r.clear=function(){c$(this),this.J=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=t6(this.v);t=e.firstChild;)e.removeChild(t)},S(cZ,cH);var c1="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function c2(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function c3(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function c4(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function c6(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function c5(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function c8(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function c9(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function c7(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function ht(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function he(t){return g(t)&&"string"==typeof t.uid}function hn(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function hr(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function hi(t,e){for(var n in e){var r=e[n].name;t[r]=ha(r,t[n],e[n].j)}}function ho(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T(function(t){return this[t]},n),set:T(function(t,e,n,r){c0(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function hs(t,e,n,r){t[e]=ha(e,n,r)}function ha(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return c0(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(i=(i=t).split("."))[i.length-1];for(o in e)r[o]=e[o];for(o in e.prototype)r.prototype[o]=e.prototype[o];return r}hi(cy.prototype,{kb:{name:"applyActionCode",j:[c2("code")]},Sa:{name:"checkActionCode",j:[c2("code")]},ob:{name:"confirmPasswordReset",j:[c2("code"),c2("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[c2("email"),c2("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[c2("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[c2("emailLink")]},Hc:{name:"onAuthStateChanged",j:[hr(c4(),c6(),"nextOrObserver"),c6("opt_error",!0),c6("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[hr(c4(),c6(),"nextOrObserver"),c6("opt_error",!0),c6("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[c2("email"),hr(c4("opt_actionCodeSettings",!0),c5(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[c2("email"),c4("actionCodeSettings")]},yb:{name:"setPersistence",j:[c2("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[c8()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[c8()]},Tc:{name:"signInWithCustomToken",j:[c2("token")]},Uc:{name:"signInWithEmailAndPassword",j:[c2("email"),c2("password")]},Vc:{name:"signInWithEmailLink",j:[c2("email"),c2("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[c2("phoneNumber"),hn()]},Xc:{name:"signInWithPopup",j:[c7()]},Yc:{name:"signInWithRedirect",j:[c7()]},dd:{name:"updateCurrentUser",j:[hr({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof uq)}},c5(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[c2(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[c2("url"),c4("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[c2("code")]}}),ho(cy.prototype,{lc:{name:"languageCode",lb:hr(c2(),c5(),"languageCode")},ti:{name:"tenantId",lb:hr(c2(),c5(),"tenantId")}}),cy.Persistence=aP,cy.Persistence.LOCAL="local",cy.Persistence.SESSION="session",cy.Persistence.NONE="none",hi(uq.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[c3("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[c3("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[c8()]},rb:{name:"linkWithCredential",j:[c8()]},Dc:{name:"linkWithPhoneNumber",j:[c2("phoneNumber"),hn()]},Ec:{name:"linkWithPopup",j:[c7()]},Fc:{name:"linkWithRedirect",j:[c7()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[c8()]},ub:{name:"reauthenticateWithCredential",j:[c8()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[c2("phoneNumber"),hn()]},Nc:{name:"reauthenticateWithPopup",j:[c7()]},Oc:{name:"reauthenticateWithRedirect",j:[c7()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[hr(c4("opt_actionCodeSettings",!0),c5(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[c2(null,!0)]},cd:{name:"unlink",j:[c2("provider")]},Cb:{name:"updateEmail",j:[c2("email")]},Db:{name:"updatePassword",j:[c2("password")]},ed:{name:"updatePhoneNumber",j:[c8("phone")]},Eb:{name:"updateProfile",j:[c4("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[c2("email"),hr(c4("opt_actionCodeSettings",!0),c5(null,!0),"opt_actionCodeSettings",!0)]}}),hi(cO.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hi(cD.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hi(ei.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ho(uw.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:c3("appVerificationDisabledForTesting")}}),hi(u_.prototype,{confirm:{name:"confirm",j:[c2("verificationCode")]}}),hs(id,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[i_,iP,iV,iy],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[hr(c2(),c4(),"json")]),hs(iL,"credential",function(t,e){return new ix(t,e)},[c2("email"),c2("password")]),hi(ix.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),hi(iS.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),hs(iS,"credential",iA,[hr(c2(),c4(),"token")]),hs(iL,"credentialWithLink",iM,[c2("email"),c2("emailLink")]),hi(ik.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),hs(ik,"credential",iN,[hr(c2(),c4(),"token")]),hi(iC.prototype,{Ca:{name:"addScope",j:[c2("scope")]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),hs(iC,"credential",iR,[hr(c2(),hr(c4(),c5()),"idToken"),hr(c2(),c5(),"accessToken",!0)]),hi(iD.prototype,{Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),hs(iD,"credential",iO,[hr(c2(),c4(),"token"),c2("secret",!0)]),hi(iE.prototype,{Ca:{name:"addScope",j:[c2("scope")]},credential:{name:"credential",j:[hr(c2(),hr(c4(),c5()),"optionsOrIdToken"),hr(c2(),c5(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[c4("customOAuthParameters")]}}),hi(ib.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),hi(ig.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),hs(iq,"credential",iB,[c2("verificationId"),c2("verificationCode")]),hi(iq.prototype,{gb:{name:"verifyPhoneNumber",j:[hr(c2(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?ht(t.session,il)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?ht(t.session,ip)&&he(t.multiFactorHint):t.session&&t.multiFactorUid?ht(t.session,ip)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),hn()]}}),hi(iF.prototype,{w:{name:"toJSON",j:[c2(null,!0)]}}),hi(k.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),hi(iY.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),hi(iX.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),hi(uk.prototype,{toJSON:{name:"toJSON",j:[c2(null,!0)]}}),hi(uE.prototype,{Rc:{name:"resolveSignIn",j:[c9()]}}),hi(ux.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[c9(),c2("displayName",!0)]},bd:{name:"unenroll",j:[hr({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:he},c2(),"multiFactorInfoIdentifier")]}}),hi(cZ.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hs(rL,"parseLink",rK,[c2("link")]),hs(cF,"assertion",function(t){return new uD(t)},[c8("phone")]),function(){if(void 0!==z&&z.INTERNAL&&z.INTERNAL.registerComponent){var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:rT,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:rI,VERIFY_AND_CHANGE_EMAIL:rE,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:cy,AuthCredential:id,Error:k};hs(t,"EmailAuthProvider",iL,[]),hs(t,"FacebookAuthProvider",iS,[]),hs(t,"GithubAuthProvider",ik,[]),hs(t,"GoogleAuthProvider",iC,[]),hs(t,"TwitterAuthProvider",iD,[]),hs(t,"OAuthProvider",iE,[c2("providerId")]),hs(t,"SAMLAuthProvider",iT,[c2("providerId")]),hs(t,"PhoneAuthProvider",iq,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof cy)}}]),hs(t,"RecaptchaVerifier",cZ,[hr(c2(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),c4("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof z.app.App)}}]),hs(t,"ActionCodeURL",rL,[]),hs(t,"PhoneMultiFactorGenerator",cF,[]),z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new cy(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:I(t.getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),z.registerVersion("@firebase/auth","0.16.8"),z.INTERNAL.extendNamespace({User:uq})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J=function(t,e){return(J=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function $(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Z,tt,te,tn,tr,ti,to="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ts=ts||{},ta=to||self;function tu(){}function tc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function th(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function tl(t,e,n){return t.call.apply(t.bind,arguments)}function tf(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function tp(t,e,n){return(tp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tl:tf).apply(null,arguments)}function td(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function tv(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function tg(){this.s=this.s,this.o=this.o}tg.prototype.s=!1,tg.prototype.na=function(){this.s||(this.s=!0,this.M())},tg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tm=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return -1},ty=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function tb(t){return Array.prototype.concat.apply([],arguments)}function tw(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function t_(t){return/^[\s\xa0]*$/.test(t)}var tI=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function tT(t,e){return -1!=t.indexOf(e)}function tE(t,e){return t<e?-1:t>e?1:0}t:{var tS=ta.navigator;if(tS){var tA=tS.userAgent;if(tA){i7=tA;break t}}i7=""}function tk(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function tN(t){var e={};for(var n in t)e[n]=t[n];return e}var tC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tR(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<tC.length;o++)n=tC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function tD(t){return tD[" "](t),t}tD[" "]=tu;var tO=tT(i7,"Opera"),tx=tT(i7,"Trident")||tT(i7,"MSIE"),tP=tT(i7,"Edge"),tL=tP||tx,tM=tT(i7,"Gecko")&&!(tT(i7.toLowerCase(),"webkit")&&!tT(i7,"Edge"))&&!(tT(i7,"Trident")||tT(i7,"MSIE"))&&!tT(i7,"Edge"),tU=tT(i7.toLowerCase(),"webkit")&&!tT(i7,"Edge");function tF(){var t=ta.document;return t?t.documentMode:void 0}t:{var tV,tj="",tq=(tV=i7,tM?/rv:([^\);]+)(\)|;)/.exec(tV):tP?/Edge\/([\d\.]+)/.exec(tV):tx?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(tV):tU?/WebKit\/(\S+)/.exec(tV):tO?/(?:Version)[ \/]?(\S+)/.exec(tV):void 0);if(tq&&(tj=tq?tq[1]:""),tx){var tB=tF();if(null!=tB&&tB>parseFloat(tj)){ot=String(tB);break t}}ot=tj}var tK={},tG=ta.document&&tx&&(tF()||parseInt(ot,10))||void 0,tH=function(){if(!ta.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ta.addEventListener("test",tu,e),ta.removeEventListener("test",tu,e)}catch(t){}return t}();function tz(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function tW(t,e){if(tz.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(tM){t:{try{tD(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tQ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tW.Z.h.call(this)}}tz.prototype.h=function(){this.defaultPrevented=!0},tv(tW,tz);var tQ={2:"touch",3:"pen",4:"mouse"};tW.prototype.h=function(){tW.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tX="closure_listenable_"+(1e6*Math.random()|0),tY=0;function tJ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++tY,this.ca=this.fa=!1}function t$(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function tZ(t){this.src=t,this.g={},this.h=0}function t0(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=tm(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(t$(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function t1(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&!!n==o.capture&&o.ia==r)return i}return -1}tZ.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=t1(t,e,r,i);return -1<s?(e=t[s],n||(e.fa=!1)):((e=new tJ(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var t2="closure_lm_"+(1e6*Math.random()|0),t3={};function t4(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=th(i)?!!i.capture:!!i,a=t9(t);if(a||(t[t2]=a=new tZ(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function t(e){return t8.call(t.src,t.listener,e)},n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tH||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(t5(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function t6(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[tX])t0(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(t5(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=t9(e))?(t0(n,t),0==n.h&&(n.src=null,e[t2]=null)):t$(t)}}}function t5(t){return t in t3?t3[t]:t3[t]="on"+t}function t8(t,e){if(t.ca)t=!0;else{e=new tW(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&t6(t),t=n.call(r,e)}return t}function t9(t){return(t=t[t2])instanceof tZ?t:null}var t7="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"==typeof t?t:(t[t7]||(t[t7]=function(e){return t.handleEvent(e)}),t[t7])}function ee(){tg.call(this),this.i=new tZ(this),this.P=this,this.I=null}function en(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new tz(e,t);else if(e instanceof tz)e.target=e.target||t;else{var i=e;tR(e=new tz(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=er(s,r,!0,e)&&i}if(i=er(s=e.g=t,r,!0,e)&&i,i=er(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=er(s=e.g=n[o],r,!1,e)&&i}function er(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&t0(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}tv(ee,tg),ee.prototype[tX]=!0,ee.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else(i=th(i)?!!i.capture:!!i,r=et(r),e&&e[tX])?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=t1(s=e.g[n],r,i,o))&&(t$(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[n],e.h--))):e&&(e=t9(e))&&(n=e.g[n.toString()],e=-1,n&&(e=t1(n,r,i,o)),(r=-1<e?n[e]:null)&&t6(r))}(this,t,e,n,r)},ee.prototype.M=function(){if(ee.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)t$(n[r]);delete e.g[t],e.h--}}this.I=null},ee.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ee.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ei=ta.JSON.stringify,eo=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=es.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),es=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())(function(){return new ea},function(t){return t.reset()}),ea=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function eu(t,e){var n;on||(n=ta.Promise.resolve(void 0),on=function(){n.then(el)}),ec||(on(),ec=!0),eh.add(t,e)}var ec=!1,eh=new eo;function el(){for(var t,e;t=null,eh.g&&(t=eh.g,eh.g=eh.g.next,eh.g||(eh.h=null),t.next=null),e=t;){try{e.h.call(e.g)}catch(t){!function(t){ta.setTimeout(function(){throw t},0)}(t)}es.j(e),100>es.h&&(es.h++,e.next=es.g,es.g=e)}ec=!1}function ef(t,e){ee.call(this),this.h=t||1,this.g=e||ta,this.j=tp(this.kb,this),this.l=Date.now()}function ep(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ed(t,e,n){if("function"==typeof t)n&&(t=tp(t,n));else if(t&&"function"==typeof t.handleEvent)t=tp(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ta.setTimeout(t,e||0)}tv(ef,ee),(ti=ef.prototype).da=!1,ti.S=null,ti.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),en(this,"tick"),this.da&&(ep(this),this.start()))}},ti.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ti.M=function(){ef.Z.M.call(this),ep(this),delete this.g};var ev=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}J(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=ed(function(){e.g=null,e.i&&(e.i=!1,t(e))},e.j);var n=e.h;e.h=null,e.m.apply(null,n)}(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ta.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(tg);function eg(t){tg.call(this),this.h=t,this.g={}}tv(eg,tg);var em=[];function ey(t,e,n,r){Array.isArray(n)||(n&&(em[0]=n.toString()),n=em);for(var i=0;i<n.length;i++){var o=function t(e,n,r,i,o){if(i&&i.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=et(r),e&&e[tX]?e.O(n,r,th(i)?!!i.capture:!!i,o):t4(e,n,r,!0,i,o)}(e,n,r,i,o);if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=et(r),e&&e[tX]?e.N(n,r,th(i)?!!i.capture:!!i,o):t4(e,n,r,!1,i,o)}(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function eb(t){tk(t.g,function(t,e){this.g.hasOwnProperty(e)&&t6(t)},t),t.g={}}function ew(){this.g=!0}function e_(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}}return ei(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}eg.prototype.M=function(){eg.Z.M.call(this),eb(this)},eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ew.prototype.Aa=function(){this.g=!1},ew.prototype.info=function(){};var eI={},eT=null;function eE(){return eT=eT||new ee}function eS(t){tz.call(this,eI.Ma,t)}function eA(t){var e=eE();en(e,new eS(e,t))}function ek(t,e){tz.call(this,eI.STAT_EVENT,t),this.stat=e}function eN(t){var e=eE();en(e,new ek(e,t))}function eC(t,e){tz.call(this,eI.Na,t),this.size=e}function eR(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ta.setTimeout(function(){t()},e)}eI.Ma="serverreachability",tv(eS,tz),eI.STAT_EVENT="statevent",tv(ek,tz),eI.Na="timingevent",tv(eC,tz);var eD={NO_ERROR:0,TIMEOUT:8},eO={};function ex(){}function eP(t){return t.h||(t.h=t.i())}function eL(){}ex.prototype.h=null;var eM={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function eU(){tz.call(this,"d")}function eF(){tz.call(this,"c")}function eV(){}function ej(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new eg(this),this.P=eB,t=tL?125:void 0,this.W=new ef(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new eq}function eq(){this.i=null,this.g="",this.h=!1}tv(eU,tz),tv(eF,tz),tv(eV,ex),eV.prototype.g=function(){return new XMLHttpRequest},eV.prototype.i=function(){return{}},or=new eV;var eB=45e3,eK={},eG={};function eH(t,e,n){t.K=1,t.v=nr(e8(e)),t.s=n,t.U=!0,ez(t,null)}function ez(t,e){t.F=Date.now(),eX(t),t.A=e8(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ng(n.h,"t",r),t.C=0,n=t.l.H,t.h=new eq,t.g=rs(t.l,n?e:null,!t.s),0<t.O&&(t.L=new ev(tp(t.Ia,t,t.g),t.O)),ey(t.V,t.g,"readystatechange",t.gb),e=t.H?tN(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),eA(1),function(t,e,n,r,i,o){t.info(function(){if(t.g){if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null}else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function eW(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function eQ(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;)if((r=function(t,e){var n=t.C,r=e.indexOf("\n",n);return -1==r?eG:isNaN(n=Number(e.substring(n,r)))?eK:(r+=1)+n>e.length?eG:(e=e.substr(r,n),t.C=r+n,e)}(t,n))==eG){4==e&&(t.o=4,eN(14),i=!1),e_(t.j,t.m,null,"[Incomplete Response]");break}else if(r==eK){t.o=4,eN(15),e_(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else e_(t.j,t.m,r,null),e0(t,r);eW(t)&&r!=eG&&r!=eK&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,eN(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),n9(e),e.L=!0,eN(11))):(e_(t.j,t.m,n,"[Invalid Chunked Response]"),eZ(t),e$(t))}function eX(t){t.Y=Date.now()+t.P,eY(t,t.P)}function eY(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=eR(tp(t.eb,t),e)}function eJ(t){t.B&&(ta.clearTimeout(t.B),t.B=null)}function e$(t){0==t.l.G||t.I||re(t.l,t)}function eZ(t){eJ(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ep(t.W),eb(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function e0(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||nT(n.i,t))){if(n.I=t.N,!t.J&&nT(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(n.g.F+3e3<t.F)rt(n),nZ(n);else break t}n8(n),eN(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=eR(tp(n.ab,n),6e3));if(1>=nI(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else rr(n,11)}else if((t.J||n.g==t)&&rt(n),!t_(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G){if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(tT(h,"spdy")||tT(h,"quic")||tT(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(nE(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,nn(r.F,r.D,f))}}if(n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),(r=n).oa=ro(r,r.H?r.la:null,r.W),t.J){nS(r.i,t);var p=r.K;p&&t.setTimeout(p),t.B&&(eJ(t),eX(t)),r.g=t}else n5(r);0<n.l.length&&n2(n)}else"stop"!=o[0]&&"close"!=o[0]||rr(n,7)}else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?rr(n,7):n$(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}}eA(4)}catch(t){}}function e1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(tc(t)||"string"==typeof t)ty(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(tc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(tc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function e2(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t){if(t instanceof e2)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}}function e3(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];e4(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)e4(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function e4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ti=ej.prototype).setTimeout=function(t){this.P=t},ti.gb=function(t){t=t.target;var e=this.L;e&&3==nW(t)?e.l():this.Ia(t)},ti.Ia=function(t){try{if(t==this.g)t:{var e=nW(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||tL||this.g&&(this.h.h||this.g.ga()||nQ(this.g)))){this.I||4!=e||7==n||(8==n||0>=r?eA(3):eA(2)),eJ(this);var i=this.g.ba();this.N=i;e:if(eW(this)){var o=nQ(this.g);t="";var s=o.length,a=4==nW(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eZ(this),e$(this);var u="";break e}this.h.i=new ta.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!t_(c)){var l=c;break e}}l=null}if(i=l)e_(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,e0(this,i);else{this.i=!1,this.o=3,eN(12),eZ(this),e$(this);break t}}this.U?(eQ(this,e,u),tL&&this.i&&3==e&&(ey(this.V,this.W,"tick",this.fb),this.W.start())):(e_(this.j,this.m,u,null),e0(this,u)),4==e&&eZ(this),this.i&&!this.I&&(4==e?re(this.l,this):(this.i=!1,eX(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,eN(12)):(this.o=0,eN(13)),eZ(this),e$(this)}}}catch(t){}finally{}},ti.fb=function(){if(this.g){var t=nW(this.g),e=this.g.ga();this.C<e.length&&(eJ(this),eQ(this,t,e),this.i&&4!=t&&eX(this))}},ti.cancel=function(){this.I=!0,eZ(this)},ti.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(eA(3),eN(17)),eZ(this),this.o=2,e$(this)):eY(this,this.Y-t)},(ti=e2.prototype).R=function(){e3(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},ti.T=function(){return e3(this),this.g.concat()},ti.get=function(t,e){return e4(this.h,t)?this.h[t]:e},ti.set=function(t,e){e4(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},ti.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var e6=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function e5(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof e5){this.g=void 0!==e?e:t.g,e9(this,t.j),this.s=t.s,e7(this,t.i),nt(this,t.m),this.l=t.l,e=t.h;var n=new nf;n.i=e.i,e.g&&(n.g=new e2(e.g),n.h=e.h),ne(this,n),this.o=t.o}else t&&(n=String(t).match(e6))?(this.g=!!e,e9(this,n[1]||"",!0),this.s=ni(n[2]||""),e7(this,n[3]||"",!0),nt(this,n[4]),this.l=ni(n[5]||"",!0),ne(this,n[6]||"",!0),this.o=ni(n[7]||"")):(this.g=!!e,this.h=new nf(null,this.g))}function e8(t){return new e5(t)}function e9(t,e,n){t.j=n?ni(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function e7(t,e,n){t.i=n?ni(e,!0):e}function nt(t,e){if(e){if(isNaN(e=Number(e))||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ne(t,e,n){var r,i;e instanceof nf?(t.h=e,r=t.h,(i=t.g)&&!r.j&&(np(r),r.i=null,r.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(nd(this,e),ng(this,n,t))},r)),r.j=i):(n||(e=no(e,nh)),t.h=new nf(e,t.g))}function nn(t,e,n){t.h.set(e,n)}function nr(t){return nn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function no(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ns),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ns(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}e5.prototype.toString=function(){var t=[],e=this.j;e&&t.push(no(e,na,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(no(e,na,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(no(n,"/"==n.charAt(0)?nc:nu,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",no(n,nl)),t.join("")};var na=/[#\/\?@]/g,nu=/[#\?:]/g,nc=/[#\?]/g,nh=/[#\?@]/g,nl=/#/g;function nf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function np(t){t.g||(t.g=new e2,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function nd(t,e){np(t),e=nm(t,e),e4(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,e4((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&e3(t)))}function nv(t,e){return np(t),e=nm(t,e),e4(t.g.h,e)}function ng(t,e,n){nd(t,e),0<n.length&&(t.i=null,t.g.set(nm(t,e),tw(n)),t.h+=n.length)}function nm(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(ti=nf.prototype).add=function(t,e){np(this),this.i=null,t=nm(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ti.forEach=function(t,e){np(this),this.g.forEach(function(n,r){ty(n,function(n){t.call(e,n,r,this)},this)},this)},ti.T=function(){np(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ti.R=function(t){np(this);var e=[];if("string"==typeof t)nv(this,t)&&(e=tb(e,this.g.get(nm(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=tb(e,t[n])}return e},ti.set=function(t,e){return np(this),this.i=null,nv(this,t=nm(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ti.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},ti.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var ny=function(t,e){this.h=t,this.g=e};function nb(t){this.l=t||nw,t=ta.PerformanceNavigationTiming?0<(t=ta.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ta.g&&ta.g.Ea&&ta.g.Ea()&&ta.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nw=10;function n_(t){return!!t.h||!!t.g&&t.g.size>=t.j}function nI(t){return t.h?1:t.g?t.g.size:0}function nT(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function nE(t,e){t.g?t.g.add(e):t.h=e}function nS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function nA(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=$(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return tw(t.i)}function nk(){}function nN(){this.g=new nk}function nC(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function nR(t){this.l=t.$b||null,this.j=t.ib||!1}function nD(t,e){ee.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=nO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nb.prototype.cancel=function(){var t,e;if(this.i=nA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=$(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},nk.prototype.stringify=function(t){return ta.JSON.stringify(t,void 0)},nk.prototype.parse=function(t){return ta.JSON.parse(t,void 0)},tv(nR,ex),nR.prototype.g=function(){return new nD(this.l,this.j)},nR.prototype.i=(i9={},function(){return i9}),tv(nD,ee);var nO=0;function nx(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function nP(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nL(t)}function nL(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ti=nD.prototype).open=function(t,e){if(this.readyState!=nO)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nL(this)},ti.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ta).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ti.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nP(this)),this.readyState=nO},ti.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nL(this)),this.g&&(this.readyState=3,nL(this),this.g))){if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ta.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nx(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))}},ti.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?nP(this):nL(this),3==this.readyState&&nx(this)}},ti.Ua=function(t){this.g&&(this.response=this.responseText=t,nP(this))},ti.Ta=function(t){this.g&&(this.response=t,nP(this))},ti.ha=function(){this.g&&nP(this)},ti.setRequestHeader=function(t,e){this.v.append(t,e)},ti.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ti.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(nD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var nM=ta.JSON.parse;function nU(t){ee.call(this),this.headers=new e2,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nF,this.K=this.L=!1}tv(nU,ee);var nF="",nV=/^https?$/i,nj=["POST","PUT"];function nq(t){return"content-type"==t.toLowerCase()}function nB(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,nK(t),nH(t)}function nK(t){t.D||(t.D=!0,en(t,"complete"),en(t,"error"))}function nG(t){if(t.h&&void 0!==ts&&(!t.C[1]||4!=nW(t)||2!=t.ba())){if(t.v&&4==nW(t))ed(t.Fa,0,t);else if(en(t,"readystatechange"),4==nW(t)){t.h=!1;try{var e,n,r=t.ba();switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break;default:i=!1}if(!(e=i)){if(n=0===r){var o=String(t.H).match(e6)[1]||null;if(!o&&ta.self&&ta.self.location){var s=ta.self.location.protocol;o=s.substr(0,s.length-1)}n=!nV.test(o?o.toLowerCase():"")}e=n}if(e)en(t,"complete"),en(t,"success");else{t.m=6;try{var a=2<nW(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",nK(t)}}finally{nH(t)}}}}function nH(t,e){if(t.g){nz(t);var n=t.g,r=t.C[0]?tu:null;t.g=null,t.C=null,e||en(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function nz(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ta.clearTimeout(t.A),t.A=null)}function nW(t){return t.g?t.g.readyState:0}function nQ(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case nF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function nX(t,e,n){t:{for(i in n){var r,i=!1;break t}i=!0}i||(r="",tk(n,function(t,e){r+=e+":"+t+"\r\n"}),n=r,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):nn(t,e,n))}function nY(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nJ(t){this.za=0,this.l=[],this.h=new ew,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nY("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nY("baseRetryDelayMs",5e3,t),this.$a=nY("retryDelaySeedMs",1e4,t),this.Ya=nY("forwardChannelMaxRetries",2,t),this.ra=nY("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new nb(t&&t.concurrentRequestLimit),this.Ca=new nN,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function n$(t){if(n0(t),3==t.G){var e=t.V++,n=e8(t.F);nn(n,"SID",t.J),nn(n,"RID",e),nn(n,"TYPE","terminate"),n4(t,n),(e=new ej(t,t.h,e,void 0)).K=2,e.v=nr(e8(n)),n=!1,ta.navigator&&ta.navigator.sendBeacon&&(n=ta.navigator.sendBeacon(e.v.toString(),"")),!n&&ta.Image&&((new Image).src=e.v,n=!0),n||(e.g=rs(e.l,null),e.g.ea(e.v)),e.F=Date.now(),eX(e)}ri(t)}function nZ(t){t.g&&(n9(t),t.g.cancel(),t.g=null)}function n0(t){nZ(t),t.u&&(ta.clearTimeout(t.u),t.u=null),rt(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ta.clearTimeout(t.m),t.m=null)}function n1(t,e){t.l.push(new ny(t.Za++,e)),3==t.G&&n2(t)}function n2(t){n_(t.i)||t.m||(t.m=!0,eu(t.Ha,t),t.C=0)}function n3(t,e){n=e?e.m:t.V++;var n,r=e8(t.F);nn(r,"SID",t.J),nn(r,"RID",n),nn(r,"AID",t.U),n4(t,r),t.o&&t.s&&nX(r,t.o,t.s),n=new ej(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=n6(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),nE(t.i,n),eH(n,r,e)}function n4(t,e){t.j&&e1({},function(t,n){nn(e,n,t)})}function n6(t,e,n){n=Math.min(t.l.length,n);for(var r=t.j?tp(t.j.Oa,t.j,t):null,i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{!function(t,e,n){var r=n||"";try{e1(t,function(t,n){var i=t;th(t)&&(i=ei(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break}}return t=t.l.splice(0,n),e.D=t,r}function n5(t){t.g||t.u||(t.Y=1,eu(t.Ga,t),t.A=0)}function n8(t){return!t.g&&!t.u&&!(3<=t.A)&&(t.Y++,t.u=eR(tp(t.Ga,t),rn(t,t.A)),t.A++,!0)}function n9(t){null!=t.B&&(ta.clearTimeout(t.B),t.B=null)}function n7(t){t.g=new ej(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=e8(t.oa);nn(e,"RID","rpc"),nn(e,"SID",t.J),nn(e,"CI",t.N?"0":"1"),nn(e,"AID",t.U),n4(t,e),nn(e,"TYPE","xmlhttp"),t.o&&t.s&&nX(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=nr(e8(e)),n.s=null,n.U=!0,ez(n,t)}function rt(t){null!=t.v&&(ta.clearTimeout(t.v),t.v=null)}function re(t,e){var n=null;if(t.g==e){rt(t),n9(t),t.g=null;var r=2}else{if(!nT(t.i,e))return;n=e.D,nS(t.i,e),r=1}if(t.I=e.N,0!=t.G){if(e.i){if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i,o=t.C;en(r=eE(),new eC(r,n,e,o)),n2(t)}else n5(t)}else if(3==(o=e.o)||0==o&&0<t.I||!(1==r&&(i=e,!(nI(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=i.D.concat(t.l),!0):1!=t.G&&2!=t.G&&!(t.C>=(t.Xa?0:t.Ya))&&(t.m=eR(tp(t.Ha,t,i),rn(t,t.C)),t.C++,!0)))||2==r&&n8(t)))switch(n&&0<n.length&&((e=t.i).i=e.i.concat(n)),o){case 1:rr(t,5);break;case 4:rr(t,10);break;case 3:rr(t,6);break;default:rr(t,2)}}}function rn(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function rr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=tp(t.jb,t);n||(n=new e5("//www.google.com/images/cleardot.gif"),ta.location&&"http"==ta.location.protocol||e9(n,"https"),nr(n)),function(t,e){var n=new ew;if(ta.Image){var r=new Image;r.onload=td(nC,n,r,"TestLoadImage: loaded",!0,e),r.onerror=td(nC,n,r,"TestLoadImage: error",!1,e),r.onabort=td(nC,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=td(nC,n,r,"TestLoadImage: timeout",!1,e),ta.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else eN(2);t.G=0,t.j&&t.j.va(e),ri(t),n0(t)}function ri(t){t.G=0,t.I=-1,t.j&&((0!=nA(t.i).length||0!=t.l.length)&&(t.i.i.length=0,tw(t.l),t.l.length=0),t.j.ua())}function ro(t,e,n){var r=(i=n)instanceof e5?e8(i):new e5(i,void 0);if(""!=r.i)e&&e7(r,e+"."+r.i),nt(r,r.m);else{var i,o,s,a,u,c,h=ta.location;o=h.protocol,s=e?e+"."+h.hostname:h.hostname,a=+h.port,u=n,c=new e5(null,void 0),o&&e9(c,o),s&&e7(c,s),a&&nt(c,a),u&&(c.l=u),r=c}return t.aa&&tk(t.aa,function(t,e){nn(r,e,t)}),e=t.D,n=t.sa,e&&n&&nn(r,e,n),nn(r,"VER",t.ma),n4(t,r),r}function rs(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nU(n&&t.Ba&&!t.qa?new nR({ib:!0}):t.qa)).L=t.H,e}function ra(){}function ru(){if(tx&&!(10<=Number(tG)))throw Error("Environmental error: no available transport.")}function rc(t,e){ee.call(this),this.g=new nJ(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!t_(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!t_(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rf(this)}function rh(t){eU.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function rl(){eF.call(this),this.status=1}function rf(t){this.g=t}(ti=nU.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():or.g(),this.C=this.u?eP(this.u):eP(or),this.g.onreadystatechange=tp(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){nB(this,t);return}t=n||"";var i,o=new e2(this.headers);r&&e1(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=nq,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.T()),n=ta.FormData&&t instanceof ta.FormData,!(0<=tm(nj,e))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nz(this),0<this.B&&((this.K=(i=this.g,tx&&(Object.prototype.hasOwnProperty.call(tK,9)?tK[9]:tK[9]=function(){for(var t=0,e=tI(String(ot)).split("."),n=tI("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=tE(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||tE(0==o[2].length,0==s[2].length)||tE(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}(9))&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=tp(this.pa,this)):this.A=ed(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){nB(this,t)}},ti.pa=function(){void 0!==ts&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,en(this,"timeout"),this.abort(8))},ti.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,en(this,"complete"),en(this,"abort"),nH(this))},ti.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nH(this,!0)),nU.Z.M.call(this)},ti.Fa=function(){this.s||(this.F||this.v||this.l?nG(this):this.cb())},ti.cb=function(){nG(this)},ti.ba=function(){try{return 2<nW(this)?this.g.status:-1}catch(t){return -1}},ti.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},ti.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),nM(e)}},ti.Da=function(){return this.m},ti.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ti=nJ.prototype).ma=8,ti.G=1,ti.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},ti.Ha=function(t){if(this.m){if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ej(this,this.h,t,void 0),n=this.s;if(this.P&&(n?tR(n=tN(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){e:{var o=this.l[i];if("__data__"in o.g&&"string"==typeof(o=o.g.__data__)){o=o.length;break e}o=void 0}if(void 0===o)break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=n6(this,e,r),nn(i=e8(this.F),"RID",t),nn(i,"CVER",22),this.D&&nn(i,"X-HTTP-Session-Id",this.D),n4(this,i),this.o&&n&&nX(i,this.o,n),nE(this.i,e),this.Ra&&nn(i,"TYPE","init"),this.ja?(nn(i,"$req",r),nn(i,"SID","null"),e.$=!0,eH(e,i,null)):eH(e,i,r),this.G=2}}else 3==this.G&&(t?n3(this,t):0==this.l.length||n_(this.i)||n3(this))}},ti.Ga=function(){if(this.u=null,n7(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=eR(tp(this.bb,this),t)}},ti.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,eN(10),nZ(this),n7(this))},ti.ab=function(){null!=this.v&&(this.v=null,nZ(this),n8(this),eN(19))},ti.jb=function(t){t?(this.h.info("Successfully pinged google.com"),eN(2)):(this.h.info("Failed to ping google.com"),eN(1))},(ti=ra.prototype).xa=function(){},ti.wa=function(){},ti.va=function(){},ti.ua=function(){},ti.Oa=function(){},ru.prototype.g=function(t,e){return new rc(t,e)},tv(rc,ee),rc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),eu(tp(t.hb,t,e))),eN(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ro(t,null,t.W),n2(t)},rc.prototype.close=function(){n$(this.g)},rc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,n1(this.g,e)}else this.v?((e={}).__data__=ei(t),n1(this.g,e)):n1(this.g,t)},rc.prototype.M=function(){this.g.j=null,delete this.j,n$(this.g),delete this.g,rc.Z.M.call(this)},tv(rh,eU),tv(rl,eF),tv(rf,ra),rf.prototype.xa=function(){en(this.g,"a")},rf.prototype.wa=function(t){en(this.g,new rh(t))},rf.prototype.va=function(t){en(this.g,new rl(t))},rf.prototype.ua=function(){en(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,rc.prototype.send=rc.prototype.u,rc.prototype.open=rc.prototype.m,rc.prototype.close=rc.prototype.close,eD.NO_ERROR=0,eD.TIMEOUT=8,eD.HTTP_ERROR=6,eO.COMPLETE="complete",eL.EventType=eM,eM.OPEN="a",eM.CLOSE="b",eM.ERROR="c",eM.MESSAGE="d",ee.prototype.listen=ee.prototype.N,nU.prototype.listenOnce=nU.prototype.O,nU.prototype.getLastError=nU.prototype.La,nU.prototype.getLastErrorCode=nU.prototype.Da,nU.prototype.getStatus=nU.prototype.ba,nU.prototype.getResponseJson=nU.prototype.Qa,nU.prototype.getResponseText=nU.prototype.ga,nU.prototype.send=nU.prototype.ea;var rp={PROXY:10,NOPROXY:11},rd=n(3454),rv=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();rv.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},rm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return s(e,t),e}(Error),ry=new F("@firebase/firestore");function rb(){return ry.logLevel}function rw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ry.logLevel<=te.DEBUG){var r=e.map(rT);ry.debug.apply(ry,f(["Firestore (8.8.0): "+t],r))}}function r_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ry.logLevel<=te.ERROR){var r=e.map(rT);ry.error.apply(ry,f(["Firestore (8.8.0): "+t],r))}}function rI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ry.logLevel<=te.WARN){var r=e.map(rT);ry.warn.apply(ry,f(["Firestore (8.8.0): "+t],r))}}function rT(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw r_(e),Error(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rS=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function rA(t,e){return t<e?-1:t>e?1:0}function rk(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rN=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0||e>=1e9)throw new rm(rg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800||t>=253402300800)throw new rm(rg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?rA(this.nanoseconds,t.nanoseconds):rA(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),rC=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new rN(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rD(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rO(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rx=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&rE(),void 0===n?n=t.length-e:n>t.length-e&&rE(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return -1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0;i<t.length;i++){var o=t[i];if(o.indexOf("//")>=0)throw new rm(rg.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(rx),rL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return rL.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new rm(rg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new rm(rg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new rm(rg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?s=!s:"."!==a||s?r+=a:o(),i++}if(o(),s)throw new rm(rg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(rx),rU=function(){function t(t){this.fields=t,t.sort(rM.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return rk(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),rF=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return rA(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();rF.EMPTY_BYTE_STRING=new rF("");var rV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rj(t){if(t||rE(),"string"==typeof t){var e=0,n=rV.exec(t);if(n||rE(),n[1]){var r=n[1];e=Number(r=(r+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(t).getTime()/1e3),nanos:e}}return{seconds:rq(t.seconds),nanos:rq(t.nanos)}}function rq(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function rB(t){return"string"==typeof t?rF.fromBase64String(t):rF.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rG(t){var e=rj(t.mapValue.fields.__local_write_time__.timestampValue);return new rN(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t){return null==t}function rz(t){return 0===t&&1/t==-1/0}function rW(t){return"number"==typeof t&&Number.isInteger(t)&&!rz(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rQ=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(rP.fromString(e))},t.fromName=function(e){return new t(rP.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rP.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return rP.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new rP(e.slice()))},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rX(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rK(t)?4:10:rE()}function rY(t,e){var n=rX(t);if(n!==rX(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rG(t).isEqual(rG(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=rj(t.timestampValue),r=rj(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return rB(t.bytesValue).isEqual(rB(e.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return rq(t.geoPointValue.latitude)===rq(e.geoPointValue.latitude)&&rq(t.geoPointValue.longitude)===rq(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return rq(t.integerValue)===rq(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=rq(t.doubleValue),r=rq(e.doubleValue);return n===r?rz(n)===rz(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return rk(t.arrayValue.values||[],e.arrayValue.values||[],rY);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(rR(n)!==rR(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rY(n[i],r[i])))return!1;return!0}(t,e);default:return rE()}}function rJ(t,e){return void 0!==(t.values||[]).find(function(t){return rY(t,e)})}function r$(t,e){var n,r,i,o,s,a,u,c,h,l=rX(t),f=rX(e);if(l!==f)return rA(l,f);switch(l){case 0:return 0;case 1:return rA(t.booleanValue,e.booleanValue);case 2:return(n=rq(t.integerValue||t.doubleValue))<(r=rq(e.integerValue||e.doubleValue))?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1;case 3:return rZ(t.timestampValue,e.timestampValue);case 4:return rZ(rG(t),rG(e));case 5:return rA(t.stringValue,e.stringValue);case 6:return i=t.bytesValue,o=e.bytesValue,s=rB(i),a=rB(o),s.compareTo(a);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rA(n[i],r[i]);if(0!==o)return o}return rA(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return u=t.geoPointValue,c=e.geoPointValue,0!==(h=rA(rq(u.latitude),rq(c.latitude)))?h:rA(rq(u.longitude),rq(c.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=r$(n[i],r[i]);if(o)return o}return rA(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=rA(r[s],o[s]);if(0!==a)return a;var u=r$(n[r[s]],i[o[s]]);if(0!==u)return u}return rA(r.length,o.length)}(t.mapValue,e.mapValue);default:throw rE()}}function rZ(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rA(t,e);var n=rj(t),r=rj(e),i=rA(n.seconds,r.seconds);return 0!==i?i:rA(n.nanos,r.nanos)}function r0(t){var e,n,r;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?"time("+(r=rj(t.timestampValue)).seconds+","+r.nanos+")":"stringValue"in t?t.stringValue:"bytesValue"in t?rB(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,rQ.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=r0(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+r0(t.fields[o])}return e+"}"}(t.mapValue):rE()}function r1(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function r2(t){return!!t&&"integerValue"in t}function r3(t){return!!t&&"arrayValue"in t}function r4(t){return!!t&&"nullValue"in t}function r6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function r5(t){return!!t&&"mapValue"in t}function r8(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return rD(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=r8(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=r8(t.arrayValue.values[r]);return n}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r9=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!r5(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=r8(e)},t.prototype.setAll=function(t){var e=this,n=rM.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=r8(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());r5(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return rY(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];r5(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){rD(e,function(e,n){return t[e]=n});for(var r=0;r<n.length;r++){var i=n[r];delete t[i]}},t.prototype.clone=function(){return new t(r8(this.value))},t}(),r7=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,rC.min(),r9.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,r9.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,r9.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=r9.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=r9.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),it=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new it(t,e,n,r,i,o,s)}function ir(t){if(null===t.h){var e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(function(t){return t.field.canonicalString()+t.op.toString()+r0(t.value)}).join(",")+"|ob:"+t.orderBy.map(function(t){return t.field.canonicalString()+t.dir}).join(","),rH(t.limit)||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+im(t.startAt)),t.endAt&&(e+="|ub:"+im(t.endAt)),t.h=e}return t.h}function ii(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i,o,s=0;s<t.orderBy.length;s++)if(n=t.orderBy[s],r=e.orderBy[s],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1;if(t.filters.length!==e.filters.length)return!1;for(var a=0;a<t.filters.length;a++)if(i=t.filters[a],o=e.filters[a],i.op!==o.op||!i.field.isEqual(o.field)||!rY(i.value,o.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iw(t.startAt,e.startAt)&&iw(t.endAt,e.endAt)}function io(t){return rQ.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var is=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return s(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ia(t,n,r):"array-contains"===n?new il(t,r):"in"===n?new ip(t,r):"not-in"===n?new id(t,r):"array-contains-any"===n?new iv(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new iu(t,n):new ic(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(r$(e,this.value)):null!==e&&rX(this.value)===rX(e)&&this.m(r$(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return rE()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=rQ.fromName(r.referenceValue),i}return s(e,t),e.prototype.matches=function(t){var e=rQ.comparator(t.key,this.key);return this.m(e)},e}(is),iu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ih("in",n),r}return s(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(is),ic=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ih("not-in",n),r}return s(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(is);function ih(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return rQ.fromName(t.referenceValue)})}var il=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return s(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return r3(e)&&rJ(e.arrayValue,this.value)},e}(is),ip=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return s(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&rJ(this.value.arrayValue,e)},e}(is),id=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return s(e,t),e.prototype.matches=function(t){if(rJ(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!rJ(this.value.arrayValue,e)},e}(is),iv=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return s(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!r3(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return rJ(e.value.arrayValue,t)})},e}(is),ig=function(t,e){this.position=t,this.before=e};function im(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return r0(t)}).join(",")}var iy=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ib(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?rQ.comparator(rQ.fromName(s.referenceValue),n.key):r$(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function iw(t,e){if(null===t)return null===e;if(null===e||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!rY(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i_=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function iI(t){return new i_(t)}function iT(t){return!rH(t.limit)&&"F"===t.limitType}function iE(t){return!rH(t.limit)&&"L"===t.limitType}function iS(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function iA(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ik(t){return null!==t.collectionGroup}function iN(t){if(null===t.p){t.p=[];var e=iA(t),n=iS(t);if(null!==e&&null===n)e.isKeyField()||t.p.push(new iy(e)),t.p.push(new iy(rM.keyField(),"asc"));else{for(var r=!1,i=0,o=t.explicitOrderBy;i<o.length;i++){var s=o[i];t.p.push(s),s.field.isKeyField()&&(r=!0)}if(!r){var a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new iy(rM.keyField(),a))}}}return t.p}function iC(t){if(!t.T){if("F"===t.limitType)t.T=ie(t.path,t.collectionGroup,iN(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var e=[],n=0,r=iN(t);n<r.length;n++){var i=r[n],o="desc"===i.dir?"asc":"desc";e.push(new iy(i.field,o))}var s=t.endAt?new ig(t.endAt.position,!t.endAt.before):null,a=t.startAt?new ig(t.startAt.position,!t.startAt.before):null;t.T=ie(t.path,t.collectionGroup,e,t.filters,t.limit,s,a)}}return t.T}function iR(t,e,n){return new i_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iD(t,e){return ii(iC(t),iC(e))&&t.limitType===e.limitType}function iO(t){return ir(iC(t))+"|lt:"+t.limitType}function ix(t){var e,n;return"Query(target="+(n=(e=iC(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map(function(t){return t.field.canonicalString()+" "+t.op+" "+r0(t.value)}).join(", ")+"]"),rH(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.canonicalString()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+im(e.startAt)),e.endAt&&(n+=", endAt: "+im(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")"}function iP(t,e){var n;return e.isFoundDocument()&&(n=e.key.path,null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):rQ.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&!(t.startAt&&!ib(t.startAt,iN(t),e))&&(!t.endAt||!ib(t.endAt,iN(t),e))}function iL(t){return function(e,n){for(var r=!1,i=0,o=iN(t);i<o.length;i++){var s=o[i],a=function(t,e,n){var r,i,o,s=t.field.isKeyField()?rQ.comparator(e.key,n.key):(r=t.field,i=e.data.field(r),o=n.data.field(r),null!==i&&null!==o?r$(i,o):rE());switch(t.dir){case"asc":return s;case"desc":return -1*s;default:return rE()}}(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rz(e)?"-0":e}}function iU(t){return{integerValue:""+t}}function iF(t,e){return rW(e)?iU(e):iM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iV=function(){this._=void 0};function ij(t,e){return t instanceof iz?r2(e)||e&&"doubleValue"in e?e:{integerValue:0}:null}var iq=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(iV),iB=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return s(e,t),e}(iV);function iK(t,e){for(var n=iQ(e),r=function(t){n.some(function(e){return rY(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var iG=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return s(e,t),e}(iV);function iH(t,e){for(var n=iQ(e),r=function(t){n=n.filter(function(e){return!rY(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var iz=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return s(e,t),e}(iV);function iW(t){return rq(t.integerValue||t.doubleValue)}function iQ(t){return r3(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iX=function(t,e){this.field=t,this.transform=e},iY=function(t,e){this.version=t,this.transformResults=e},iJ=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function i$(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var iZ=function(){};function i0(t,e,n){t instanceof i3?function(t,e,n){if(i$(t.precondition,e)){var r=t.value.clone(),i=i8(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(i2(e),r).setHasLocalMutations()}}(t,e,n):t instanceof i4?function(t,e,n){if(i$(t.precondition,e)){var r=i8(t.fieldTransforms,n,e),i=e.data;i.setAll(i6(t)),i.setAll(r),e.convertToFoundDocument(i2(e),i).setHasLocalMutations()}}(t,e,n):i$(t.precondition,e)&&e.convertToNoDocument(rC.min())}function i1(t,e){var n,r;return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&rk(n,r,function(t,e){var n,r;return t.field.isEqual(e.field)&&(n=t.transform,r=e.transform,n instanceof iB&&r instanceof iB||n instanceof iG&&r instanceof iG?rk(n.elements,r.elements,rY):n instanceof iz&&r instanceof iz?rY(n.A,r.A):n instanceof iq&&r instanceof iq)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function i2(t){return t.isFoundDocument()?t.version:rC.min()}var i3=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return s(e,t),e}(iZ),i4=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return s(e,t),e}(iZ);function i6(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function i5(t,e,n){var r=new Map;t.length===n.length||rE();for(var i=0;i<n.length;i++){var o,s=t[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,(o=n[i],a instanceof iB?iK(a,u):a instanceof iG?iH(a,u):o))}return r}function i8(t,e,n){for(var r=new Map,i=0;i<t.length;i++){var o=t[i],s=o.transform,a=n.data.field(o.field);r.set(o.field,function(t,e,n){var r,i,o;return t instanceof iq?(r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}},e&&(r.fields.__previous_value__=e),{mapValue:r}):t instanceof iB?iK(t,e):t instanceof iG?iH(t,e):(o=iW(i=ij(t,e))+iW(t.A),r2(i)&&r2(t.A)?iU(o):iM(t.R,o))}(s,a,e))}return r}var i9,i7,ot,oe,on,or,oi,oo,os=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return s(e,t),e}(iZ),oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return s(e,t),e}(iZ),ou=function(t){this.count=t};function oc(t){switch(t){case rg.OK:return rE();case rg.CANCELLED:case rg.UNKNOWN:case rg.DEADLINE_EXCEEDED:case rg.RESOURCE_EXHAUSTED:case rg.INTERNAL:case rg.UNAVAILABLE:case rg.UNAUTHENTICATED:return!1;case rg.INVALID_ARGUMENT:case rg.NOT_FOUND:case rg.ALREADY_EXISTS:case rg.PERMISSION_DENIED:case rg.FAILED_PRECONDITION:case rg.ABORTED:case rg.OUT_OF_RANGE:case rg.UNIMPLEMENTED:case rg.DATA_LOSS:return!0;default:return rE()}}function oh(t){if(void 0===t)return r_("GRPC error has no .code"),rg.UNKNOWN;switch(t){case oi.OK:return rg.OK;case oi.CANCELLED:return rg.CANCELLED;case oi.UNKNOWN:return rg.UNKNOWN;case oi.DEADLINE_EXCEEDED:return rg.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return rg.RESOURCE_EXHAUSTED;case oi.INTERNAL:return rg.INTERNAL;case oi.UNAVAILABLE:return rg.UNAVAILABLE;case oi.UNAUTHENTICATED:return rg.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return rg.INVALID_ARGUMENT;case oi.NOT_FOUND:return rg.NOT_FOUND;case oi.ALREADY_EXISTS:return rg.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return rg.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return rg.FAILED_PRECONDITION;case oi.ABORTED:return rg.ABORTED;case oi.OUT_OF_RANGE:return rg.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return rg.UNIMPLEMENTED;case oi.DATA_LOSS:return rg.DATA_LOSS;default:return rE()}}(oo=oi||(oi={}))[oo.OK=0]="OK",oo[oo.CANCELLED=1]="CANCELLED",oo[oo.UNKNOWN=2]="UNKNOWN",oo[oo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oo[oo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oo[oo.NOT_FOUND=5]="NOT_FOUND",oo[oo.ALREADY_EXISTS=6]="ALREADY_EXISTS",oo[oo.PERMISSION_DENIED=7]="PERMISSION_DENIED",oo[oo.UNAUTHENTICATED=16]="UNAUTHENTICATED",oo[oo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oo[oo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oo[oo.ABORTED=10]="ABORTED",oo[oo.OUT_OF_RANGE=11]="OUT_OF_RANGE",oo[oo.UNIMPLEMENTED=12]="UNIMPLEMENTED",oo[oo.INTERNAL=13]="INTERNAL",oo[oo.UNAVAILABLE=14]="UNAVAILABLE",oo[oo.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol=function(){function t(t,e){this.comparator=t,this.root=e||op.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,op.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,op.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return -1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new of(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new of(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new of(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new of(this.root,t,this.comparator,!0)},t}(),of=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),op=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(0>n(e,i.key))i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){return Math.pow(2,this.check())<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rE();var t=this.left.check();if(t!==this.right.check())throw rE();return t+(this.isRed()?0:1)},t}();op.EMPTY=null,op.RED=!0,op.BLACK=!1,op.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw rE()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw rE()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw rE()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw rE()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw rE()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new op(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var od=function(){function t(t){this.comparator=t,this.data=new ol(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ov(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ov(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ov=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),og=new ol(rQ.comparator),om=new ol(rQ.comparator),oy=new ol(rQ.comparator),ob=new od(rQ.comparator);function ow(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ob,r=0;r<t.length;r++){var i=t[r];n=n.add(i)}return n}var o_=new od(rA),oI=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,oT.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(rC.min(),r,o_,og,ow())},t}(),oT=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(rF.EMPTY_BYTE_STRING,n,ow(),ow(),ow())},t}(),oE=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},oS=function(t,e){this.targetId=t,this.V=e},oA=function(t,e,n,r){void 0===n&&(n=rF.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ok=function(){function t(){this.S=0,this.D=oR(),this.C=rF.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=ow(),e=ow(),n=ow();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:rE()}}),new oT(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=oR()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),oN=function(){function t(t){this.W=t,this.G=new Map,this.H=og,this.J=oC(),this.Y=new od(rA)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:rE()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(io(i)){if(0===n){var o=new rQ(i.path);this.tt(e,o,r7.newNoDocument(o,rC.min()))}else 1===n||rE()}else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&io(o.target)){var s=new rQ(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,r7.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=ow();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new oI(t,n,this.Y,this.H,r);return this.H=og,this.J=oC(),this.Y=new od(rA),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ok,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new od(rA),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||rw("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ok),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function oC(){return new ol(rQ.comparator)}function oR(){return new ol(rQ.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oD={asc:"ASCENDING",desc:"DESCENDING"},oO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ox=function(t,e){this.databaseId=t,this.I=e};function oP(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function oL(t,e){return t.I?e.toBase64():e.toUint8Array()}function oM(t){var e;return t||rE(),rC.fromTimestamp(new rN((e=rj(t)).seconds,e.nanos))}function oU(t,e){return new rP(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function oF(t){var e=rP.fromString(t);return o2(e)||rE(),e}function oV(t,e){return oU(t.databaseId,e.path)}function oj(t,e){var n=oF(e);if(n.get(1)!==t.databaseId.projectId)throw new rm(rg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new rm(rg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new rQ(oG(n))}function oq(t,e){return oU(t.databaseId,e)}function oB(t){var e=oF(t);return 4===e.length?rP.emptyPath():oG(e)}function oK(t){return new rP(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oG(t){return t.length>4&&"documents"===t.get(4)||rE(),t.popFirst(5)}function oH(t,e,n){return{name:oV(t,e),fields:n.value.mapValue.fields}}function oz(t,e,n){var r=oj(t,e.name),i=oM(e.updateTime),o=new r9({mapValue:{fields:e.fields}}),s=r7.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function oW(t,e){var n,r,i,o;if(e instanceof i3)n={update:oH(t,e.key,e.value)};else if(e instanceof os)n={delete:oV(t,e.key)};else if(e instanceof i4)n={update:oH(t,e.key,e.data),updateMask:(i=e.fieldMask,o=[],i.fields.forEach(function(t){return o.push(t.canonicalString())}),{fieldPaths:o})};else{if(!(e instanceof oa))return rE();n={verify:oV(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof iq)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof iB)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof iG)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof iz)return{fieldPath:e.field.canonicalString(),increment:n.A};throw rE()}(0,t)})),e.precondition.isNone||(n.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:oP(t,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:rE()),n}function oQ(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?iJ.updateTime(oM(n.updateTime)):void 0!==n.exists?iJ.exists(n.exists):iJ.none():iJ.none(),i=e.updateTransforms?e.updateTransforms.map(function(e){var n;return n=null,"setToServerValue"in e?("REQUEST_TIME"===e.setToServerValue||rE(),n=new iq):"appendMissingElements"in e?n=new iB(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new iG(e.removeAllFromArray.values||[]):"increment"in e?n=new iz(t,e.increment):rE(),new iX(rM.fromServerFormat(e.fieldPath),n)}):[];if(e.update){e.update.name;var o=oj(t,e.update.name),s=new r9({mapValue:{fields:e.update.fields}});return e.updateMask?new i4(o,s,new rU((e.updateMask.fieldPaths||[]).map(function(t){return rM.fromServerFormat(t)})),r,i):new i3(o,s,r,i)}return e.delete?new os(oj(t,e.delete),r):e.verify?new oa(oj(t,e.verify),r):rE()}function oX(t,e){return{documents:[oq(t,e.path)]}}function oY(t,e){var n,r={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(r.parent=oq(t,i),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=oq(t,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);var o=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(r6(t.value))return{unaryFilter:{field:o0(t.field),op:"IS_NAN"}};if(r4(t.value))return{unaryFilter:{field:o0(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(r6(t.value))return{unaryFilter:{field:o0(t.field),op:"IS_NOT_NAN"}};if(r4(t.value))return{unaryFilter:{field:o0(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:o0(t.field),op:oO[t.op],value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);o&&(r.structuredQuery.where=o);var s=function(t){if(0!==t.length)return t.map(function(t){return{field:o0(t.field),direction:oD[t.dir]}})}(e.orderBy);s&&(r.structuredQuery.orderBy=s);var a=(n=e.limit,t.I||rH(n)?n:{value:n});return null!==a&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=o$(e.startAt)),e.endAt&&(r.structuredQuery.endAt=o$(e.endAt)),r}function oJ(t){var e,n,r=oB(t.parent),i=t.structuredQuery,o=i.from?i.from.length:0,s=null;if(o>0){1===o||rE();var a=i.from[0];a.allDescendants?s=a.collectionId:r=r.child(a.collectionId)}var u=[];i.where&&(u=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=o1(t.unaryFilter.field);return is.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=o1(t.unaryFilter.field);return is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=o1(t.unaryFilter.field);return is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=o1(t.unaryFilter.field);return is.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rE()}}(e)]:void 0!==e.fieldFilter?[is.create(o1(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rE()}}(e.fieldFilter.op),e.fieldFilter.value)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t(e)}).reduce(function(t,e){return t.concat(e)}):rE():[]}(i.where));var c=[];i.orderBy&&(c=i.orderBy.map(function(t){return new iy(o1(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}));var h=null;i.limit&&(h=rH(n="object"==typeof(e=i.limit)?e.value:e)?null:n);var l=null;i.startAt&&(l=oZ(i.startAt));var f=null;return i.endAt&&(f=oZ(i.endAt)),new i_(r,s,c,u,h,"F",l,f)}function o$(t){return{before:t.before,values:t.position}}function oZ(t){var e=!!t.before;return new ig(t.values||[],e)}function o0(t){return{fieldPath:t.canonicalString()}}function o1(t){return rM.fromServerFormat(t.fieldPath)}function o2(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e+="\x01\x01"),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\x00":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return e+"\x01\x01"}function o4(t){var e=t.length;if(e>=2||rE(),2===e)return"\x01"===t.charAt(0)&&"\x01"===t.charAt(1)||rE(),rP.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&rE(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s)+"\x00";break;case"\x11":i+=t.substring(o,s+1);break;default:rE()}o=s+2}return new rP(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o6=function(t,e){this.seconds=t,this.nanoseconds=e},o5=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};o5.store="owner",o5.key="owner";var o8=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};o8.store="mutationQueues",o8.keyPath="userId";var o9=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};o9.store="mutations",o9.keyPath="batchId",o9.userMutationsIndex="userMutationsIndex",o9.userMutationsKeyPath=["userId","batchId"];var o7=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,o3(e)]},t.key=function(t,e,n){return[t,o3(e),n]},t}();o7.store="documentMutations",o7.PLACEHOLDER=new o7;var st=function(t,e){this.path=t,this.readTime=e},se=function(t,e){this.path=t,this.version=e},sn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};sn.store="remoteDocuments",sn.readTimeIndex="readTimeIndex",sn.readTimeIndexPath="readTime",sn.collectionReadTimeIndex="collectionReadTimeIndex",sn.collectionReadTimeIndexPath=["parentPath","readTime"];var sr=function(t){this.byteSize=t};sr.store="remoteDocumentGlobal",sr.key="remoteDocumentGlobalKey";var si=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};si.store="targets",si.keyPath="targetId",si.queryTargetsIndexName="queryTargetsIndex",si.queryTargetsKeyPath=["canonicalId","targetId"];var so=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};so.store="targetDocuments",so.keyPath=["targetId","path"],so.documentTargetsIndex="documentTargetsIndex",so.documentTargetsKeyPath=["path","targetId"];var ss=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ss.key="targetGlobalKey",ss.store="targetGlobal";var sa=function(t,e){this.collectionId=t,this.parent=e};sa.store="collectionParents",sa.keyPath=["collectionId","parent"];var su=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};su.store="clientMetadata",su.keyPath="clientId";var sc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};sc.store="bundles",sc.keyPath="bundleId";var sh=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};sh.store="namedQueries",sh.keyPath="name";var sl=f(f([],f(f([],f(f([],f(f([],[o8.store,o9.store,o7.store,sn.store,si.store,o5.store,ss.store,so.store]),[su.store])),[sr.store])),[sa.store])),[sc.store,sh.store]),sf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),sd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sv=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&rE(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0;i<e.length;i++)r(e[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),sg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new sd,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new sb(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=sE(e.target.error);n.ft.reject(new sb(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(t){throw new sb(n,t)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(rw("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){return new s_(this.transaction.objectStore(t))},t}(),sm=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(y())&&r_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return rw("SimpleDb","Removing database:",t),sI(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=y(),n=t._t(e),r=t.Et(e);return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||0<n&&n<10||0<r&&r<4.5)},t.gt=function(){var t;return void 0!==rd&&"YES"===(null===(t=rd.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(e?e[1].split("_").slice(0,2).join("."):"-1")},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i);return Number(e?e[1].split(".").slice(0,2).join("."):"-1")},t.prototype.At=function(t){return u(this,void 0,void 0,function(){var e,n=this;return c(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(rw("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new sb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new rm(rg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new sb(t,n))},i.onupgradeneeded=function(t){rw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next(function(){rw("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return u(this,void 0,void 0,function(){var i,o,s,a,u;return c(this,function(h){switch(h.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,h,l;return c(this,function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=c.sent(),s=r(e=sg.open(a.db,t,i?"readonly":"readwrite",n)).catch(function(t){return e.abort(t),sv.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return l="FirebaseError"!==(h=c.sent()).name&&o<3,rw("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}})},a=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=h.sent()))return[2,u.value];h.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),sy=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return sI(this.Pt.delete())},t}(),sb=function(t){function e(e,n){var r=this;return(r=t.call(this,rg.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return s(e,t),e}(rm);function sw(t){return"IndexedDbTransactionError"===t.name}var s_=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(rw("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(rw("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),sI(n)},t.prototype.add=function(t){return rw("SimpleDb","ADD",this.store.name,t,t),sI(this.store.add(t))},t.prototype.get=function(t){var e=this;return sI(this.store.get(t)).next(function(n){return void 0===n&&(n=null),rw("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return rw("SimpleDb","DELETE",this.store.name,t),sI(this.store.delete(t))},t.prototype.count=function(){return rw("SimpleDb","COUNT",this.store.name),sI(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){rw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){e?n=t:(n={},e=t);var n,r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new sv(function(n,r){e.onerror=function(t){r(sE(t.target.error))},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sv(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sy(i),s=e(i.primaryKey,i.value,o);if(s instanceof sv){var a=s.catch(function(t){return o.done(),sv.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return sv.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function sI(t){return new sv(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(sE(t.target.error))}})}var sT=!1;function sE(t){var e=sm._t(y());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new rm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return sT||(sT=!0,setTimeout(function(){throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return s(e,t),e}(sp);function sA(t,e){return sm.It(t.Mt,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sk=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&function(t,e,n){var r,i;t instanceof i3?(r=t.value.clone(),i=i5(t.fieldTransforms,e,n.transformResults),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()):t instanceof i4?function(t,e,n){if(i$(t.precondition,e)){var r=i5(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(i6(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e,n=0,r=this.baseMutations;n<r.length;n++)(e=r[n]).key.isEqual(t.key)&&i0(e,t,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++)(e=o[i]).key.isEqual(t.key)&&i0(e,t,this.localWriteTime)},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key);e.applyToLocalView(r),r.isValidDocument()||r.convertToNoDocument(rC.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ow())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&rk(this.mutations,t.mutations,function(t,e){return i1(t,e)})&&rk(this.baseMutations,t.baseMutations,function(t,e){return i1(t,e)})},t}(),sN=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){e.mutations.length===r.length||rE();for(var i=oy,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),sC=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=rC.min()),void 0===o&&(o=rC.min()),void 0===s&&(s=rF.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),sR=function(t){this.Lt=t};function sD(t,e){if(e.document)return oz(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=rQ.fromSegments(e.noDocument.path),r=sM(e.noDocument.readTime),i=r7.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=rQ.fromSegments(e.unknownDocument.path);return r=sM(e.unknownDocument.version),r7.newUnknownDocument(o,r)}return rE()}function sO(t,e,n){var r=sx(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o,s={name:oV(o=t.Lt,e.key),fields:e.data.value.mapValue.fields,updateTime:oP(o,e.version.toTimestamp())},a=e.hasCommittedMutations;return new sn(null,null,s,a,r,i)}if(e.isNoDocument()){var u=e.key.path.toArray(),c=sL(e.version);return a=e.hasCommittedMutations,new sn(null,new st(u,c),null,a,r,i)}return e.isUnknownDocument()?new sn(new se(e.key.path.toArray(),sL(e.version)),null,null,!0,r,i):rE()}function sx(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sP(t){var e=new rN(t[0],t[1]);return rC.fromTimestamp(e)}function sL(t){var e=t.toTimestamp();return new o6(e.seconds,e.nanoseconds)}function sM(t){var e=new rN(t.seconds,t.nanoseconds);return rC.fromTimestamp(e)}function sU(t,e){for(var n=(e.baseMutations||[]).map(function(e){return oQ(t.Lt,e)}),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map(function(e){return oQ(t.Lt,e)}),a=rN.fromMillis(e.localWriteTimeMs);return new sk(e.batchId,a,n,s)}function sF(t){var e,n,r=sM(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?sM(t.lastLimboFreeSnapshotVersion):rC.min();return void 0!==t.query.documents?(1===(n=t.query).documents.length||rE(),e=iC(iI(oB(n.documents[0])))):e=iC(oJ(t.query)),new sC(e,t.targetId,0,t.lastListenSequenceNumber,r,i,rF.fromBase64String(t.resumeToken))}function sV(t,e){var n,r=sL(e.snapshotVersion),i=sL(e.lastLimboFreeSnapshotVersion);n=io(e.target)?oX(t.Lt,e.target):oY(t.Lt,e.target);var o=e.resumeToken.toBase64();return new si(e.targetId,ir(e.target),r,o,e.sequenceNumber,i,n)}function sj(t){var e=oJ({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?iR(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sq=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return sB(t).get(e).next(function(t){if(t)return{id:t.bundleId,createTime:sM(t.createTime),version:t.version}})},t.prototype.saveBundleMetadata=function(t,e){return sB(t).put({bundleId:e.id,createTime:sL(oM(e.createTime)),version:e.version})},t.prototype.getNamedQuery=function(t,e){return sK(t).get(e).next(function(t){if(t)return{name:t.name,query:sj(t.bundledQuery),readTime:sM(t.readTime)}})},t.prototype.saveNamedQuery=function(t,e){return sK(t).put({name:e.name,readTime:sL(oM(e.readTime)),bundledQuery:e.bundledQuery})},t}();function sB(t){return sA(t,sc.store)}function sK(t){return sA(t,sh.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sG=function(){function t(){this.Bt=new sH}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sv.resolve()},t.prototype.getCollectionParents=function(t,e){return sv.resolve(this.Bt.getEntries(e))},t}(),sH=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new od(rP.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new od(rP.comparator)).toArray()},t}(),sz=function(){function t(){this.qt=new sH}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:o3(i)};return sW(t).put(o)}return sv.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[e+"\x00",""],!1,!0);return sW(t).Nt(r).next(function(t){for(var r=0;r<t.length;r++){var i=t[r];if(i.collectionId!==e)break;n.push(o4(i.parent))}return n})},t}();function sW(t){return sA(t,sa.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sX=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(t,e,n){var r=t.store(o9.store),i=t.store(o7.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){1===a||rE()}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=o7.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return sv.waitFor(o).next(function(){return c})}function sJ(t){var e;if(!t)return 0;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw rE();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sX.DEFAULT_COLLECTION_PERCENTILE=10,sX.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sX.DEFAULT=new sX(41943040,sX.DEFAULT_COLLECTION_PERCENTILE,sX.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sX.DISABLED=new sX(-1,0,0);var s$=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return""!==e.uid||rE(),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return s0(t).$t({index:o9.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=s1(t),s=s0(t);return s.add({}).next(function(a){"number"==typeof a||rE();for(var u,c,h,l,f=new sk(a,e,n,r),p=(u=i.R,c=i.userId,h=f.baseMutations.map(function(t){return oW(u.Lt,t)}),l=f.mutations.map(function(t){return oW(u.Lt,t)}),new o9(c,f.batchId,f.localWriteTime.toMillis(),h,l)),d=[],v=new od(function(t,e){return rA(t.canonicalString(),e.canonicalString())}),g=0;g<r.length;g++){var m=r[g],y=o7.key(i.userId,m.key.path,a);v=v.add(m.key.path.popLast()),d.push(s.put(p)),d.push(o.put(y,o7.PLACEHOLDER))}return v.forEach(function(e){d.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=f.keys()}),sv.waitFor(d).next(function(){return f})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return s0(t).get(e).next(function(t){return t?(t.userId===n.userId||rE(),sU(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?sv.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return s0(t).$t({index:o9.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(e.batchId>=r||rE(),o=sU(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return s0(t).$t({index:o9.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return s0(t).Nt(o9.userMutationsIndex,n).next(function(t){return t.map(function(t){return sU(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=o7.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return s1(t).$t({range:i},function(r,i,s){var a=r[0],u=r[1],c=r[2],h=o4(u);if(a===n.userId&&e.path.isEqual(h))return s0(t).get(c).next(function(t){if(!t)throw rE();t.userId===n.userId||rE(),o.push(sU(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(rA),i=[];return e.forEach(function(e){var o=o7.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=s1(t).$t({range:s},function(t,i,o){var s=t[0],a=t[1],u=t[2],c=o4(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()});i.push(a)}),sv.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=o7.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new od(rA);return s1(t).$t({range:s},function(t,e,o){var s=t[0],u=t[1],c=t[2],h=o4(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(s0(t).get(e).next(function(t){if(null===t)throw rE();t.userId===n.userId||rE(),r.push(sU(n.R,t))}))}),sv.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return sY(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sv.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sv.resolve();var r=IDBKeyRange.lowerBound(o7.prefixForUser(e.userId)),i=[];return s1(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=o4(t[1]);i.push(o)}else r.done()}).next(function(){0===i.length||rE()})})},t.prototype.containsKey=function(t,e){return sZ(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return s2(t).get(this.userId).next(function(t){return t||new o8(e.userId,-1,"")})},t}();function sZ(t,e,n){var r=o7.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return s1(t).$t({range:o,kt:!0},function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()}).next(function(){return s})}function s0(t){return sA(t,o9.store)}function s1(t){return sA(t,o7.store)}function s2(t){return sA(t,o8.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s3=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),s4=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new s3(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return rC.fromTimestamp(new rN(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return s6(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return e.targetCount>0||rE(),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return s6(t).$t(function(s,a){var u=sF(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return sv.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return s6(t).$t(function(t,n){e(sF(n))})},t.prototype.Xt=function(t){return s5(t).get(ss.key).next(function(t){return null!==t||rE(),t})},t.prototype.Zt=function(t,e){return s5(t).put(ss.key,e)},t.prototype.te=function(t,e){return s6(t).put(sV(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ir(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return s6(t).$t({range:r,index:si.queryTargetsIndexName},function(t,n,r){var o=sF(n);ii(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=s8(t);return e.forEach(function(e){var s=o3(e.path);i.push(o.put(new so(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),sv.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=s8(t);return sv.forEach(e,function(e){var o=o3(e.path);return sv.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=s8(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=s8(t),i=ow();return r.$t({range:n,kt:!0},function(t,e,n){var r=new rQ(o4(t[1]));i=i.add(r)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=o3(e.path),r=IDBKeyRange.bound([n],[n+"\x00"],!1,!0),i=0;return s8(t).$t({index:so.documentTargetsIndex,kt:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return s6(t).get(e).next(function(t){return t?sF(t):null})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return sA(t,si.store)}function s5(t){return sA(t,ss.store)}function s8(t){return sA(t,so.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){return u(this,void 0,void 0,function(){return c(this,function(e){if(t.code!==rg.FAILED_PRECONDITION||t.message!==sf)throw t;return rw("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=rA(n,i);return 0===s?rA(r,o):s}var at=function(){function t(t){this.ne=t,this.buffer=new od(s7),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();0>s7(e,n)&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ae=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;rw("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return u(e,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return sw(e=n.sent())?(rw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,s9(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),an=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sv.resolve(rv.o);var r=new at(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return -1===this.params.cacheSizeCollectionThreshold?(rw("LruGarbageCollector","Garbage collection skipped; disabled"),sv.resolve(sQ)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(rw("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),sQ):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(rw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),rb()<=te.DEBUG&&rw("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in "+(o-h)+"ms\n	Determined least recently used "+r+" in "+(s-o)+"ms\n	Removed "+i+" targets in "+(a-s)+"ms\n	Removed "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),sv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),ar=function(){function t(t,e){this.db=t,this.garbageCollector=new an(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return ai(t,n)},t.prototype.removeReference=function(t,e,n){return ai(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ai(t,e)},t.prototype._e=function(t,e){var n;return n=!1,s2(t).Ot(function(r){return sZ(t,r,e).next(function(t){return t&&(n=!0),sv.resolve(!t)})}).next(function(){return n})},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),s8(t).delete([0,o3(s.path)])})});i.push(u)}}).next(function(){return sv.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ai(t,e)},t.prototype.we=function(t,e){var n,r=s8(t),i=rv.o;return r.$t({index:so.documentTargetsIndex},function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==rv.o&&e(new rQ(o4(n)),i),i=a,n=s):i=rv.o}).next(function(){i!==rv.o&&e(new rQ(o4(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ai(t,e){var n;return s8(t).put((n=t.currentSequenceNumber,new so(0,o3(e.path),n)))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ao=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0;r<n.length;r++){var i=n[r],o=i[0],s=i[1];if(this.equalsFn(o,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){rD(this.inner,function(e,n){for(var r=0;r<n.length;r++){var i=n[r];t(i[0],i[1])}})},t.prototype.isEmpty=function(){return rO(this.inner)},t}(),as=function(){function t(){this.changes=new ao(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:rC.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:r7.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sv.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),aa=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ah(t).put(al(e),n)},t.prototype.removeEntry=function(t,e){var n=ah(t),r=al(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return ah(t).get(al(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return ah(t).get(al(e)).next(function(t){return{document:n.ye(e,t),size:sJ(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=og;return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=og,i=new ol(rQ.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,sJ(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sv.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ah(t).$t({range:r},function(t,e,r){for(var s=rQ.fromSegments(t);o&&0>rQ.comparator(o,s);)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=og,o=e.path.length+1,s={};if(n.isEqual(rC.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=sx(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=sn.collectionReadTimeIndex}return ah(t).$t(s,function(t,n,s){if(t.length===o){var a=sD(r.R,n);e.path.isPrefixOf(a.key.path)?iP(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new au(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ac(t).get(sr.key).next(function(t){return t||rE(),t})},t.prototype.me=function(t,e){return ac(t).put(sr.key,e)},t.prototype.ye=function(t,e){if(e){var n=sD(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(rC.min()))return n}return r7.newInvalidDocument(t)},t}(),au=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ao(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return s(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new od(function(t,e){return rA(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=sO(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=sJ(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=sO(e.Ie.R,r7.newNoDocument(o,rC.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sv.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(as);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(t){return sA(t,sr.store)}function ah(t){return sA(t,sn.store)}function al(t){return t.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var af=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;n<r&&n>=0&&r<=11||rE();var o=new sg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(o5.store)}(t),t.createObjectStore(o8.store,{keyPath:o8.keyPath}),t.createObjectStore(o9.store,{keyPath:o9.keyPath,autoIncrement:!0}).createIndex(o9.userMutationsIndex,o9.userMutationsKeyPath,{unique:!0}),t.createObjectStore(o7.store),ap(t),function(t){t.createObjectStore(sn.store)}(t));var s=sv.resolve();return n<3&&r>=3&&(0!==n&&(t.deleteObjectStore(so.store),t.deleteObjectStore(si.store),t.deleteObjectStore(ss.store),ap(t)),s=s.next(function(){var t,e;return t=o.store(ss.store),e=new ss(0,0,rC.min().toTimestamp(),0),t.put(ss.key,e)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return o.store(o9.store).Nt().next(function(e){t.deleteObjectStore(o9.store),t.createObjectStore(o9.store,{keyPath:o9.keyPath,autoIncrement:!0}).createIndex(o9.userMutationsIndex,o9.userMutationsKeyPath,{unique:!0});var n=o.store(o9.store),r=e.map(function(t){return n.put(t)});return sv.waitFor(r)})})),s=s.next(function(){!function(t){t.createObjectStore(su.store,{keyPath:su.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(sr.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){var n;t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(sn.store)).createIndex(sn.readTimeIndex,sn.readTimeIndexPath,{unique:!1}),n.createIndex(sn.collectionReadTimeIndex,sn.collectionReadTimeIndexPath,{unique:!1})})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){(function(t){t.createObjectStore(sc.store,{keyPath:sc.keyPath})})(t),function(t){t.createObjectStore(sh.store,{keyPath:sh.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(sn.store).$t(function(t,n){e+=sJ(n)}).next(function(){var n=new sr(e);return t.store(sr.store).put(sr.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(o8.store),r=t.store(o9.store);return n.Nt().next(function(n){return sv.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(o9.userMutationsIndex,i).next(function(r){return sv.forEach(r,function(r){r.userId===n.userId||rE();var i=sU(e.R,r);return sY(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(so.store),n=t.store(sn.store);return t.store(ss.store).get(ss.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new rP(n),s=[0,o3(o)];r.push(e.get(s).next(function(n){return n?sv.resolve():e.put(new so(0,o3(o),t.highestListenSequenceNumber))}))}).next(function(){return sv.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(sa.store,{keyPath:sa.keyPath});var n=e.store(sa.store),r=new sH,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:o3(i)})}};return e.store(sn.store).$t({kt:!0},function(t,e){return i(new rP(t).popLast())}).next(function(){return e.store(o7.store).$t({kt:!0},function(t,e){t[0];var n=t[1];return t[2],i(o4(n).popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(si.store);return n.$t(function(t,r){var i=sF(r),o=sV(e.R,i);return n.put(o)})},t}();function ap(t){t.createObjectStore(so.store,{keyPath:so.keyPath}).createIndex(so.documentTargetsIndex,so.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(si.store,{keyPath:si.keyPath}).createIndex(si.queryTargetsIndexName,si.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ss.store)}var ad="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",av=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new rm(rg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ar(this,i),this.Le=n+"main",this.R=new sR(u),this.Be=new sm(this.Le,11,new af(this.R)),this.qe=new s4(this.referenceDelegate,this.R),this.Ut=new sz,this.Ue=new aa(this.R,this.Ut),this.Ke=new sq,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&r_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new rm(rg.FAILED_PRECONDITION,ad);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new rv(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return u(e,void 0,void 0,function(){return c(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return u(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return u(e,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return am(e).put(new su(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(sw(e))return rw("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return rw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return ag(t).get(o5.key).next(function(t){return sv.resolve(e.tn(t))})},t.prototype.en=function(t){return am(t).delete(this.clientId)},t.prototype.nn=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i=this;return c(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=sA(t,su.store);return e.Nt().next(function(t){var n=i.rn(t,18e5),r=t.filter(function(t){return -1===n.indexOf(t)});return sv.forEach(r,function(t){return e.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sv.resolve(!0):ag(t).get(o5.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new rm(rg.FAILED_PRECONDITION,ad);return!1}}return!(!e.networkEnabled||!e.inForeground)||am(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(t){return e.isPrimary!==t&&rw("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return u(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[o5.store,su.store],function(e){var n=new sS(e,rv.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return am(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return s$.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return rw("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",sl,function(o){return r=new sS(o,i.Ne?i.Ne.next():rv.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw r_("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new rm(rg.FAILED_PRECONDITION,sf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return ag(t).get(o5.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new rm(rg.FAILED_PRECONDITION,ad)})},t.prototype.Ze=function(t){var e=new o5(this.clientId,this.allowTabSynchronization,Date.now());return ag(t).put(o5.key,e)},t.yt=function(){return sm.yt()},t.prototype.Xe=function(t){var e=this,n=ag(t);return n.get(o5.key).next(function(t){return e.tn(t)?(rw("IndexedDbPersistence","Releasing primary lease."),n.delete(o5.key)):sv.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(r_("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return rw("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return r_("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){r_("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ag(t){return sA(t,o5.store)}function am(t){return sA(t,su.store)}function ay(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ab=function(t,e){this.progress=t,this.wn=e},aw=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0;e<n.length;e++)n[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0;r<e.length;r++)e[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return rQ.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length?this.Tn(t,e.path):ik(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new rQ(e)).next(function(t){var e=om;return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=om;return this.Ut.getCollectionParents(t,i).next(function(s){return sv.forEach(s,function(s){var a=new i_(s.child(i),null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt);return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return i=e,o.Rn(t,i,r).next(function(t){r=t;for(var e=0;e<i.length;e++)for(var n=i[e],o=0,s=n.mutations;o<s.length;o++){var a=s[o],u=a.key,c=r.get(u);null==c&&(c=r7.newInvalidDocument(u),r=r.insert(u,c)),i0(a,c,n.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}})}).next(function(){return r.forEach(function(t,n){iP(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=ow(),i=0;i<e.length;i++)for(var o=0,s=e[i].mutations;o<s.length;o++){var a=s[o];a instanceof i4&&null===n.get(a.key)&&(r=r.add(a.key))}var u=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(u=u.insert(t,e))}),u})},t}(),a_=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ow(),i=ow(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),aI=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())||n.isEqual(rC.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(iT(e)||iE(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(rb()<=te.DEBUG&&rw("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ix(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new od(iL(t));return e.forEach(function(e,r){iP(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return rb()<=te.DEBUG&&rw("QueryEngine","Using full collection scan to execute query:",ix(e)),this.Sn.getDocumentsMatchingQuery(t,e,rC.min())},t}(),aT=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new ol(rA),this.kn=new ao(function(t){return ir(t)},ii),this.$n=rC.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new aw(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function aE(t,e){return u(this,void 0,void 0,function(){var n,r,i,o;return c(this,function(s){switch(s.label){case 0:return r=(n=t)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new aw(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=ow(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0;p<e.length;p++){var d=e[p];r.push(d.batchId);for(var v=0,g=d.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function aS(t){return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.qe.getLastRemoteSnapshotVersion(e)})}function aA(t,e,n,r,i){var o=ow();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=og;return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(rC.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):rw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function ak(t,e){return t.persistence.runTransaction("Allocate target","readwrite",function(n){var r;return t.qe.getTargetData(n,e).next(function(i){return i?(r=i,sv.resolve(r)):t.qe.allocateTargetId(n).next(function(i){return r=new sC(e,i,0,n.currentSequenceNumber),t.qe.addTargetData(n,r).next(function(){return r})})})}).then(function(n){var r=t.Fn.get(n.targetId);return(null===r||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Fn=t.Fn.insert(n.targetId,n),t.kn.set(e,n.targetId)),n})}function aN(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,s;return c(this,function(a){switch(a.label){case 0:i=(r=t).Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!sw(s=a.sent()))throw s;return rw("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function aC(t,e,n){var r=rC.min(),i=ow();return t.persistence.runTransaction("Execute query","readonly",function(o){var s,a;return(s=iC(e),void 0!==(a=t.kn.get(s))?sv.resolve(t.Fn.get(a)):t.qe.getTargetData(o,s)).next(function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,t.qe.getMatchingKeysForTargetId(o,e.targetId).next(function(t){i=t})}).next(function(){return t.xn.getDocumentsMatchingQuery(o,e,n?r:rC.min(),n?i:ow())}).next(function(t){return{documents:t,Bn:i}})})}function aR(t,e){var n=t.qe,r=t.Fn.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",function(t){return n.lt(t,e).next(function(t){return t?t.target:null})})}function aD(t){return t.persistence.runTransaction("Get new document changes","readonly",function(e){var n,r,i,o,s,a;return n=t.On,r=t.$n,i=og,o=sx(r),s=ah(e),a=IDBKeyRange.lowerBound(o,!0),s.$t({index:sn.readTimeIndex,range:a},function(t,e){var r=sD(n.R,e);i=i.insert(r.key,r),o=e.readTime}).next(function(){return{wn:i,readTime:sP(o)}})}).then(function(e){var n=e.wn,r=e.readTime;return t.$n=r,n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aO=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sv.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){return this.Qn.set(e.id,{id:e.id,version:e.version,createTime:oM(e.createTime)}),sv.resolve()},t.prototype.getNamedQuery=function(t,e){return sv.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:e.name,query:sj(e.bundledQuery),readTime:oM(e.readTime)}),sv.resolve()},t}(),ax=function(){function t(){this.Wn=new od(aP.Gn),this.zn=new od(aP.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new aP(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new aP(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new rQ(new rP([])),r=new aP(n,t),i=new aP(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new rQ(new rP([])),n=new aP(e,t),r=new aP(e,t+1),i=ow();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new aP(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),aP=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return rQ.comparator(t.key,e.key)||rA(t.ns,e.ns)},t.Hn=function(t,e){return rA(t.ns,e.ns)||rQ.comparator(t.key,e.key)},t}(),aL=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new od(aP.Gn)}return t.prototype.checkEmpty=function(t){return sv.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new sk(i,e,n,r);this._n.push(o);for(var s=0;s<r.length;s++){var a=r[s];this.rs=this.rs.add(new aP(a.key,i)),this.Ut.addToCollectionParentIndex(t,a.key.path.popLast())}return sv.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sv.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sv.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sv.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sv.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new aP(e,0),i=new aP(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),sv.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new od(rA);return e.forEach(function(t){var e=new aP(t,0),i=new aP(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sv.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;rQ.isDocumentKey(i)||(i=i.child(""));var o=new aP(new rQ(i),0),s=new od(rA);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),sv.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;0===this.hs(e.batchId,"removed")||rE(),this._n.shift();var r=this.rs;return sv.forEach(e.mutations,function(i){var o=new aP(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new aP(e,0),r=this.rs.firstAfterOrEqual(n);return sv.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,sv.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),aM=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new ol(rQ.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sv.resolve(n?n.document.clone():r7.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=og;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():r7.newInvalidDocument(t))}),sv.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=og,i=new rQ(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;0>=h.compareTo(n)||iP(e,c)&&(r=r.insert(c.key,c.clone()))}return sv.resolve(r)},t.prototype.fs=function(t,e){return sv.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new aU(this)},t.prototype.getSize=function(t){return sv.resolve(this.size)},t}(),aU=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return s(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sv.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(as),aF=function(){function t(t){this.persistence=t,this.ds=new ao(function(t){return ir(t)},ii),this.lastRemoteSnapshotVersion=rC.min(),this.highestTargetId=0,this.ws=0,this._s=new ax,this.targetCount=0,this.ys=s3.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sv.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sv.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sv.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sv.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sv.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new s3(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sv.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sv.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sv.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sv.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return sv.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sv.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sv.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sv.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sv.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sv.resolve(n)},t.prototype.containsKey=function(t,e){return sv.resolve(this._s.containsKey(e))},t}(),aV=function(){function t(t,e){var n=this;this.gs={},this.Ne=new rv(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new aF(this),this.Ut=new sG,this.Ue=new aM(this.Ut,function(t){return n.referenceDelegate.ps(t)}),this.R=new sR(e),this.Ke=new aO(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new aL(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;rw("MemoryPersistence","Starting transaction:",t);var i=new aj(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sv.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),aj=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return s(e,t),e}(sp),aq=function(){function t(t){this.persistence=t,this.As=new ax,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw rE()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sv.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sv.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sv.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sv.forEach(this.vs,function(r){var i=rQ.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sv.or([function(){return sv.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),aB=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t,e){return"firestore_clients_"+t+"_"+e}function aG(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function aH(t,e){return"firestore_targets_"+t+"_"+e}aB.UNAUTHENTICATED=new aB(null),aB.GOOGLE_CREDENTIALS=new aB("google-credentials-uid"),aB.FIRST_PARTY=new aB("first-party-uid");var az=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new rm(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(r_("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),aW=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new rm(i.error.code,i.error.message)),o?new t(e,i.state,r):(r_("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),aQ=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=o_,s=0;i&&s<r.activeTargetIds.length;++s)i=rW(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(r_("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),aX=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(r_("SharedClientState","Failed to parse online state: "+e),null)},t}(),aY=function(){function t(){this.activeTargetIds=o_}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})},t}(),aJ=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new ol(rA),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=aK(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new aY),this.Ls=RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,h,l,f=this;return c(this,function(c){switch(c.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=c.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(aK(this.persistenceKey,r)))&&(o=aQ.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,h=this.$s;u<h.length;u++)l=h[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",function(){return f.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(aH(this.persistenceKey,t));if(n){var r=aW.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(aH(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return rw("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){rw("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){rw("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this;if(t.storageArea===this.storage){if(rw("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Os)return void r_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return u(e,void 0,void 0,function(){var e,n,r,i,o,s;return c(this,function(a){if(this.started){if(null!==t.key){if(this.Ls.test(t.key)){if(null==t.newValue)return e=this.ti(t.key),[2,this.ei(e,null)];if(n=this.ni(t.key,t.newValue))return[2,this.ei(n.clientId,n)]}else if(this.Bs.test(t.key)){if(null!==t.newValue&&(r=this.si(t.key,t.newValue)))return[2,this.ii(r)]}else if(this.qs.test(t.key)){if(null!==t.newValue&&(i=this.ri(t.key,t.newValue)))return[2,this.oi(i)]}else if(t.key===this.Us){if(null!==t.newValue&&(o=this.js(t.newValue)))return[2,this.Ws(o)]}else if(t.key===this.Ms)(s=function(t){var e=rv.o;if(null!=t)try{var n=JSON.parse(t);"number"==typeof n||rE(),e=n}catch(t){r_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==rv.o&&this.sequenceNumberHandler(s);else if(t.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(t);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new az(this.currentUser,t,e,n),i=aG(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=aG(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=aH(this.persistenceKey,t),i=new aW(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return aQ.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return az.Vs(new aB(i),r,e)},t.prototype.ri=function(t,e){var n=Number(this.qs.exec(t)[1]);return aW.Vs(n,e)},t.prototype.js=function(t){return aX.Vs(t)},t.prototype.ii=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(rw("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=o_;return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),a$=function(){function t(){this.li=new aY,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new aY,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),aZ=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),a0=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){rw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){rw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),a1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},a2=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),a3=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return s(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new nU;s.listenOnce(eO.COMPLETE,function(){try{switch(s.getLastErrorCode()){case eD.NO_ERROR:var e=s.getResponseJson();rw("Connection","XHR received:",JSON.stringify(e)),i(e);break;case eD.TIMEOUT:rw("Connection",'RPC "'+t+'" timed out'),o(new rm(rg.DEADLINE_EXCEEDED,"Request time out"));break;case eD.HTTP_ERROR:var n=s.getStatus();if(rw("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a,u=(a=r.status.toLowerCase().replace(/_/g,"-"),Object.values(rg).indexOf(a)>=0?a:rg.UNKNOWN);o(new rm(u,r.message))}else o(new rm(rg.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new rm(rg.UNAVAILABLE,"Connection failed."));break;default:rE()}}finally{rw("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new ru,s=eE(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new nR({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())||"object"==typeof navigator&&"ReactNative"===navigator.product||y().indexOf("Electron/")>=0||(n=y()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0||y().indexOf("MSAppHost/")>=0||"object"==typeof(r="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==r.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");rw("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),h=!1,l=!1,f=new a2({Ei:function(t){l?rw("Connection","Not sending because WebChannel is closed:",t):(h||(rw("Connection","Opening WebChannel transport."),c.open(),h=!0),rw("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return p(c,eL.EventType.OPEN,function(){l||rw("Connection","WebChannel transport opened.")}),p(c,eL.EventType.CLOSE,function(){l||(l=!0,rw("Connection","WebChannel transport closed"),f.Vi())}),p(c,eL.EventType.ERROR,function(t){l||(l=!0,rI("Connection","WebChannel transport errored:",t),f.Vi(new rm(rg.UNAVAILABLE,"The operation could not be completed")))}),p(c,eL.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];n||rE();var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){rw("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=oi[t];if(void 0!==e)return oh(e)}(i),s=r.message;void 0===o&&(o=rg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.Vi(new rm(o,s)),c.close()}else rw("Connection","WebChannel received:",n),f.Si(n)}}),p(s,eI.STAT_EVENT,function(t){t.stat===rp.PROXY?rw("Connection","Detected buffering proxy"):t.stat===rp.NOPROXY&&rw("Connection","Detected no buffering proxy")}),setTimeout(function(){f.Pi()},0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);rw("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return rw("RestConnection","Received: ",t),t},function(e){throw rI("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=a1[t];return this.Di+"/v1/"+e+":"+n},t}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(){return"undefined"!=typeof window?window:null}function a6(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){return new ox(t,!0)}var a8=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&rw("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),a9=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new a8(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===rg.RESOURCE_EXHAUSTED?(r_(e.toString()),r_("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===rg.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new rm(rg.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return u(t,void 0,void 0,function(){return c(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return rw("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(rw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),a7=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return s(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r,i,o,s="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:rE(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.I?(void 0===i||"string"==typeof i||rE(),rF.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||rE(),rF.fromUint8Array(i||new Uint8Array))),c=(h=e.targetChange.cause)&&new rm(void 0===(o=h).code?rg.UNKNOWN:oh(o.code),o.message||"");n=new oA(s,a,u,c||null)}else if("documentChange"in e){e.documentChange,(s=e.documentChange).document,s.document.name,s.document.updateTime,a=oj(t,s.document.name),u=oM(s.document.updateTime);var h=new r9({mapValue:{fields:s.document.fields}});n=new oE((c=r7.newFoundDocument(a,u,h),s.targetIds||[]),s.removedTargetIds||[],c.key,c)}else if("documentDelete"in e)e.documentDelete,(s=e.documentDelete).document,a=oj(t,s.document),u=s.readTime?oM(s.readTime):rC.min(),h=r7.newNoDocument(a,u),n=new oE([],c=s.removedTargetIds||[],h.key,h);else if("documentRemove"in e)e.documentRemove,(s=e.documentRemove).document,a=oj(t,s.document),n=new oE([],u=s.removedTargetIds||[],a,null);else{if(!("filter"in e))return rE();e.filter;var l=e.filter;l.targetId,a=new ou(s=l.count||0),n=new oS(u=l.targetId,a)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return rC.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?rC.min():e.readTime?oM(e.readTime):rC.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=oK(this.R),o.addTarget=(e=this.R,(n=io(r=t.target)?{documents:oX(e,r)}:{query:oY(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=oL(e,t.resumeToken):t.snapshotVersion.compareTo(rC.min())>0&&(n.readTime=oP(e,t.snapshotVersion.toTimestamp())),n);var s=(this.R,null==(i=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rE()}}(0,t.purpose))?null:{"goog-listen-tags":i});s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=oK(this.R),e.removeTarget=t,this.cr(e)},e}(a9),ut=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return s(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(t.streamToken||rE(),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e,n,r=(e=t.writeResults,n=t.commitTime,e&&e.length>0?(void 0!==n||rE(),e.map(function(t){var e;return(e=t.updateTime?oM(t.updateTime):oM(n)).isEqual(rC.min())&&(e=oM(n)),new iY(e,t.transformResults||[])})):[]),i=oM(t.commitTime);return this.listener.Tr(i,r)}return t.writeResults&&0!==t.writeResults.length&&rE(),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=oK(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return oW(e.R,t)})};this.cr(n)},e}(a9),ue=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return s(e,t),e.prototype.br=function(){if(this.Rr)throw new rm(rg.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===rg.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new rm(rg.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===rg.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new rm(rg.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),un=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(r_(e),this.Vr=!1):rw("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ur=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return u(o,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return uf(this)?(rw("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return(e=t).Or.add(4),[4,uo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,ui(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new un(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:if(!uf(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function uo(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function us(t,e){t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),ul(t)?uh(t):uA(t).er()&&uu(t,e))}function ua(t,e){var n=uA(t);t.$r.delete(e),n.er()&&uc(t,e),0===t.$r.size&&(n.er()?n.ir():uf(t)&&t.Br.set("Unknown"))}function uu(t,e){t.qr.U(e.targetId),uA(t).mr(e)}function uc(t,e){t.qr.U(e),uA(t).yr(e)}function uh(t){t.qr=new oN({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),uA(t).start(),t.Br.Sr()}function ul(t){return uf(t)&&!uA(t).tr()&&t.$r.size>0}function uf(t){return 0===t.Or.size}function up(t){return u(this,void 0,void 0,function(){return c(this,function(e){return t.$r.forEach(function(e,n){uu(t,e)}),[2]})})}function ud(t,e){return u(this,void 0,void 0,function(){return c(this,function(n){return t.qr=void 0,ul(t)?(t.Br.Nr(e),uh(t)):t.Br.set("Unknown"),[2]})})}function uv(t,e,n){return u(this,void 0,void 0,function(){var r,i,o;return c(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof oA&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o;return c(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:case 4:return s.sent(),[3,5];case 3:return r=s.sent(),rw("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ug(t,r)];case 5:return[3,13];case 6:if(e instanceof oE?t.qr.X(e):e instanceof oS?t.qr.rt(e):t.qr.et(e),n.isEqual(rC.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,aS(t.localStore)];case 8:var a;return i=s.sent(),n.compareTo(i)>=0?[4,((a=t.qr.ut(n)).targetChanges.forEach(function(e,r){if(e.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(e.resumeToken,n))}}),a.targetMismatches.forEach(function(e){var n=t.$r.get(e);n&&(t.$r.set(e,n.withResumeToken(rF.EMPTY_BYTE_STRING,n.snapshotVersion)),uc(t,e),uu(t,new sC(n.target,e,1,n.sequenceNumber)))}),t.remoteSyncer.applyRemoteEvent(a))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return rw("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ug(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ug(t,e,n){return u(this,void 0,void 0,function(){var r=this;return c(this,function(i){switch(i.label){case 0:if(!sw(e))throw e;return t.Or.add(1),[4,uo(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return aS(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return u(r,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return rw("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,ui(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function um(t,e){return e().catch(function(n){return ug(t,n,e)})}function uy(t){return u(this,void 0,void 0,function(){var e,n,r,i,o;return c(this,function(s){var a,u,c;switch(s.label){case 0:n=uk(e=t),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(uf(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,(u=e.localStore,c=r,u.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===c&&(c=-1),u._n.getNextMutationBatchAfterBatchId(t,c)}))];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=uk(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ug(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ub(e)&&uw(e),[2]}})})}function ub(t){return uf(t)&&!uk(t).tr()&&t.kr.length>0}function uw(t){uk(t).start()}function u_(t){return u(this,void 0,void 0,function(){return c(this,function(e){return uk(t).Ar(),[2]})})}function uI(t){return u(this,void 0,void 0,function(){var e,n,r,i;return c(this,function(o){for(e=uk(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}function uT(t,e,n){return u(this,void 0,void 0,function(){var r,i;return c(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=sN.from(r,e,n),[4,um(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,uy(t)];case 2:return o.sent(),[2]}})})}function uE(t,e){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return e&&uk(t).pr?[4,function(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){switch(i.label){case 0:return oc(r=e.code)&&r!==rg.ABORTED?(n=t.kr.shift(),uk(t).sr(),[4,um(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,uy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ub(t)&&uw(t),[2]}})})}function uS(t,e){return u(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return n=t,e?(n.Or.delete(2),[4,ui(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,uo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function uA(t){var e,n,r,i=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:up.bind(null,t),Ri:ud.bind(null,t),_r:uv.bind(null,t)},e.br(),new a7(n,e.Hi,e.credentials,e.R,r)),t.Mr.push(function(e){return u(i,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return e?(t.Ur.sr(),ul(t)?uh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),t.qr=void 0,n.label=3;case 3:return[2]}})})})),t.Ur}function uk(t){var e,n,r,i=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:u_.bind(null,t),Ri:uE.bind(null,t),Ir:uI.bind(null,t),Tr:uT.bind(null,t)},e.br(),new ut(n,e.Hi,e.credentials,e.R,r)),t.Mr.push(function(e){return u(i,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,uy(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(rw("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}})})})),t.Kr}var uN=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rm(rg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function uC(t,e){if(r_("AsyncQueue",e+": "+t),sw(t))return new rm(rg.UNAVAILABLE,e+": "+t);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uR=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||rQ.comparator(e.key,n.key)}:function(t,e){return rQ.comparator(t.key,e.key)},this.keyedMap=om,this.sortedSet=new ol(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),uD=function(){function t(){this.Qr=new ol(rQ.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):rE():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),uO=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,uR.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&iD(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ux=function(){this.Wr=void 0,this.listeners=[]},uP=function(){this.queries=new ao(function(t){return iO(t)},iD),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s,a;return c(this,function(u){switch(u.label){case 0:if(n=t,r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ux),!i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=u.sent(),[3,4];case 3:return a=uC(u.sent(),"Initialization of query '"+ix(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&uV(n),[2]}})})}function uM(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s;return c(this,function(a){return n=t,r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function uU(t,e){for(var n=!1,r=0;r<e.length;r++){var i=e[r],o=i.query,s=t.queries.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].Hr(i)&&(n=!0);s.Wr=i}}n&&uV(t)}function uF(t,e,n){var r=t.queries.get(e);if(r)for(var i=0,o=r.listeners;i<o.length;i++)o[i].onError(n);t.queries.delete(e)}function uV(t){t.Gr.forEach(function(t){t.next()})}var uj=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new uO(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=uO.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),uq=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),uB=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return oj(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?oz(this.R,t.document,!1):r7.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return oM(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress={taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new uB(this.R),r=0;r<t.length;r++){var i=t[r];if(i.metadata.queries)for(var o=n.qn(i.metadata.name),s=0,a=i.metadata.queries;s<a.length;s++){var u=a[s],c=(e.get(u)||ow()).add(o);e.set(u,c)}}return e},t.prototype.complete=function(){return u(this,void 0,void 0,function(){var t,e,n,r,i;return c(this,function(o){switch(o.label){case 0:return[4,function(t,e,n,r){return u(this,void 0,void 0,function(){var i,o,s,a,u,h,l,f,p,d;return c(this,function(c){switch(c.label){case 0:for(i=t,o=ow(),s=og,a=oy,u=0,h=n;u<h.length;u++)l=h[u],f=e.qn(l.metadata.name),l.document&&(o=o.add(f)),s=s.insert(f,e.Un(l)),a=a.insert(f,e.Kn(l.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,ak(i,iC(iI(rP.fromString("__bundle__/docs/"+r))))];case 1:return d=c.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return aA(t,p,s,rC.min(),a).next(function(e){return p.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}(this.localStore,new uB(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,function(t,e,n){return void 0===n&&(n=ow()),u(this,void 0,void 0,function(){var r,i;return c(this,function(o){switch(o.label){case 0:return[4,ak(t,iC(sj(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=t).persistence.runTransaction("Save named query","readwrite",function(t){var o=oM(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(rF.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ab(Object.assign({},this.progress),t))]}})})}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uK=function(t){this.key=t},uG=function(t){this.key=t},uH=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ow(),this.mutatedKeys=ow(),this.lo=iL(t),this.fo=new uR(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new uD,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=iT(this.query)&&i.size===this.query.limit?i.last():null,c=iE(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var h=i.get(t),l=iP(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&0>n.lo(l,c))&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),iT(this.query)||iE(this.query))for(;s.size>this.query.limit;){var h=iT(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){var n,i,o;return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rE()}})(n)-o(i)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new uO(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new uD,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ow(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new uG(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new uK(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ow();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return uO.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),uz=function(t,e,n){this.query=t,this.targetId=e,this.view=n},uW=function(t){this.key=t,this.bo=!1},uQ=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ao(function(t){return iO(t)},iD),this.Vo=new Map,this.So=new Set,this.Do=new ol(rQ.comparator),this.Co=new Map,this.No=new ax,this.xo={},this.Fo=new Map,this.ko=s3.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function uX(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s,a;return c(this,function(u){switch(u.label){case 0:return(o=(n=cl(t)).Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ak(n.localStore,iC(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,uY(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&us(n.remoteStore,s),u.label=4;case 4:return[2,i]}})})}function uY(t,e,n,r){return u(this,void 0,void 0,function(){var i,o,s,a,h,l;return c(this,function(f){switch(f.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return u(this,void 0,void 0,function(){var i,o,s;return c(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,aC(t.localStore,e.query,!1).then(function(t){var n=t.documents;return e.view._o(n,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(u7(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,aC(t.localStore,e,!0)];case 1:return s=(o=new uH(e,(i=f.sent()).Bn))._o(i.documents),a=oT.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=o.applyChanges(s,t.isPrimaryClient,a),u7(t,n,h.To),l=new uz(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}})})}function uJ(t,e){return u(this,void 0,void 0,function(){var n,r,i;return c(this,function(o){switch(o.label){case 0:return r=(n=t).Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!iD(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,aN(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ua(n.remoteStore,r.targetId),u8(n,r.targetId)}).catch(s9)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return u8(n,r.targetId),[4,aN(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function u$(t,e,n){return u(this,void 0,void 0,function(){var r,i,o;return c(this,function(s){var a,u,c,h,l,f,p;switch(s.label){case 0:r=cf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(a=r.localStore,c=rN.now(),h=e.reduce(function(t,e){return t.add(e.key)},ow()),a.persistence.runTransaction("Locally write mutations","readwrite",function(t){return a.Mn.pn(t,h).next(function(n){u=n;for(var r=[],i=0;i<e.length;i++){var o=e[i],s=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=ij(o.transform,s||null);null!=a&&(null==n&&(n=r9.empty()),n.set(o.field,a))}return n||null}(o,u.get(o.key));null!=s&&r.push(new i4(o.key,s,function t(e){var n=[];return rD(e.fields,function(e,r){var i=new rM([e]);if(r5(r)){var o=t(r.mapValue).fields;if(0===o.length)n.push(i);else for(var s=0;s<o.length;s++){var a=o[s];n.push(i.child(a))}}else n.push(i)}),new rU(n)}(s.value.mapValue),iJ.exists(!0)))}return a._n.addMutationBatch(t,c,r,e)})}).then(function(t){return t.applyToLocalDocumentSet(u),{batchId:t.batchId,changes:u}}))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),l=r,f=i.batchId,(p=l.xo[l.currentUser.toKey()])||(p=new ol(rA)),p=p.insert(f,n),l.xo[l.currentUser.toKey()]=p,[4,ce(r,i.changes)];case 3:return s.sent(),[4,uy(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=uC(s.sent(),"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function uZ(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){var o,s,a;switch(i.label){case 0:n=t,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,(o=n.localStore,s=e.snapshotVersion,a=o.Fn,o.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var n=o.On.newChangeBuffer({trackRemovals:!0});a=o.Fn;var r=[];e.targetChanges.forEach(function(e,n){var i=a.get(n);if(i){r.push(o.qe.removeMatchingKeys(t,e.removedDocuments,n).next(function(){return o.qe.addMatchingKeys(t,e.addedDocuments,n)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=i.withResumeToken(u,s).withSequenceNumber(t.currentSequenceNumber);a=a.insert(n,c),c.resumeToken.approximateByteSize()>0||rE(),(0===i.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-i.snapshotVersion.toMicroseconds()>=3e8||e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size>0)&&r.push(o.qe.updateTargetData(t,c))}}});var i=og;if(e.documentUpdates.forEach(function(n,i){e.resolvedLimboDocuments.has(n)&&r.push(o.persistence.referenceDelegate.updateLimboDocument(t,n))}),r.push(aA(t,n,e.documentUpdates,s,void 0).next(function(t){i=t})),!s.isEqual(rC.min())){var u=o.qe.getLastRemoteSnapshotVersion(t).next(function(e){return o.qe.setTargetsMetadata(t,t.currentSequenceNumber,s)});r.push(u)}return sv.waitFor(r).next(function(){return n.apply(t)}).next(function(){return o.Mn.En(t,i)}).next(function(){return i})}).then(function(t){return o.Fn=a,t}))];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||rE(),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?r.bo||rE():t.removedDocuments.size>0&&(r.bo||rE(),r.bo=!1))}),[4,ce(n,r,e)];case 3:case 5:return i.sent(),[3,6];case 4:return[4,s9(i.sent())];case 6:return[2]}})})}function u0(t,e,n){if(t.isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n){var r,i,o=[];t.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&o.push(r.snapshot)}),(r=t.eventManager).onlineState=e,i=!1,r.queries.forEach(function(t,n){for(var r=0,o=n.listeners;r<o.length;r++)o[r].zr(e)&&(i=!0)}),i&&uV(r),o.length&&t.vo._r(o),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e)}}function u1(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,s,a,u;return c(this,function(c){switch(c.label){case 0:return(r=t).sharedClientState.updateQueryState(e,"rejected",n),(o=(i=r.Co.get(e))&&i.key)?(s=(s=new ol(rQ.comparator)).insert(o,r7.newNoDocument(o,rC.min())),a=ow().add(o),u=new oI(rC.min(),new Map,new od(rA),s,a),[4,uZ(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ct(r),[3,4];case 2:return[4,aN(r.localStore,e,!1).then(function(){return u8(r,e,n)}).catch(s9)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function u2(t,e){return u(this,void 0,void 0,function(){var n,r,i;return c(this,function(o){var s;switch(o.label){case 0:n=t,r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=n.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var n,r,i,o=e.batch.keys(),a=s.On.newChangeBuffer({trackRemovals:!0});return(r=(n=e.batch).keys(),i=sv.resolve(),r.forEach(function(r){i=i.next(function(){return a.getEntry(t,r)}).next(function(t){var i=e.docVersions.get(r);null!==i||rE(),0>t.version.compareTo(i)&&(n.applyToRemoteDocument(t,e),t.isValidDocument()&&a.addEntry(t,e.commitVersion))})}),i.next(function(){return s._n.removeMutationBatch(t,n)})).next(function(){return a.apply(t)}).next(function(){return s._n.performConsistencyCheck(t)}).next(function(){return s.Mn.pn(t,o)})})];case 2:return i=o.sent(),u5(n,r,null),u6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ce(n,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,s9(o.sent())];case 6:return[2]}})})}function u3(t,e,n){return u(this,void 0,void 0,function(){var r,i;return c(this,function(o){var s;switch(o.label){case 0:r=t,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore).persistence.runTransaction("Reject batch","readwrite-primary",function(t){var n;return s._n.lookupMutationBatch(t,e).next(function(e){return null!==e||rE(),n=e.keys(),s._n.removeMutationBatch(t,e)}).next(function(){return s._n.performConsistencyCheck(t)}).next(function(){return s.Mn.pn(t,n)})})];case 2:return i=o.sent(),u5(r,e,n),u6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ce(r,i)];case 3:case 5:return o.sent(),[3,6];case 4:return[4,s9(o.sent())];case 6:return[2]}})})}function u4(t,e){return u(this,void 0,void 0,function(){var n,r,i,o;return c(this,function(s){var a;switch(s.label){case 0:uf((n=t).remoteStore)||rw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return a._n.getHighestUnacknowledgedBatchId(t)})];case 2:return -1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=uC(s.sent(),"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function u6(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function u5(t,e,n){var r=t.xo[t.currentUser.toKey()];if(r){var i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),t.xo[t.currentUser.toKey()]=r}}function u8(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||u9(t,e)})}function u9(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ua(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ct(t))}function u7(t,e,n){for(var r=0;r<n.length;r++){var i=n[r];i instanceof uK?(t.No.addReference(i.key,e),function(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(rw("SyncEngine","New document in limbo: "+n),t.So.add(r),ct(t))}(t,i)):i instanceof uG?(rw("SyncEngine","Document no longer in limbo: "+i.key),t.No.removeReference(i.key,e),t.No.containsKey(i.key)||u9(t,i.key)):rE()}}function ct(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new rQ(rP.fromString(e)),r=t.ko.next();t.Co.set(r,new uW(n)),t.Do=t.Do.insert(n,r),us(t.remoteStore,new sC(iC(iI(n.path)),r,2,rv.o))}}function ce(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,s;return c(this,function(a){switch(a.label){case 0:return i=[],o=[],s=[],(r=t).Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=a_.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s,a,u,h,l;return c(this,function(c){switch(c.label){case 0:n=t,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sv.forEach(e,function(e){return sv.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sv.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return c.sent(),[3,4];case 3:if(!sw(r=c.sent()))throw r;return rw("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(h=(u=n.Fn.get(a)).snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(h),n.Fn=n.Fn.insert(a,l));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function cn(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){var o;switch(i.label){case 0:return(n=t).currentUser.isEqual(e)?[3,3]:(rw("SyncEngine","User change. New user:",e.toKey()),[4,aE(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach(function(t){t.forEach(function(t){t.reject(new rm(rg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ce(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function cr(t,e){var n=t.Co.get(e);if(n&&n.bo)return ow().add(n.key);var r=ow(),i=t.Vo.get(e);if(!i)return r;for(var o=0;o<i.length;o++){var s=i[o],a=t.Po.get(s);r=r.unionWith(a.view.wo)}return r}function ci(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){return[2,aD((e=t).localStore).then(function(t){return ce(e,t)})]})})}function co(t,e,n,r){return u(this,void 0,void 0,function(){var i,o;return c(this,function(s){switch(s.label){case 0:var a,u;return[4,(u=(a=(i=t).localStore)._n,a.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return u.jt(t,e).next(function(e){return e?a.Mn.pn(t,e):sv.resolve(null)})}))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,uy(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(u5(i,e,r||null),u6(i,e),function(t,e){t._n.Gt(e)}(i.localStore,e)):rE(),s.label=4;case 4:return[4,ce(i,o)];case 5:return s.sent(),[3,7];case 6:rw("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function cs(t,e,n){return u(this,void 0,void 0,function(){var n,r,i,o,s,a,h,l,f,p,d,v,g,m;return c(this,function(y){switch(y.label){case 0:n=t,r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],h=void 0,(l=n.Vo.get(a))&&0!==l.length?[4,ak(n.localStore,iC(l[0]))]:[3,7]):[3,13];case 2:h=y.sent(),f=0,p=l,y.label=3;case 3:return f<p.length?(d=p[f],v=n.Po.get(d),[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i;return c(this,function(o){switch(o.label){case 0:return[4,aC((n=t).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&u7(n,e.targetId,i.To),i)]}})})}(n,v)]):[3,6];case 4:(g=y.sent()).snapshot&&i.push(g.snapshot),y.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,aR(n.localStore,a)];case 8:return m=y.sent(),[4,ak(n.localStore,m)];case 9:return h=y.sent(),[4,uY(n,ca(m),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(h),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ca(t){var e,n,r,i;return e=t.path,n=t.collectionGroup,r=t.orderBy,i=t.filters,new i_(e,n,r,i,t.limit,"F",t.startAt,t.endAt)}function cu(t){return t.localStore.persistence.fn()}function cc(t,e,n,r){return u(this,void 0,void 0,function(){var i,o,s;return c(this,function(a){switch(a.label){case 0:return(i=t).$o?(rw("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,aD(i.localStore)];case 3:return o=a.sent(),s=oI.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ce(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,aN(i.localStore,e,!0)];case 6:return a.sent(),u8(i,e,r),[3,8];case 7:rE(),a.label=8;case 8:return[2]}})})}function ch(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,s,a,u,h,l,f,p;return c(this,function(d){switch(d.label){case 0:if(!(r=cl(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(rw("SyncEngine","Adding an already active target "+s),[3,5]):[4,aR(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,ak(r.localStore,a)];case 3:return u=d.sent(),[4,uY(r,ca(a),u.targetId,!1)];case 4:d.sent(),us(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return c(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,aN(r.localStore,t,!1).then(function(){ua(r.remoteStore,t),u8(r,t)}).catch(s9)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,f=n,d.label=7;case 7:return l<f.length?(p=f[l],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function cl(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=uZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cr.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=u1.bind(null,t),t.vo._r=uU.bind(null,t.eventManager),t.vo.Mo=uF.bind(null,t.eventManager),t}function cf(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=u2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=u3.bind(null,t),t}var cp=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.R=a5(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){var e;return e=this.persistence,new aT(e,new aI,t.initialUser,this.R)},t.prototype.qo=function(t){return new aV(aq.bs,this.R)},t.prototype.Bo=function(t){return new a$},t.prototype.terminate=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return s(e,t),e.prototype.initialize=function(e){return u(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){return[2,(e=t).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){var e,n;return e=ah(t),n=rC.min(),e.$t({index:sn.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=sP(e.readTime)),r.done()}).next(function(){return n})}).then(function(t){e.$n=t})]})})}(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,cf(this.Qo.syncEngine)];case 4:return n.sent(),[4,uy(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){var e;return e=this.persistence,new aT(e,new aI,t.initialUser,this.R)},e.prototype.Uo=function(t){return new ae(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=ay(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sX.withCacheSize(this.cacheSizeBytes):sX.DEFAULT;return new av(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,a4(),a6(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new a$},e}(cp),cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return s(e,t),e.prototype.initialize=function(e){return u(this,void 0,void 0,function(){var n,r=this;return c(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof aJ?(this.sharedClientState.syncEngine={ui:co.bind(null,n),ai:cc.bind(null,n),hi:ch.bind(null,n),fn:cu.bind(null,n),ci:ci.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return u(r,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s,a,u,h;return c(this,function(c){var l;switch(c.label){case 0:return cl(n=t),cf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cs(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,uS(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)a=s[o],us(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],h=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):h=h.then(function(){return u8(n,e),aN(n.localStore,e,!0)}),ua(n.remoteStore,e)}),[4,h]);case 4:return c.sent(),[4,cs(n,u)];case 5:return c.sent(),(l=n).Co.forEach(function(t,e){ua(l.remoteStore,e)}),l.No.ts(),l.Co=new Map,l.Do=new ol(rQ.comparator),n.$o=!1,[4,uS(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=a4();if(!aJ.yt(e))throw new rm(rg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ay(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new aJ(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(cd),cg=function(){function t(){}return t.prototype.initialize=function(t,e){return u(this,void 0,void 0,function(){var n=this;return c(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return u0(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cn.bind(null,this.syncEngine),[4,uS(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new uP},t.prototype.createDatastore=function(t){var e=a5(t.databaseInfo.databaseId),n=new a3(t.databaseInfo);return new ue(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n=this;return e=this.localStore,new ur(e,this.datastore,t.asyncQueue,function(t){return u0(n.syncEngine,t,0)},a0.yt()?new a0:new aZ)},t.prototype.createSyncEngine=function(t,e){var n,r,i,o,s;return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=new uQ(n,r,i,o,t.initialUser,t.maxConcurrentLimboResolutions),e&&(s.$o=!0),s},t.prototype.terminate=function(){return function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=t,rw("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,uo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),cm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),cy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new sd,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return u(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return u(this,void 0,void 0,function(){var t,e,n;return c(this,function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(isNaN(n=Number(e=this.zo.decode(t)))&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return[2,new uq(JSON.parse(r.sent()),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return 123===t})},t.prototype.Jo=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:return 0>this.Zo()?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return u(this,void 0,void 0,function(){var e,n=this;return c(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new rm(rg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i,o,s,a;return c(this,function(u){switch(u.label){case 0:return r=oK((n=t).R)+"/documents",i={documents:e.map(function(t){return oV(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e,r,i,o,a,u,c=(e=n.R,"found"in t?(t.found||rE(),t.found.name,t.found.updateTime,r=oj(e,t.found.name),i=oM(t.found.updateTime),o=new r9({mapValue:{fields:t.found.fields}}),r7.newFoundDocument(r,i,o)):"missing"in t?(t.missing||rE(),t.readTime||rE(),a=oj(e,t.missing),u=oM(t.readTime),r7.newNoDocument(a,u)):rE());s.set(c.key.toString(),c)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());e||rE(),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new os(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return u(this,void 0,void 0,function(){var t,e=this;return c(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=rQ.fromPath(n);e.mutations.push(new oa(r,e.precondition(r)))}),[4,function(t,e){return u(this,void 0,void 0,function(){var n,r,i;return c(this,function(o){switch(o.label){case 0:return r=oK((n=t).R)+"/documents",i={writes:e.map(function(t){return oW(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw rE();e=rC.min()}var e,n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new rm(rg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?iJ.updateTime(e):iJ.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(rC.min()))throw new rm(rg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iJ.updateTime(e)}return iJ.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),cb=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new a8(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return u(t,void 0,void 0,function(){var t,e,n=this;return c(this,function(r){return t=new cy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!rH(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!oc(e)}return!1},t}(),cw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=aB.UNAUTHENTICATED,this.clientId=rS.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return u(r,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return rw("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return u(this,void 0,void 0,function(){return c(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new rm(rg.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new sd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return u(t,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=uC(n.sent(),"Failed to shutdown persistence"),e.reject(t),[3,6];case 6:return[2]}})})}),e.promise},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){return u(this,void 0,void 0,function(){var n,r,i=this;return c(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),rw("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return u(i,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,aE(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function cI(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,cT(t)];case 1:return n=i.sent(),rw("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){switch(i.label){case 0:return(n=t).asyncQueue.verifyOperationInProgress(),rw("RemoteStore","RemoteStore received new credentials"),r=uf(n),n.Or.add(3),[4,uo(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,ui(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function cT(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(rw("FirestoreClient","Using default OfflineComponentProvider"),[4,c_(t,new cp)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function cE(t){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(rw("FirestoreClient","Using default OnlineComponentProvider"),[4,cI(t,new cg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function cS(t){return cT(t).then(function(t){return t.persistence})}function cA(t){return cT(t).then(function(t){return t.localStore})}function ck(t){return cE(t).then(function(t){return t.remoteStore})}function cN(t){return cE(t).then(function(t){return t.syncEngine})}function cC(t){return u(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,cE(t)];case 1:return[2,((n=(e=r.sent()).eventManager).onListen=uX.bind(null,e.syncEngine),n.onUnlisten=uJ.bind(null,e.syncEngine),n)]}})})}function cR(t,e,n){var r=this;void 0===n&&(n={});var i=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(r,void 0,void 0,function(){var r;return c(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cm({next:function(o){e.enqueueAndForget(function(){return uM(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new rm(rg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new rm(rg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new uj(iI(n.path),o,{includeMetadataChanges:!0,so:!0});return uL(t,s)},[4,cC(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function cD(t,e,n){var r=this;void 0===n&&(n={});var i=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(r,void 0,void 0,function(){var r;return c(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new uj(n,new cm({next:function(n){e.enqueueAndForget(function(){return uM(t,o)}),n.fromCache&&"server"===r.source?i.reject(new rm(rg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),{includeMetadataChanges:!0,so:!0});return uL(t,o)},[4,cC(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var cO=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},cx=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),cP=new Map,cL=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},cM=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(aB.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),cU=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),cF=function(){function t(t){var e=this;this.currentUser=aB.UNAUTHENTICATED,this.oc=new sd,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){rw("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(rw("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(rw("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?("string"==typeof n.accessToken||rE(),new cL(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return u(n,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return null===t||"string"==typeof t||rE(),new aB(t)},t}(),cV=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=aB.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),cj=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new cV(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(aB.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t,e,n){if(!n)throw new rm(rg.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function cB(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rm(rg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function cK(t,e,n,r){if(!0===e&&!0===r)throw new rm(rg.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function cG(t){if(!rQ.isDocumentKey(t))throw new rm(rg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cH(t){if(rQ.isDocumentKey(t))throw new rm(rg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function cz(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":rE()}function cW(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rm(rg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cz(t);throw new rm(rg.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function cQ(t,e){if(e<=0)throw new rm(rg.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cX=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new rm(rg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new rm(rg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,cK("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),cY=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cX({}),this._settingsFrozen=!1,t instanceof cx?(this._databaseId=t,this._credentials=new cM):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new rm(rg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cx(t.options.projectId)}(t),this._credentials=new cF(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new rm(rg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new rm(rg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cX(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new cM;switch(t.type){case"gapi":var e=t.client;return"object"==typeof e&&null!==e&&e.auth&&e.auth.getAuthHeaderValueForFirstParty||rE(),new cj(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new rm(rg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){var t;return(t=cP.get(this))&&(rw("ComponentProvider","Removing Datastore"),cP.delete(this),t.terminate()),Promise.resolve()},t}(),cJ=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new cZ(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),c$=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),cZ=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,iI(r))||this)._path=r,i.type="collection",i}return s(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new cJ(this.firestore,null,new rQ(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(c$);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=k(t),cq("collection","path",e),t instanceof cY)return cH(n=rP.fromString.apply(rP,f([e],r))),new cZ(t,null,n);if(!(t instanceof cJ||t instanceof cZ))throw new rm(rg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cH(n=rP.fromString.apply(rP,f([t.path],r)).child(rP.fromString(e))),new cZ(t.firestore,null,n)}function c1(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=k(t),1==arguments.length&&(e=rS.u()),cq("doc","path",e),t instanceof cY)return cG(n=rP.fromString.apply(rP,f([e],r))),new cJ(t,null,new rQ(n));if(!(t instanceof cJ||t instanceof cZ))throw new rm(rg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cG(n=t._path.child(rP.fromString.apply(rP,f([e],r)))),new cJ(t.firestore,t instanceof cZ?t.converter:null,new rQ(n))}function c2(t,e){return t=k(t),e=k(e),(t instanceof cJ||t instanceof cZ)&&(e instanceof cJ||e instanceof cZ)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function c3(t,e){return t=k(t),e=k(e),t instanceof c$&&e instanceof c$&&t.firestore===e.firestore&&iD(t._query,e._query)&&t.converter===e.converter/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var c4=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new a8(this,"async_queue_retry"),this.Ic=function(){var e=a6();e&&rw("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=a6();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=a6();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new sd;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return u(this,void 0,void 0,function(){var t,e=this;return c(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!sw(t=n.sent()))throw t;return rw("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){var n;throw e.yc=t,e.gc=!1,r_("INTERNAL UNHANDLED ERROR: ",(n=t.message||"",t.stack&&(n=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),n)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=uN.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&rE()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function c6(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new sd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var c5=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new c4,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return s(e,t),e.prototype._terminate=function(){return this._firestoreClient||c9(this),this._firestoreClient.terminate()},e}(cY);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(t){return t._firestoreClient||c9(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function c9(t){var e,n,r=t._freezeSettings(),i=(e=t._databaseId,new cO(e,(null===(n=t._app)||void 0===n?void 0:n.options.appId)||"",t._persistenceKey,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));t._firestoreClient=new cw(t._credentials,t._queue,i)}function c7(t,e,n){var r=this,i=new sd;return t.asyncQueue.enqueue(function(){return u(r,void 0,void 0,function(){var r;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,c_(t,n)];case 1:return o.sent(),[4,cI(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:var s;if(!("FirebaseError"===(s=r=o.sent()).name?s.code===rg.FAILED_PRECONDITION||s.code===rg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ht(t){if(t._initialized||t._terminated)throw new rm(rg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new rm(rg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rM(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hn=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(rF.fromBase64String(e))}catch(t){throw new rm(rg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},t.fromUint8Array=function(e){return new t(rF.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),hr=function(t){this._methodName=t},hi=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new rm(rg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new rm(rg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return rA(this._lat,t._lat)||rA(this._long,t._long)},t}(),ho=/^__.*__$/,hs=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new i4(t,this.data,this.fieldMask,e,this.fieldTransforms):new i3(t,this.data,e,this.fieldTransforms)},t}(),ha=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new i4(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rE()}}var hc=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return hC(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(hu(this.Nc)&&ho.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),hh=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||a5(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new hc({Nc:t,methodName:e,qc:n,path:rM.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function hl(t){var e=t._freezeSettings(),n=a5(t._databaseId);return new hh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);hS("Data must be an object, but it was:",s,r);var a,u,c=hT(r,s);if(o.merge)a=new rU(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=hA(e,f[l],n);if(!s.contains(p))throw new rm(rg.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");hR(h,p)||h.push(p)}a=new rU(h),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new hs(new r9(c),a,u)}var hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(hr);function hd(t,e,n){return new hc({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype._toFieldTransform=function(t){return new iX(t.path,new iq)},e.prototype.isEqual=function(t){return t instanceof e},e}(hr),hg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=hd(this,t,!0),n=new iB(this.Kc.map(function(t){return hI(t,e)}));return new iX(t.path,n)},e.prototype.isEqual=function(t){return this===t},e}(hr),hm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=hd(this,t,!0),n=new iG(this.Kc.map(function(t){return hI(t,e)}));return new iX(t.path,n)},e.prototype.isEqual=function(t){return this===t},e}(hr),hy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return s(e,t),e.prototype._toFieldTransform=function(t){var e=new iz(t.R,iF(t.R,this.Qc));return new iX(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(hr);function hb(t,e,n,r){var i=t.Uc(1,e,n);hS("Data must be an object, but it was:",i,r);var o=[],s=r9.empty();return rD(r,function(t,r){var a=hN(e,t,n);r=k(r);var u=i.Oc(a);if(r instanceof hp)o.push(a);else{var c=hI(r,u);null!=c&&(o.push(a),s.set(a,c))}}),new ha(s,new rU(o),i.fieldTransforms)}function hw(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[hA(e,r,n)],u=[i];if(o.length%2!=0)throw new rm(rg.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(hA(e,o[c])),u.push(o[c+1]);for(var h=[],l=r9.empty(),f=a.length-1;f>=0;--f)if(!hR(h,a[f])){var p=a[f],d=u[f];d=k(d);var v=s.Oc(p);if(d instanceof hp)h.push(p);else{var g=hI(d,v);null!=g&&(h.push(p),l.set(p,g))}}return new ha(l,new rU(h),s.fieldTransforms)}function h_(t,e,n,r){return void 0===r&&(r=!1),hI(n,t.Uc(r?4:3,e))}function hI(t,e){if(hE(t=k(t)))return hS("Unsupported field value:",e,t),hT(t,e);if(t instanceof hr)return function(t,e){if(!hu(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0;i<t.length;i++){var o=hI(t[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=k(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iF(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=rN.fromDate(t);return{timestampValue:oP(e.R,n)}}if(t instanceof rN)return n=new rN(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:oP(e.R,n)};if(t instanceof hi)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hn)return{bytesValue:oL(e.R,t._byteString)};if(t instanceof cJ){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:oU(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+cz(t))}(t,e)}function hT(t,e){var n={};return rO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rD(t,function(t,r){var i=hI(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function hE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rN||t instanceof hi||t instanceof hn||t instanceof cJ||t instanceof hr)}function hS(t,e,n){if(!hE(n)||!("object"==typeof n&&null!==n&&(Object.getPrototypeOf(n)===Object.prototype||null===Object.getPrototypeOf(n)))){var r=cz(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function hA(t,e,n){if((e=k(e))instanceof he)return e._internalPath;if("string"==typeof e)return hN(t,e);throw hC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var hk=RegExp("[~\\*/\\[\\]]");function hN(t,e,n){if(e.search(hk)>=0)throw hC("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(he.bind.apply(he,f([void 0],e.split(".")))))._internalPath}catch(r){throw hC("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function hC(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new rm(rg.INVALID_ARGUMENT,(a+=". ")+t+u)}function hR(t,e){return t.some(function(t){return t.isEqual(e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hD=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new cJ(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new hO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(hx("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),hO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(hD);function hx(t,e){return"string"==typeof e?hN(t,e):e instanceof he?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hP=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),hL=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return s(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new hM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(hx("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(hD),hM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(hL),hU=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new hP(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new hM(n._firestore,n._userDataWriter,r.key,r,new hP(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new rm(rg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new hM(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hP(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new hM(t._firestore,t._userDataWriter,e.doc.key,e.doc,new hP(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rE()}}(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function hF(t,e){return t instanceof hL&&e instanceof hL?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hU&&e instanceof hU&&t._firestore===e._firestore&&c3(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){if(iE(t)&&0===t.explicitOrderBy.length)throw new rm(rg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hj=function(){};function hq(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)t=e[r]._apply(t);return t}var hB=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return s(e,t),e.prototype._apply=function(t){var e,n,r=hl(t.firestore),i=function(t,e,n,r,i,o,s){if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new rm(rg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){hX(s,o);for(var a,u=[],c=0;c<s.length;c++){var h=s[c];u.push(hQ(r,t,h))}a={arrayValue:{values:u}}}else a=hQ(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hX(s,o),a=h_(n,"where",s,"in"===o||"not-in"===o);var l=is.create(i,o,a);return function(t,e){if(e.g()){var n=iA(t);if(null!==n&&!n.isEqual(e.field))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=iS(t);null!==r&&hY(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new rm(rg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new rm(rg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t._query,0,r,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new c$(t.firestore,t.converter,(n=(e=t._query).filters.concat([i]),new i_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)))},e}(hj),hK=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return s(e,t),e.prototype._apply=function(t){var e,n,r=function(t,e,n){if(null!==t.startAt)throw new rm(rg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new rm(rg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new iy(e,n);return function(t,e){if(null===iS(t)){var n=iA(t);null!==n&&hY(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new c$(t.firestore,t.converter,(n=(e=t._query).explicitOrderBy.concat([r]),new i_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(hj),hG=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return s(e,t),e.prototype._apply=function(t){return new c$(t.firestore,t.converter,iR(t._query,this.Hc,this.Jc))},e}(hj),hH=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return s(e,t),e.prototype._apply=function(t){var e,n=hW(t,this.type,this.Yc,this.Xc);return new c$(t.firestore,t.converter,new i_((e=t._query).path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt))},e}(hj),hz=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return s(e,t),e.prototype._apply=function(t){var e,n=hW(t,this.type,this.Yc,this.Xc);return new c$(t.firestore,t.converter,new i_((e=t._query).path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n))},e}(hj);function hW(t,e,n,r){if(n[0]=k(n[0]),n[0]instanceof hD)return function(t,e,n,r,i){if(!r)throw new rm(rg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=iN(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(r1(e,r.key));else{var c=r.data.field(u.field);if(rK(c))throw new rm(rg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new rm(rg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ig(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=hl(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new rm(rg.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new rm(rg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ik(t)&&-1!==c.indexOf("/"))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(rP.fromString(c));if(!rQ.isDocumentKey(h))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new rQ(h);a.push(r1(e,l))}else{var f=h_(n,r,c);a.push(f)}}return new ig(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function hQ(t,e,n){if("string"==typeof(n=k(n))){if(""===n)throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ik(e)&&-1!==n.indexOf("/"))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(rP.fromString(n));if(!rQ.isDocumentKey(r))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return r1(t,new rQ(r))}if(n instanceof cJ)return r1(t,n._key);throw new rm(rg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+cz(n)+".")}function hX(t,e){if(!Array.isArray(t)||0===t.length)throw new rm(rg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new rm(rg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function hY(t,e,n){if(!n.isEqual(e))throw new rm(rg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hJ=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),rX(t)){case 0:return null;case 1:return t.booleanValue;case 2:return rq(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(rB(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw rE()}},t.prototype.convertObject=function(t,e){var n=this,r={};return rD(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new hi(rq(t.latitude),rq(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return rK(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(rG(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=rj(t);return new rN(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=rP.fromString(t);o2(n)||rE();var r=new cx(n.get(1),n.get(3)),i=new rQ(n.popFirst(5));return r.isEqual(e)||r_("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hZ=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new hn(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cJ(this.firestore,null,e)},e}(hJ),h0=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=hl(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=h1(t,this._firestore),i=h$(r.converter,e,n),o=hf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,iJ.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=h1(t,this._firestore);return o="string"==typeof(e=k(e))||e instanceof he?hw(this._dataReader,"WriteBatch.update",s._key,e,n,r):hb(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,iJ.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=h1(t,this._firestore);return this._mutations=this._mutations.concat(new os(e._key,iJ.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new rm(rg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e){if((t=k(t)).firestore!==e)throw new rm(rg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h2=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new hn(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cJ(this.firestore,null,e)},e}(hJ);function h3(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=cW(t,cJ);var o=cW(t.firestore,c5),s=hl(o);return h6(o,[("string"==typeof(e=k(e))||e instanceof he?hw(s,"updateDoc",t._key,e,n,r):hb(s,"updateDoc",t._key,e)).toMutation(t._key,iJ.exists(!0))])}function h4(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=k(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[0]||c6(i[a])||(s=i[a],a++);var h,l,f,p={includeMetadataChanges:s.includeMetadataChanges};if(c6(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof cJ)l=cW(t.firestore,c5),f=iI(t._key.path),h={next:function(e){i[a]&&i[a](h5(l,t,e))},error:i[a+1],complete:i[a+2]};else{var v=cW(t,c$);l=cW(v.firestore,c5),f=v._query;var g=new h2(l);h={next:function(t){i[a]&&i[a](new hU(l,g,v,t))},error:i[a+1],complete:i[a+2]},hV(t._query)}return function(t,e,n,r){var i=this,o=new cm(r),s=new uj(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return u(i,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=uL,[4,cC(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return u(i,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=uM,[4,cC(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(c8(l),f,p,h)}function h6(t,e){return function(t,e){var n=this,r=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var n;return c(this,function(i){switch(i.label){case 0:return n=u$,[4,cN(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(c8(t),e)}function h5(t,e,n){var r=n.docs.get(e._key),i=new h2(t);return new hL(t,i,e._key,r,new hP(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h8=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return s(e,t),e.prototype.get=function(e){var n=this,r=h1(e,this._firestore),i=new h2(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new hL(n._firestore,i,r._key,t._document,new hP(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=hl(t)}return t.prototype.get=function(t){var e=this,n=h1(t,this._firestore),r=new hZ(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return rE();var i=t[0];if(i.isFoundDocument())return new hD(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new hD(e._firestore,r,n._key,null,n.converter);throw rE()})},t.prototype.set=function(t,e,n){var r=h1(t,this._firestore),i=h$(r.converter,e,n),o=hf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=h1(t,this._firestore);return o="string"==typeof(e=k(e))||e instanceof he?hw(this._dataReader,"Transaction.update",s._key,e,n,r):hb(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=h1(t,this._firestore);return this._transaction.delete(e._key),this},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){if("undefined"==typeof Uint8Array)throw new rm(rg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function h7(){if("undefined"==typeof atob)throw new rm(rg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var lt=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return h7(),new t(hn.fromBase64String(e))},t.fromUint8Array=function(e){return h9(),new t(hn.fromUint8Array(e))},t.prototype.toBase64=function(){return h7(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return h9(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),le=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){var n,r,i,o,s;return n=t._delegate,r={forceOwnership:e},ht(n=cW(n,c5)),i=c8(n),o=n._freezeSettings(),c7(i,s=new cg,new cd(s,o.cacheSizeBytes,null==r?void 0:r.forceOwnership))},t.prototype.enableMultiTabIndexedDbPersistence=function(t){var e,n,r,i;return ht(e=cW(e=t._delegate,c5)),n=c8(e),r=e._freezeSettings(),c7(n,i=new cg,new cv(i,r.cacheSizeBytes))},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new rm(rg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new sd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return u(e,void 0,void 0,function(){var e;return c(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return sm.yt()?(e=t+"main",[4,sm.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}})})}(ay(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),ln=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof cx||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||rI("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=cW(t,cY))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&rI("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t,e){if(t.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n="demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=a({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[v.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),v.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new rm(rg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new cU(new cL(o,new aB(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return u(e,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,cS(t)];case 1:return e=r.sent(),[4,ck(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),n.Or.delete(0),ui(n))]}})})})}(c8(cW(this._delegate,c5)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return u(e,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return[4,cS(t)];case 1:return e=r.sent(),[4,ck(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return(e=t).Or.add(0),[4,uo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(c8(cW(this._delegate,c5)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&cK("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(e,void 0,void 0,function(){var e;return c(this,function(r){switch(r.label){case 0:return e=u4,[4,cN(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(c8(cW(this._delegate,c5)))},t.prototype.onSnapshotsInSync=function(t){var e;return function(t,e){var n=this,r=new cm(e);return t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,cC(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,cC(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(c8(cW(this._delegate,c5)),c6(t)?t:{next:t})},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new rm(rg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new lg(this,c0(this._delegate,t))}catch(t){throw lu(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new la(this,c1(this._delegate,t))}catch(t){throw lu(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new lp(this,function(t,e){if(t=cW(t,cY),cq("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rm(rg.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new c$(t,null,new i_(rP.emptyPath(),e))}(this._delegate,t))}catch(t){throw lu(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var n;return c(this,function(i){switch(i.label){case 0:return[4,cE(t).then(function(t){return t.datastore})];case 1:return n=i.sent(),new cb(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(c8(e=this._delegate),function(r){return t(new li(n,new h8(e,r)))})},t.prototype.batch=function(){var t=this;return c8(this._delegate),new lo(new h0(this._delegate,function(e){return h6(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new rm(rg.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new rm(rg.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),lr=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return s(e,t),e.prototype.convertBytes=function(t){return new lt(new hn(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return la.eu(e,this.firestore,null)},e}(hJ),li=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new lr(t)}return t.prototype.get=function(t){var e=this,n=cW(t,cJ);return this._delegate.get(n).then(function(t){return new ll(e._firestore,new hL(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=cW(t,cJ);return n?(cB("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cW(t,cJ);return 2==arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,f([s,e,n],i)),this},t.prototype.delete=function(t){var e=cW(t,cJ);return this._delegate.delete(e),this},t}(),lo=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=cW(t,cJ);return n?(cB("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cW(t,cJ);return 2==arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,f([s,e,n],i)),this},t.prototype.delete=function(t){var e=cW(t,cJ);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ls=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new hM(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new lf(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new lr(e),n),i.set(n,o)),o},t}();ls.su=new WeakMap;var la=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lr(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new rm(rg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new cJ(n._delegate,r,new rQ(e)))},t.eu=function(e,n,r){return new t(n,new cJ(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lg(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new lg(this.firestore,c0(this._delegate,t))}catch(t){throw lu(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=k(t))instanceof cJ&&c2(this._delegate,t)},t.prototype.set=function(t,e){e=cB("DocumentReference.set",e);try{var n,r,i,o;return n=this._delegate,r=e,n=cW(n,cJ),i=cW(n.firestore,c5),o=h$(n.converter,t,r),h6(i,[hf(hl(i),"setDoc",n._key,o,null!==n.converter,r).toMutation(n._key,iJ.none())])}catch(t){throw lu(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1==arguments.length?h3(this._delegate,t):h3.apply(void 0,f([this._delegate,t,e],n))}catch(t){throw lu(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){var t;return h6(cW((t=this._delegate).firestore,c5),[new os(t._key,iJ.none())])},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=lc(e),i=lh(e,function(e){return new ll(t.firestore,new hL(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return h4(this._delegate,r,i)},t.prototype.get=function(t){var e,n,r,i,o,s,a,h,l=this;return("cache"===(null==t?void 0:t.source)?(e=cW(e=this._delegate,cJ),r=c8(n=cW(e.firestore,c5)),i=new h2(n),(function(t,e){var n=this,r=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var n;return c(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return u(this,void 0,void 0,function(){var r;return c(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.persistence.runTransaction("read document","readonly",function(n){return t.Mn.mn(n,e)})];case 1:return(r=i.sent()).isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new rm(rg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=uC(i.sent(),"Failed to get document '"+e+" from cache"),n.reject(r),[3,3];case 3:return[2]}})})},[4,cA(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise})(r,e._key).then(function(t){return new hL(n,i,e._key,t,new hP(null!==t&&t.hasLocalMutations,!0),e.converter)})):"server"===(null==t?void 0:t.source)?(o=cW(o=this._delegate,cJ),cR(c8(s=cW(o.firestore,c5)),o._key,{source:"server"}).then(function(t){return h5(s,o,t)})):(a=cW(a=this._delegate,cJ),cR(c8(h=cW(a.firestore,c5)),a._key).then(function(t){return h5(h,a,t)}))).then(function(t){return new ll(l.firestore,new hL(l.firestore._delegate,l._userDataWriter,t._key,t._document,t.metadata,l._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ls.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function lu(t,e,n){return t.message=t.message.replace(e,n),t}function lc(t){for(var e=0;e<t.length;e++){var n=t[e];if("object"==typeof n&&!c6(n))return n}return{}}function lh(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=c6(t[0])?t[0]:c6(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ll=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new la(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return hF(this._delegate,t._delegate)},t}(),lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(ll),lp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lr(t)}return t.prototype.where=function(e,n,r){try{var i;return new t(this.firestore,hq(this._delegate,(i=hx("where",e),new hB(i,n,r))))}catch(t){throw lu(t,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{var r,i,o;return new t(this.firestore,hq(this._delegate,(r=n,void 0===r&&(r="asc"),i=r,o=hx("orderBy",e),new hK(o,i))))}catch(t){throw lu(t,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,hq(this._delegate,(cQ("limit",e),new hG("limit",e,"F"))))}catch(t){throw lu(t,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,hq(this._delegate,(cQ("limitToLast",e),new hG("limitToLast",e,"L"))))}catch(t){throw lu(t,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hq(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hH("startAt",t,!0)}).apply(void 0,e)))}catch(t){throw lu(t,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hq(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hH("startAfter",t,!1)}).apply(void 0,e)))}catch(t){throw lu(t,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hq(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hz("endBefore",t,!0)}).apply(void 0,e)))}catch(t){throw lu(t,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hq(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hz("endAt",t,!1)}).apply(void 0,e)))}catch(t){throw lu(t,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return c3(this._delegate,t._delegate)},t.prototype.get=function(t){var e,n,r,i,o,s,a,h,l,f,p,d,v=this;return("cache"===(null==t?void 0:t.source)?(e=cW(e=this._delegate,c$),r=c8(n=cW(e.firestore,c5)),i=new h2(n),(function(t,e){var n=this,r=new sd;return t.asyncQueue.enqueueAndForget(function(){return u(n,void 0,void 0,function(){var n;return c(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return u(this,void 0,void 0,function(){var r,i,o,s;return c(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,aC(t,e,!0)];case 1:return i=(r=new uH(e,(s=a.sent()).Bn))._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=uC(a.sent(),"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,cA(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise})(r,e._query).then(function(t){return new hU(n,i,e,t)})):"server"===(null==t?void 0:t.source)?(o=cW(o=this._delegate,c$),a=c8(s=cW(o.firestore,c5)),h=new h2(s),cD(a,o._query,{source:"server"}).then(function(t){return new hU(s,h,o,t)})):(l=cW(l=this._delegate,c$),p=c8(f=cW(l.firestore,c5)),d=new h2(f),hV(l._query),cD(p,l._query).then(function(t){return new hU(f,d,l,t)}))).then(function(t){return new lv(v.firestore,new hU(v.firestore._delegate,v._userDataWriter,v._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=lc(e),i=lh(e,function(e){return new lv(t.firestore,new hU(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return h4(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ls.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),ld=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new lf(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),lv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new lp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new lf(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new ld(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new lf(n._firestore,r))})},t.prototype.isEqual=function(t){return hF(this._delegate,t._delegate)},t}(),lg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return s(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new la(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new la(this.firestore,void 0===t?c1(this._delegate):c1(this._delegate,t))}catch(t){throw lu(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o=this;return(n=cW((e=this._delegate).firestore,c5),r=c1(e),i=h$(e.converter,t),h6(n,[hf(hl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,iJ.exists(!1))]).then(function(){return r})).then(function(t){return new la(o.firestore,t)})},e.prototype.isEqual=function(t){return c2(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ls.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(lp),lm={Firestore:ln,GeoPoint:hi,Timestamp:rN,Blob:lt,Transaction:li,WriteBatch:lo,DocumentReference:la,DocumentSnapshot:ll,Query:lp,QueryDocumentSnapshot:lf,QuerySnapshot:lv,CollectionReference:lg,FieldPath:function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(he.bind.apply(he,f([void 0],t)))}return t.documentId=function(){return new t(rM.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=k(t))instanceof he&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),FieldValue:function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new hv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new hp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hg("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new hy("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),setLogLevel:function(t){ry.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(t,e){t.INTERNAL.registerComponent(new N("firestore",function(t){return e(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},lm)))}(z,function(t,e){return new ln(t,new c5(t,e),new le)}),z.registerVersion("@firebase/firestore","2.3.9");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ly="firebasestorage.googleapis.com",lb="storageBucket",lw=function(t){function e(n,r){var i=t.call(this,l_(n),"Firebase Storage: "+r+" ("+l_(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return s(e,t),e.prototype._codeEquals=function(t){return l_(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(w);function l_(t){return"storage/"+t}function lI(){return new lw("unknown","An unknown error occurred, please check the error payload for server response.")}function lT(){return new lw("canceled","User canceled the upload/download.")}function lE(){return new lw("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function lS(t){return new lw("invalid-argument",t)}function lA(){return new lw("app-deleted","The Firebase app was deleted.")}function lk(t){return new lw("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lN(t,e){return new lw("invalid-format","String does not match format '"+t+"': "+e)}function lC(t){throw new lw("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lR={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lD=function(t,e){this.data=t,this.contentType=e||null};function lO(t,e){switch(t){case lR.RAW:return new lD(lx(e));case lR.BASE64:case lR.BASE64URL:return new lD(lP(t,e));case lR.DATA_URL:var n;return new lD((n=new lL(e)).base64?lP(lR.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw lN(lR.DATA_URL,"Malformed data URL.")}return lx(e)}(n.rest),new lL(e).contentType)}throw lI()}function lx(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):(64512&r)==55296?n<t.length-1&&(64512&t.charCodeAt(n+1))==56320?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):(64512&r)==56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function lP(t,e){switch(t){case lR.BASE64:var n,r,i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o){var s=i?"-":"_";throw lN(t,"Invalid character '"+s+"' found: is it base64url encoded?")}break;case lR.BASE64URL:var a=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(a||u){var s=a?"+":"/";throw lN(t,"Invalid character '"+s+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/")}try{n=e,r=atob(n)}catch(e){throw lN(t,"Invalid character found")}for(var c=new Uint8Array(r.length),h=0;h<r.length;h++)c[h]=r.charCodeAt(h);return c}var lL=function(t){this.base64=!1,this.contentType=null;var e,n=t.match(/^data:([^,]+)?,/);if(null===n)throw lN(lR.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=(e=";base64",r.length>=e.length&&r.substring(r.length-e.length)===e),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)},lM={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lU(t){switch(t){case"running":case"pausing":case"canceling":return lM.RUNNING;case"paused":return lM.PAUSED;case"success":return lM.SUCCESS;case"canceled":return lM.CANCELED;default:return lM.ERROR}}(r=i||(i={}))[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lF=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=i.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=i.ABORT,e()}),t.xhr_.addEventListener("error",function(){t.errorCode_=i.NETWORK_ERROR,e()}),t.xhr_.addEventListener("load",function(){e()})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw lC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw lC("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw lC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return -1}},t.prototype.getResponseText=function(){if(!this.sent_)throw lC("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),lV=function(){function t(){}return t.prototype.createConnection=function(){return new lF},t}(),lj=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new lw("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),c=RegExp("^https?://"+(n===ly?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),h=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:u,indices:{bucket:1,path:3},postModify:s},{regex:c,indices:{bucket:1,path:2},postModify:s}],l=0;l<h.length;l++){var f=h[l],p=f.regex.exec(e);if(p){var d=p[f.indices.bucket],v=p[f.indices.path];v||(v=""),r=new t(d,v),f.postModify(r);break}}if(null==r)throw new lw("invalid-url","Invalid URL '"+e+"'.");return r},t}(),lq=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function lB(t){return"string"==typeof t||t instanceof String}function lK(t){return lG()&&t instanceof Blob}function lG(){return"undefined"!=typeof Blob}function lH(t,e,n,r){if(r<e)throw lS("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw lS("Invalid value for '"+t+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t,e){var n=e.match(/^(\w+):\/\/.+/),r=null==n?void 0:n[1],i=e;return null==r&&(i="https://"+e),i+"/v0"+t}function lW(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lQ=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r=t.resolve_,i=t.reject_,o=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else if(null!==o){var a=lI();a.serverResponse=o.getResponseText(),i(t.errorCallback_?t.errorCallback_(o,a):a)}else if(n.canceled){var a=t.appDelete_?lA():lT();i(a)}else{var a=new lw("retry-limit-exceeded","Max retry time for operation exceeded, please try again.");i(a)}}this.canceled_?e(!1,new lX(!1,null,!0)):this.backoffId_=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t,e,n){var r=1,i=null,o=!1,s=0,a=!1;function u(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a||(a=!0,e.apply(null,t))}function c(e){i=setTimeout(function(){i=null,t(h,2===s)},e)}function h(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!a){if(t||2===s||o){u.call.apply(u,f([null,t],n));return}r<64&&(r*=2),1===s?(s=2,e=0):e=(r+Math.random())*1e3,c(e)}}var l=!1;function p(t){!l&&(l=!0,!a&&(null!==i?(t||(s=2),clearTimeout(i),c(0)):t||(s=1)))}return c(0),setTimeout(function(){o=!0,p(!0)},n),p}(function(e,n){if(n){e(!1,new lX(!1,null,!0));return}var r=t.pool_.createConnection();function o(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(o),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(){null!==t.progressCallback_&&r.removeUploadProgressListener(o),t.pendingConnection_=null;var n=r.getErrorCode()===i.NO_ERROR,s=r.getStatus();if(!n||t.isRetryStatusCode_(s)){e(!1,new lX(!1,null,r.getErrorCode()===i.ABORT));return}e(!0,new lX(-1!==t.successCodes_.indexOf(s),r))})},e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),lX=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function lY(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(lG())return new Blob(t);throw new lw("unsupported-environment","This browser doesn't seem to support creating Blobs")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lJ=function(){function t(t,e){var n=0,r="";lK(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(!lK(this.data_))return new t(new Uint8Array(this.data_.buffer,e,n-e),!0);var r,i=(r=this.data_).webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null;return null===i?null:new t(i)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(lG()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(lY.apply(null,r))}var i=e.map(function(t){return lB(t)?lO(lR.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function lZ(t){var e=t.lastIndexOf("/",t.length-2);return -1===e?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){return e}var l1=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||l0},l2=null;function l3(){if(l2)return l2;var t=[];t.push(new l1("bucket")),t.push(new l1("generation")),t.push(new l1("metageneration")),t.push(new l1("name","fullPath",!0));var e=new l1("name");e.xform=function(t,e){return!lB(e)||e.length<2?e:lZ(e)},t.push(e);var n=new l1("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new l1("timeCreated")),t.push(new l1("updated")),t.push(new l1("md5Hash",null,!0)),t.push(new l1("cacheControl",null,!0)),t.push(new l1("contentDisposition",null,!0)),t.push(new l1("contentEncoding",null,!0)),t.push(new l1("contentLanguage",null,!0)),t.push(new l1("contentType",null,!0)),t.push(new l1("metadata","customMetadata",!0)),l2=t}function l4(t,e,n){var r=l$(e);return null===r?null:function(t,e,n){var r={};r.type="file";for(var i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Object.defineProperty(r,"ref",{get:function(){var e=new lj(r.bucket,r.fullPath);return t._makeStorageReference(e)}}),r}(t,r,n)}function l6(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l5="prefixes",l8="items",l9=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(t){if(!t)throw lI()}function ft(t,e){return function(n,r){var i=l4(t,r,e);return l7(null!==i),i}}function fe(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new lw("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new lw("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new lw("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new lw("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function fn(t){var e=fe(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new lw("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function fr(t,e,n){var r=lz(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new l9(r,"GET",ft(t,n),i);return o.errorHandler=fn(e),o}function fi(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e&&e.type()||"application/octet-stream"),r}var fo=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function fs(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){l7(!1)}return l7(!!n&&-1!==(e||["active"]).indexOf(n)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fa=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=t.next,this.error=t.error,this.complete=t.complete)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fc=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=l3(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r,i,o,s,a,u,c,h,l,f,p,d,v=(r=t._ref.storage,i=t._ref._location,o=t._mappings,s=t._blob,a=t._metadata,u=i.bucketOnlyServerUrl(),h={name:(c=fi(i,s,a)).fullPath},l=lz(u,r.host),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+s.size(),"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},p=l6(c,o),(d=new l9(l,"POST",function(t){var e;fs(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){l7(!1)}return l7(lB(e)),e},r.maxUploadRetryTime)).urlParams=h,d.headers=f,d.body=p,d.errorHandler=fe(i),d),g=t._ref.storage._makeRequest(v,e,n);t._request=g,g.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i,o,s,a,u=(i=t._ref.storage,o=t._ref._location,s=t._blob,(a=new l9(e,"POST",function(t){var e=fs(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){l7(!1)}n||l7(!1);var r=Number(n);return l7(!isNaN(r)),new fo(r,s.size(),"final"===e)},i.maxUploadRetryTime)).headers={"X-Goog-Upload-Command":"query"},a.errorHandler=fe(o),a),c=t._ref.storage._makeRequest(u,n,r);t._request=c,c.getPromise().then(function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new fo(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){try{s=function(t,e,n,r,i,o,s,a){var u=new fo(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new lw("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw lE();var v=new l9(n,"POST",function(t,n){var i,s=fs(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?ft(e,o)(t,n):null,new fo(a,c,"final"===s,i)},e.maxUploadRetryTime);return v.headers=p,v.body=d.uploadData(),v.progressCallback=a||null,v.errorHandler=fe(t),v}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){t._error=e,t._transition("error");return}var s,a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=fr(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=fi(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l6(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h=lJ.getBlob(c,r,"\r\n--"+a+"--");if(null===h)throw lE();var l={name:u.fullPath},f=lz(o,t.host),p=t.maxUploadRetryTime,d=new l9(f,"POST",ft(t,n),p);return d.urlParams=l,d.headers=s,d.body=h.uploadData(),d.errorHandler=fe(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=lT(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=lU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new fa(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(lU(this._state)){case lM.SUCCESS:fu(this._resolve.bind(null,this.snapshot))();break;case lM.CANCELED:case lM.ERROR:fu(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(lU(this._state)){case lM.RUNNING:case lM.PAUSED:t.next&&fu(t.next.bind(t,this.snapshot))();break;case lM.SUCCESS:t.complete&&fu(t.complete.bind(t))();break;case lM.CANCELED:case lM.ERROR:default:t.error&&fu(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),fh=function(){function t(t,e){this._service=t,e instanceof lj?this._location=e:this._location=lj.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new lj(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return lZ(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return -1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new lj(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw lk(t)},t}();function fl(t,e){return u(this,void 0,void 0,function(){var n,r;return c(this,function(i){switch(i.label){case 0:var o,s,a,u,c,h,l,f,p;return null!=e&&"number"==typeof e.maxResults&&lH("options.maxResults",1,1e3,e.maxResults),n=e||{},o=t.storage,s=t._location,a=n.pageToken,u=n.maxResults,c={},s.isRoot?c.prefix="":c.prefix=s.path+"/",c.delimiter="/",a&&(c.pageToken=a),u&&(c.maxResults=u),h=lz(s.bucketOnlyServerUrl(),o.host),l=o.maxOperationRetryTime,(p=new l9(h,"GET",(f=s.bucket,function(t,e){var n,r=null===(n=l$(e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[l5])for(var i=0,o=n[l5];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new lj(e,s));r.prefixes.push(a)}if(n[l8])for(var u=0,c=n[l8];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new lj(e,h.name));r.items.push(a)}return r}(o,f,n);return l7(null!==r),r}),l)).urlParams=c,p.errorHandler=fe(s),r=p,[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function ff(t,e){var n,r,i=(n=t._location.path,r=e.split("/").filter(function(t){return t.length>0}).join("/"),0===n.length?r:n+"/"+r),o=new lj(t._location.bucket,i);return new fh(t.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){return/^[A-Za-z]+:\/\//.test(t)}function fd(t,e){var n=null==e?void 0:e[lb];return null==n?null:lj.makeFromBucketSpec(n,t)}var fv=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=ly,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=i?this._bucket=lj.makeFromBucketSpec(i,this._host):this._bucket=fd(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=lj.makeFromBucketSpec(this._url,t):this._bucket=fd(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){lH("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){lH("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return u(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:if(!(t=this._authProvider.getImmediate({optional:!0})))return[3,2];return[4,t.getToken()];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0})))return[3,2];return[4,t.getToken()];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new fh(this,t)},t.prototype._makeRequest=function(t,e,n){var r,i,o,s,a,u,c,h=this;if(this._deleted)return new lq(lA());var l=(r=this._appId,i=this._pool,o=this._firebaseVersion,s=lW(t.urlParams),a=t.url+s,c=u=Object.assign({},t.headers),r&&(c["X-Firebase-GMPID"]=r),null!==e&&e.length>0&&(u.Authorization="Firebase "+e),u["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager"),null!==n&&(u["X-Firebase-AppCheck"]=n),new lQ(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i));return this._requests.add(l),l.getPromise().then(function(){return h._requests.delete(l)},function(){return h._requests.delete(l)}),l},t.prototype.makeRequestWithTokens=function(t){return u(this,void 0,void 0,function(){var e,n,r;return c(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=(e=i.sent())[0],r=e[1],[2,this._makeRequest(t,n,r)]}})})},t}();function fg(t,e){return function(t,e){if(!(e&&fp(e)))return function t(e,n){if(e instanceof fv){if(null==e._bucket)throw new lw("no-default-bucket","No default bucket found. Did you set the '"+lb+"' property when initializing the app?");var r=new fh(e,e._bucket);return null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw lS('`path` param cannot contain ".."');return ff(e,n)}(t,e);if(t instanceof fv)return new fh(t,e);throw lS("To use ref(service, url), the first argument must be a Storage instance.")}(t=k(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fm=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),fy=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new fm(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new fm(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new fm(t,i,i._ref))}:{next:e.next?function(t){return e.next(new fm(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),fb=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new fw(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new fw(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),fw=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(ff(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){var n,r;return this._throwIfRoot("put"),new fy(((r=k(this._delegate))._throwIfRoot("uploadBytesResumable"),new fc(r,new lJ(t),e)),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=lR.RAW),this._throwIfRoot("putString");var r=lO(e,t),i=a({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new fy(new fc(this._delegate,new lJ(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e,n=this;return(function t(e,n,r){return u(this,void 0,void 0,function(){var i,o,s;return c(this,function(a){switch(a.label){case 0:return[4,fl(e,{pageToken:r})];case 1:if(i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),!(null!=i.nextPageToken))return[3,3];return[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})})(k(this._delegate),e={prefixes:[],items:[]}).then(function(){return e}).then(function(t){return new fb(t,n.storage)})},t.prototype.list=function(t){var e,n=this;return fl(k(this._delegate),t||void 0).then(function(t){return new fb(t,n.storage)})},t.prototype.getMetadata=function(){return function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=fr(t.storage,t._location,l3()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(k(this._delegate))},t.prototype.updateMetadata=function(t){var e;return function(t,e){return u(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:var i,o,s,a,u,c,h;return t._throwIfRoot("updateMetadata"),i=t.storage,o=t._location,s=l3(),a=lz(o.fullServerUrl(),i.host),u=l6(e,s),c=i.maxOperationRetryTime,(h=new l9(a,"PATCH",ft(i,s),c)).headers={"Content-Type":"application/json; charset=utf-8"},h.body=u,h.errorHandler=fn(o),n=h,[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(k(this._delegate),t)},t.prototype.getDownloadURL=function(){return function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:var r,i,o,s;return t._throwIfRoot("getDownloadURL"),r=t.storage,i=t._location,o=l3(),(s=new l9(lz(i.fullServerUrl(),r.host),"GET",function(t,e){var n=l4(r,e,o);return l7(null!==n),function(t,e,n){var r=l$(e);if(null===r||!lB(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.bucket,i=t.fullPath;return lz("/b/"+o(r)+"/o/"+o(i),n)+lW({alt:"media",token:e})})[0]}(n,e,r.host)},r.maxOperationRetryTime)).errorHandler=fn(i),e=s,[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new lw("no-download-url","The given file does not have any download URLs.");return t})]}})})}(k(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return u(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:var r,i,o;return t._throwIfRoot("deleteObject"),r=t.storage,(o=new l9(lz((i=t._location).fullServerUrl(),r.host),"DELETE",function(t,e){},r.maxOperationRetryTime)).successCodes=[200,204],o.errorHandler=fn(i),e=o,[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(k(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw lk(t)},t}(),f_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(fp(t))throw lS("ref() expected a child path but got a URL, use refFromURL instead.");return new fw(fg(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!fp(t))throw lS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lj.makeFromUrl(t,this._delegate.host)}catch(t){throw lS("refFromUrl() expected a valid full URL but got an invalid one.")}return new fw(fg(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){this._delegate.host="http://"+t+":"+e},t}();z.INTERNAL.registerComponent(new N("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return new f_(r,new fv(r,t.getProvider("auth-internal"),t.getProvider("app-check-internal"),new lV,n,z.SDK_VERSION))},"PUBLIC").setServiceProps({TaskState:lM,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:lR,Storage:fv,Reference:fw}).setMultipleInstances(!0)),z.registerVersion("@firebase/storage","0.6.0"),z.apps.length||z.initializeApp({apiKey:"AIzaSyBtepX3BdGYC1kIRdmO5DzjST8Rk7wM9FI",authDomain:"minhas-tex.firebaseapp.com",projectId:"minhas-tex",storageBucket:"minhas-tex.appspot.com"});let fI=z.storage();var fT=z},9166:function(){},7663:function(t){!function(){var e={229:function(t){var e,n,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch(t){e=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u=[],c=!1,h=-1;function l(){c&&r&&(c=!1,r.length?u=r.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(l);c=!0;for(var e=u.length;e;){for(r=u,u=[];++h<e;)r&&r[h].run();h=-1,e=u.length}r=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}},s=!0;try{e[t](o,o.exports,r),s=!1}finally{s&&delete n[t]}return o.exports}r.ab="//";var i=r(229);t.exports=i}()},1163:function(t,e,n){t.exports=n(3035)}},function(t){var e=function(e){return t(t.s=e)};t.O(0,[774,179],function(){return e(6840),e(3035)}),_N_E=t.O()}]);